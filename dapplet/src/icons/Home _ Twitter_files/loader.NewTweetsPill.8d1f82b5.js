(window.webpackJsonp=window.webpackJsonp||[]).push([[175],{WXWl:function(t,e,i){"use strict";var s=i("ERkP"),a=i.n(s),n=i("Lsrn"),o=i("k/Ka");const r=(t={})=>Object(o.a)("svg",{...t,accessibilityHidden:void 0===t.accessibilityLabel,style:[n.a.root,t.style],viewBox:"0 0 24 24"},a.a.createElement("g",null,a.a.createElement("path",{d:"M18.707 10.293l-6-6c-.39-.39-1.023-.39-1.414 0l-6 6c-.39.39-.39 1.023 0 1.414.195.195.45.293.707.293s.512-.098.707-.293L11 7.414V20c0 .553.447 1 1 1s1-.447 1-1V7.414l4.293 4.293c.195.195.45.293.707.293s.512-.098.707-.293c.39-.39.39-1.023 0-1.414z"})));r.metadata={width:24,height:24},e.a=r},o52z:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var s=i("VPAj");const a=Object(s.a)([]);Object(s.a)({})},xAHt:function(t,e,i){"use strict";i.r(e),i.d(e,"NewTweetsPill",(function(){return O}));var s=i("KEM+"),a=i.n(s),n=i("ERkP"),o=i.n(n),r=i("lnti"),l=i("hqKg"),c=i("o52z"),h=i("G6rE"),m=i("rxPX");const p=(t,e)=>e.alert&&e.alert.userIds||Object(c.a)();var d=Object(m.a)().propsFromState((()=>({userImageUrls:Object(l.createSelector)(h.e.selectAll,p,((t,e)=>e?Object(r.a)(e.map((e=>{const i=t[e];return i?i.profile_image_url_https:void 0}))):[]))}))).withAnalytics(),u=i("3XMw"),w=i.n(u),_=i("WXWl"),b=i("IbOt"),g=i("fs1G"),y=i("rcen"),S=i("MWbm"),D=i("I4+6"),f=i("rHpw"),I=i("cm6r"),T=i("MAI/"),v=i("t62R");const A=w.a.gdb8bdcc,C=w.a.ac0f6491,L={component:"new_tweet_prompt"},x={},E={};class O extends o.a.PureComponent{constructor(...t){super(...t),a()(this,"state",{show:!1}),a()(this,"_getLastShownTime",(()=>E[this.props.timelineId])),a()(this,"_attemptShow",(()=>{const{alert:t,isAtNewest:e,removeAlert:i,timelineId:s,unreadCount:a}=this.props;if(this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null),this._mounted&&(t||a>0)){const a=this._getDelayRemaining();if(a<=0){if(t&&e())return void i();this.setState({show:!0}),x[s]=Date.now(),this._scribeAction("show")}else this._timeoutID=setTimeout(this._attemptShow,a)}})),a()(this,"_handleScrollDown",(()=>{const{alert:t,remainVisibleInterval:e,timelineId:i}=this.props;let s=e;t&&t.displayDurationMs&&t.displayDurationMs>-1&&(s=t.displayDurationMs),this.state.show&&Date.now()>=x[i]+s&&(this._scribeAction("dismiss"),this._hide())})),a()(this,"_handleClick",(()=>{const{applyNewTweetsBarInstructions:t}=this.props;this._scribeAction("click"),window.scrollTo(0,0),t&&t(),this._hide()}))}componentDidMount(){this._mounted=!0,this._getLastShownTime()||this._updateLastShownTime(this.props.timelineId),this._attemptShow(),this._cancelMomentum=Object(b.a)({onUp:g.a,onDown:this._handleScrollDown})}componentDidUpdate(t,e){const{alert:i,timelineId:s,unreadCount:a}=this.props,n=t.timelineId!==s,o=n&&!this._getLastShownTime();n?(o&&this._updateLastShownTime(s),e.show&&this._updateLastShownTime(t.timelineId),t.removeAlert&&t.removeAlert(),this.setState({show:!1}),this._attemptShow()):((i&&!e.show||a>t.unreadCount)&&this._attemptShow(),!t.alert&&0!==a||i||this._hide())}componentWillUnmount(){const{removeAlert:t,timelineId:e}=this.props;this._mounted=!1,this._timeoutID&&clearTimeout(this._timeoutID),this.state.show&&(this._updateLastShownTime(e),t&&t()),this._cancelMomentum()}render(){const{alert:t,label:e,userImageUrls:i}=this.props,{show:s}=this.state;let a;a=t?t.richText&&o.a.createElement(y.a,{entities:t.richText.entities,text:t.richText.text}):e;const n=D.a.generate({backgroundColor:f.a.theme.colors.primary,color:f.a.theme.colors.whiteOnColor});return o.a.createElement(S.a,{accessibilityRole:"status"},o.a.createElement(I.a,{accessibilityHidden:!s,accessibilityLabel:C,accessibilityRole:"button",interactiveStyles:n,onClick:this._handleClick,style:[M.pill,s&&M.show]},o.a.createElement(S.a,{style:M.innerPill},o.a.createElement(_.a,{style:M.icon}),i&&i.length>0?o.a.createElement(S.a,{style:M.facepile},o.a.createElement(T.a,{borderColor:"primary",userAvatarSize:"large",userAvatarUrls:i})):null,o.a.createElement(v.b,{color:"whiteOnColor",numberOfLines:1,style:M.pillText},a))))}_getDelayRemaining(){const{alert:t,triggerDelay:e}=this.props,i=t&&t.triggerDelayMs||e;return this._getLastShownTime()+i-Date.now()}_updateLastShownTime(t){t&&(E[t]=Date.now())}_hide(){const{alert:t,removeAlert:e,timelineId:i}=this.props;this._mounted&&(this._updateLastShownTime(i),this.setState({show:!1})),t&&setTimeout((()=>e()),500)}_scribeAction(t){const{analytics:e,scribeNamespace:i}=this.props,s={...i,...L,action:t};e.scribe(s)}}a()(O,"defaultProps",{isAtNewest:()=>!0,label:A,remainVisibleInterval:3e3,triggerDelay:24e4,unreadCount:0});const M=f.a.create((t=>({pill:{boxShadow:t.boxShadows.small,backgroundColor:t.colors.primary,borderRadius:t.borderRadii.infinite,paddingHorizontal:t.spaces.space16,opacity:0,justifyContent:"center",transform:[{translate3d:"0, 0, 0"}],transitionProperty:"transform, opacity",transitionDuration:"0.15s",transitionTimingFunction:"ease, ease, step-end"},innerPill:{flexDirection:"row",paddingVertical:t.spaces.space4},icon:{width:t.spaces.space20,marginRight:t.spaces.space4,alignSelf:"center",color:t.colors.whiteOnColor},facepile:{marginRight:t.spaces.space8},pillText:{alignSelf:"center"},show:{opacity:1,transitionTimingFunction:"ease, ease, step-start",transform:[{translate3d:"0, 3.5em, 0"}]}}))),k=d(O);e.default=k}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/loader.NewTweetsPill.8d1f82b5.js.map