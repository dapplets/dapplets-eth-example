(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"/Rsk":function(e,t,a){"use strict";a.d(t,"f",(function(){return m})),a.d(t,"e",(function(){return p})),a.d(t,"h",(function(){return g})),a.d(t,"g",(function(){return _})),a.d(t,"d",(function(){return b})),a.d(t,"c",(function(){return f})),a.d(t,"b",(function(){return C})),a.d(t,"a",(function(){return v})),a.d(t,"i",(function(){return T}));var i=a("oEOe"),n=a("kGix");var s=a("M6MT"),o=a("Ssj5"),r=a("qlwE"),l=a("a/ea"),c=a("474o");const d="placePicker",h=Object.freeze({REQUEST:"rweb/placePicker/SEARCH_REQUEST",SUCCESS:"rweb/placePicker/SEARCH_SUCCESS",FAILURE:"rweb/placePicker/SEARCH_FAILURE"}),u=Object.freeze({initial:{fetchStatus:n.a.NONE},lastSearch:{fetchStatus:n.a.NONE},lastSelectedPlace:void 0});const m=e=>e.placePicker.initial.results,p=e=>e.placePicker.initial.fetchStatus,g=e=>e.placePicker.lastSearch.results,_=e=>e.placePicker.lastSearch.fetchStatus,b=e=>((e,t)=>null!=t?t:null==e?void 0:e.places.find((t=>(null==e?void 0:e.autotag_place_id)===t.place.id)))(m(e),(e=>e.placePicker.lastSelectedPlace)(e)),y=(e,t)=>(a,n,{api:s})=>Object(i.b)(a,{request:s.Places.search,params:e})({actionTypes:h,context:"SEARCH_PLACES_ACTION",meta:{resultSet:t}}),f=e=>(t,a,{api:i})=>{const n=Object(l.d)(a());return t(y({query_type:c.a.tweet_compose_location,lat:null==n?void 0:n.coords.latitude,long:null==n?void 0:n.coords.longitude,hacc:null==n?void 0:n.coords.accuracy,search_term:e},c.c.lastSearch))},C=()=>(e,t,{api:a})=>{const i=p(t()),s=m(t());if(i===n.a.LOADING||s)return Promise.resolve();const o=Object(l.d)(t());return o?e(y({lat:o.coords.latitude,long:o.coords.longitude,hacc:o.coords.accuracy,query_type:c.a.tweet_compose_location,count:50},c.c.initial)):Promise.resolve()},v=()=>(e,t,{api:a})=>Object(r.l)(t())&&Object(l.c)(t())===s.b.granted?e(Object(l.b)()).then((()=>e(C()))).then((()=>b(t()))):Promise.resolve(),w="rweb/placePicker/UPDATE_LAST_SELECTED_PLACE",T=e=>({type:w,payload:e});o.a.register({[d]:function(e=u,t){switch(t.type){case h.REQUEST:{const{resultSet:a}=t.meta;return{...e,[a]:{fetchStatus:n.a.LOADING}}}case h.FAILURE:{const{resultSet:a}=t.meta;return{...e,[a]:{fetchStatus:n.a.FAILED}}}case h.SUCCESS:{const{meta:{resultSet:a},payload:i}=t;return{...e,[a]:{fetchStatus:n.a.LOADED,results:i}}}case w:{const{payload:a}=t;return{...e,lastSelectedPlace:null!=a?a:void 0}}default:return e}}})},"3GUV":function(e,t,a){"use strict";var i=a("ERkP"),n=a.n(i),s=a("rHpw"),o=a("MWbm");class r extends n.a.Component{shouldComponentUpdate(){return!1}render(){return n.a.createElement(o.a,{style:l.root})}}const l=s.a.create((e=>({root:{height:5*e.lineHeightsPx.body}})));t.a=r},"45mF":function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var i=a("1YZw"),n=a("pXBW"),s=a("3XMw"),o=a.n(s),r=a("SrIh");const l=o.a.a5d4fda0,c=(e=l,t=!0)=>({customErrorHandler:a=>{const{context:s}=a;return!a instanceof n.a&&(a.message=`Strato error occurred in ${s.id}: ${s.action}`),Object(r.a)(a,{extra:{context:s,isStrato:!0}}),t?Object(i.b)({text:e}):[]}})},"474o":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return s}));const i=Object.freeze({profile_location:"profile_location",tweet_compose_location:"tweet_compose_location"}),n=Object.freeze({foursquare:"foursquare",yelp:"yelp"}),s=Object.freeze({initial:"initial",lastSearch:"lastSearch"})},"5UID":function(e,t,a){"use strict";var i=a("ERkP"),n=a.n(i),s=a("3XMw"),o=a.n(s),r=a("rHpw"),l=a("+/1j"),c=a("MWbm");const d=o.a.e5b0063d;let h=0;class u extends n.a.Component{constructor(){super(),this._listDomId=`accessible-list-${h}`,h+=1}render(){const{children:e,title:t}=this.props,a=d({title:t});return n.a.createElement(c.a,{accessibilityLabelledBy:this._listDomId,accessibilityRole:"region"},n.a.createElement(l.a,{accessibilityLevel:1,accessibilityRole:"heading",nativeID:this._listDomId,style:r.a.visuallyHidden},t),n.a.createElement(c.a,{accessibilityLabel:a},e))}}t.a=u},"8A5z":function(e,t,a){"use strict";var i=a("ERkP"),n=a.n(i),s=a("Lsrn"),o=a("k/Ka");const r=(e={})=>Object(o.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[s.a.root,e.style],viewBox:"0 0 24 24"},n.a.createElement("g",null,n.a.createElement("path",{d:"M9.008 15.205c-1.766 0-3.187-1.35-3.187-3.196v-.02c0-1.8 1.388-3.214 3.26-3.214 1.26 0 2.075.53 2.62 1.29L10.494 11c-.306-.42-.798-.695-1.357-.695-.93 0-1.684.754-1.684 1.684s.755 1.684 1.685 1.684c.578 0 1.087-.292 1.39-.735l1.22.87c-.583.802-1.368 1.394-2.737 1.394h-.002zm6.582 0c-1.764 0-3.185-1.35-3.185-3.196v-.02c0-1.8 1.386-3.214 3.258-3.214 1.262 0 2.075.53 2.622 1.29l-1.21.935c-.305-.42-.797-.694-1.356-.694-.93 0-1.685.754-1.685 1.684s.754 1.685 1.684 1.685c.577 0 1.086-.292 1.39-.735l1.22.87c-.584.803-1.37 1.395-2.738 1.395z"}),n.a.createElement("path",{d:"M20.5 2.02h-17c-1.24 0-2.25 1.007-2.25 2.247v15.507c0 1.238 1.01 2.246 2.25 2.246h17c1.24 0 2.25-1.008 2.25-2.246V4.267c0-1.24-1.01-2.247-2.25-2.247zm.75 17.754c0 .41-.336.746-.75.746h-17c-.414 0-.75-.336-.75-.746V4.267c0-.412.336-.747.75-.747h17c.414 0 .75.335.75.747v15.507z"})));r.metadata={width:24,height:24},t.a=r},Drq4:function(e,t,a){"use strict";var i=a("ERkP"),n=a.n(i),s=a("Lsrn"),o=a("k/Ka");const r=(e={})=>Object(o.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[s.a.root,e.style],viewBox:"0 0 24 24"},n.a.createElement("g",null,n.a.createElement("circle",{cx:"12",cy:"6.674",r:"1.889"}),n.a.createElement("path",{d:"M9.828 14.817l-1.62 3.342c-.138.41.083.857.495.995s.858-.083.996-.495l1.602-3.176c.28-.557 1.076-.556 1.356 0l1.608 3.195c.138.41.584.632.996.494.412-.138.633-.584.495-.996l-1.62-3.342.032.07-.123-.262c-.483-1.027-.535-2.19-.16-3.24.106-.302.392-.505.712-.505h2.032c.434 0 .786-.353.786-.787 0-.434-.352-.786-.786-.786H7.37c-.435 0-.787.352-.787.786 0 .434.352.786.786.786h1.985c.32 0 .606.2.713.503.374 1.05.323 2.214-.158 3.24l-.125.263"}),n.a.createElement("path",{d:"M12 22.75C6.072 22.75 1.25 17.928 1.25 12S6.072 1.25 12 1.25 22.75 6.072 22.75 12 17.928 22.75 12 22.75zm0-20C6.9 2.75 2.75 6.9 2.75 12S6.9 21.25 12 21.25s9.25-4.15 9.25-9.25S17.1 2.75 12 2.75z"})));r.metadata={width:24,height:24},t.a=r},FS1z:function(e,t,a){"use strict";var i=a("KEM+"),n=a.n(i),s=a("ERkP"),o=a.n(s),r=a("rxPX"),l=a("0KEI");const c=(e,{module:t})=>t.selectFetchStatus(e),d=(e,{module:t})=>t.selectItems(e);var h=Object(r.a)().propsFromState((e=>({fetchStatus:c,items:d}))).propsFromActions((({module:e})=>({createLocalApiErrorHandler:Object(l.createLocalApiErrorHandlerWithContextFactory)("SLICES_TIMELINE"),fetch:e.fetch,fetchIfNeeded:e.fetchIfNeeded,fetchBottom:e.fetchBottom}))),u=a("v//M"),m=a("sIe2"),p=a("3XMw"),g=a.n(p),_=a("TEoO");const b=g.a.i9028824,y=e=>e,f={viewType:"timeline"};class C extends o.a.Component{constructor(...e){super(...e),n()(this,"_render",(()=>{const{footer:e,items:t,noItemsRenderer:a,numColumns:i,onScrollEnd:n,renderer:s,withoutHeadroom:r}=this.props;return!t||i<1?null:1===i?o.a.createElement(_.a,{cacheKey:"sliceTimeline",footer:e,identityFunction:y,items:t,noItemsRenderer:a,onNearEnd:this._handleNearEnd,onScrollEnd:n,renderer:s,withoutHeadroom:r}):o.a.createElement(m.a,{ListEmptyComponent:a,data:t,keyExtractor:y,numColumns:i,renderItem:s})})),n()(this,"_handleNearEnd",(()=>{const{createLocalApiErrorHandler:e,fetchBottom:t}=this.props;t().catch(e())})),n()(this,"_handleFetch",(()=>{const{alwaysFetch:e,createLocalApiErrorHandler:t,fetch:a,fetchIfNeeded:i}=this.props;(e?a:i)().catch(t())}))}componentDidMount(){this._handleFetch()}componentDidUpdate(e){const{module:t}=this.props;e.module!==t&&this._handleFetch()}render(){const{fetchStatus:e,module:t,retryMessage:a}=this.props;return t?o.a.createElement(u.a,{accessibilityLabel:b,behavioralEventContext:f,fetchStatus:e,onRequestRetry:this._handleFetch,render:this._render,retryMessage:a,retryable:!0}):null}}n()(C,"defaultProps",{numColumns:1,alwaysFetch:!1});const v=h(C);t.a=v},M6MT:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return n}));const i=Object.freeze({granted:"granted",denied:"denied",prompt:"prompt"}),n=Object.freeze({PERMISSION_DENIED:1,POSITION_UNAVAILABLE:2,TIMEOUT:3})},TEoO:function(e,t,a){"use strict";var i=a("ERkP"),n=a.n(i),s=a("5UID"),o=a("3GUV"),r=a("iBK2");const l=n.a.createElement(o.a,null),c=({accessibilityTitle:e,...t})=>{const a=n.a.createElement(r.b,t);return e?n.a.createElement(s.a,{title:e},a):a};c.defaultProps={footer:l},t.a=c},WOwf:function(e,t,a){"use strict";function i(e,t){return Math.min(1,1-e/t)}a.d(t,"a",(function(){return i}))},Zg3A:function(e,t,a){"use strict";var i=a("ERkP"),n=a.n(i),s=a("Lsrn"),o=a("k/Ka");const r=(e={})=>Object(o.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[s.a.root,e.style],viewBox:"0 0 24 24"},n.a.createElement("g",null,n.a.createElement("path",{d:"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm8.472 9.442c-.242.19-.472.368-.63.486-.68-1.265-1.002-1.78-1.256-2.007-.163-.145-.37-.223-.78-.375-.367-.136-1.482-.55-1.65-.85-.087-.153.136-.602.23-.793.088-.177.164-.33.196-.497.123-.646-.33-1.146-.728-1.59-.066-.072-.153-.17-.23-.26.335-.12.862-.26 1.42-.384 1.95 1.448 3.26 3.704 3.428 6.272zm-9.788-7.83c.076.25.145.5.182.678-.255.15-.663.363-.96.52-.262.136-.522.273-.738.392-.247.137-.442.234-.6.313-.347.174-.598.3-.833.553-.068.073-.26.278-1.02 1.886l-1.79-.656c1.293-1.94 3.362-3.31 5.76-3.685zM12 20.5c-4.687 0-8.5-3.813-8.5-8.5 0-1.197.25-2.335.7-3.37.47.182 1.713.66 2.75 1.035-.107.336-.245.854-.26 1.333-.03.855.502 1.7.562 1.792.053.08.12.15.2.207.303.21.687.5.827.616.063.343.166 1.26.23 1.833.144 1.266.175 1.48.24 1.65.005.012.514 1.188 1.315 1.188.576-.003.673-.206 1.855-2.688.244-.512.45-.95.513-1.058.1-.144.597-.61.87-.83.55-.442.76-1.82.413-2.682-.335-.83-1.92-2.08-2.5-2.195-.17-.033-.43-.04-.953-.053-.497-.01-1.25-.028-1.536-.09-.098-.024-.314-.094-.605-.196.32-.668.627-1.28.71-1.4.05-.052.168-.112.408-.234.17-.086.383-.192.653-.34.208-.116.458-.247.71-.38 1.168-.612 1.484-.8 1.658-1.082.11-.177.263-.44-.04-1.544 1.042.027 2.038.24 2.955.61-.89.32-1.024.595-1.106.77-.367.784.256 1.475.667 1.93.096.107.24.268.32.38l-.017.036c-.234.472-.67 1.35-.196 2.194.406.72 1.384 1.13 2.437 1.52.134.05.25.092.33.126.16.208.496.79 1 1.735l.154.285c.078.14.33.505.842.505.167 0 .363-.04.59-.137.032-.013.083-.035.18-.094C19.72 17.405 16.22 20.5 12 20.5zm-3.812-9.45c.01-.285.102-.646.184-.907l.027.006c.397.09 1.037.11 1.83.13.32.006.59.008.615 0 .326.143 1.355 1 1.483 1.31.113.28.05.812-.034 1.01-.233.197-.845.735-1.085 1.078-.093.13-.212.373-.64 1.274-.133.276-.313.654-.488 1.013-.026-.225-.054-.472-.08-.686-.225-2.003-.273-2.22-.42-2.445-.05-.078-.202-.31-1.135-.973-.117-.213-.268-.564-.26-.813z"})));r.metadata={width:24,height:24},t.a=r},"a/ea":function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"d",(function(){return l})),a.d(t,"e",(function(){return d})),a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return m}));var i=a("M6MT"),n=a("Ssj5");const s="geoLocation",o=Object.freeze({permissionStatus:void 0,position:void 0});const r=e=>e.geoLocation.permissionStatus,l=e=>e.geoLocation.position,c="rweb/geoLocation/SET_PERMISSION_STATUS",d=e=>({payload:e,type:c}),h="rweb/geoLocation/SET_POSITION",u=()=>(e,t)=>p().then((t=>e({payload:t,type:h}))).catch((t=>(e(d(i.b.denied)),Promise.reject(t)))),m=()=>(e,t)=>l(t())?Promise.resolve():e(u()),p=()=>new Promise(((e,t)=>navigator.geolocation.getCurrentPosition((t=>{const a={timestamp:t.timestamp,coords:{latitude:t.coords.latitude,longitude:t.coords.longitude,altitude:t.coords.altitude,accuracy:t.coords.accuracy,altitudeAccuracy:t.coords.altitudeAccuracy,heading:t.coords.heading,speed:t.coords.speed}};return e(a)}),t)));n.a.register({[s]:function(e=o,t){switch(t.type){case c:return{...e,permissionStatus:t.payload};case h:return{...e,position:t.payload};default:return e}}})},h5NW:function(e,t,a){"use strict";var i=a("97Jx"),n=a.n(i),s=a("KEM+"),o=a.n(s),r=(a("MvUL"),a("ERkP")),l=a.n(r),c=a("ye3X"),d=a("pXBW"),h=a("6/RC"),u=a("wpu3"),m=a("+Kfv"),p=a("eSoz"),g=a("rxPX");const _=(e,{communityId:t})=>t?p.c.select(e,t):void 0;var b=Object(g.a)().propsFromState((()=>({community:_}))),y=a("MtXG"),f=a("t62R"),C=a("CKsB"),v=a("rHpw"),w=a("3XMw"),T=a.n(w);const x=T.a.d58baa7e;var E=b(l.a.memo((e=>{const{clickHandler:t,community:a,communityId:i,selectedCommunityId:n}=e;if(!a)return null;const{member_count:s}=a;return l.a.createElement(C.a,{actionSubText:(()=>{const e=x(s);return l.a.createElement(y.a.Group,null,l.a.createElement(y.a,null,l.a.createElement(f.b,{color:"white"},l.a.createElement(T.a.I18NFormatMessage,{$i18n:"b38e130b"},l.a.createElement(y.a.Value,null,T.a.ibd0106d({formattedCount:e})),l.a.createElement(y.a.Label,null,T.a.cface2d0({count:s}))))))})(),actionText:a.name,isSelected:n===i,key:i,media:a.media,onClick:t({_type:"community_members",communityIdValue:i,conversationControlsValue:"community_members"}),selectable:!0,style:S.menuItem})})));const S=v.a.create((e=>({menuItem:{alignItems:"center"}})));var I=a("FS1z"),R=a("MWbm"),A=a("yw4N"),P=a("+Eiw"),M=a("Zg3A"),O=a("EyD/");const D=T.a.e815fc33,k=T.a.c63602d3,N=T.a.baffe39a,L=T.a.aa4209e8,F=v.a.create((e=>({hidden:{visibility:"hidden"},title:{flexDirection:"column",paddingVertical:e.spaces.space4,paddingHorizontal:e.spaces.space12},root:{flex:1,flexDirection:"column",paddingTop:e.spaces.space12,paddingBottom:e.spaces.space12},menuItem:{alignItems:"center"},superFollowsIcon:{backgroundImage:P.a.getBackgroundImage()},viewport:{borderBottomLeftRadius:e.borderRadii.xLarge,borderBottomRightRadius:e.borderRadii.xLarge,flexGrow:1,flexShrink:1,overflow:"auto",zIndex:void 0}})));var B=e=>{const{audienceControlsValue:t,dismiss:a,hasMemberships:i,isC9sParticipationEnabled:n,isSuperFollowsCreator:s,onAudienceControlsValueChange:o,sliceModule:r}=e,c=t.communityIdValue||void 0,d=t.exclusivityControlValue||void 0,h=l.a.useCallback((e=>()=>{o(e),a()}),[o,a]);return l.a.createElement(R.a,{style:F.root},l.a.createElement(A.a,{style:F.viewport},l.a.createElement(l.a.Fragment,null,l.a.createElement(f.b,{size:"headline1",style:F.title,weight:"bold"},D),l.a.createElement(m.a,{viewType:"everyone"},l.a.createElement(C.a,{Icon:M.a,actionText:N,isSelected:!d&&!c,onClick:h({_type:"conversation_controls",conversationControlsValue:"all"}),selectable:!0,style:F.menuItem,withIconAsThumbnail:!0})),s?l.a.createElement(C.a,{Icon:O.a,actionText:L,iconThumbnailColor:"exclusive",isSelected:!!d,onClick:h({_type:"super_followers_exclusive",conversationControlsValue:"super_followers_exclusive",exclusivityControlValue:{}}),selectable:!0,style:F.menuItem,withIconAsThumbnail:!0}):null),i&&r&&n?l.a.createElement(R.a,null,l.a.createElement(m.a,{viewType:"community"},l.a.createElement(f.b,{style:F.title,weight:"bold"},k),l.a.createElement(I.a,{module:r,noItemsRenderer:()=>null,renderer:e=>l.a.createElement(E,{clickHandler:h,communityId:e,dismiss:a,key:e,selectedCommunityId:c}),withoutHeadroom:!0}))):null))},V=a("xVN5"),j=a("wa7Z"),z=a("hqKg"),H=a("li/m"),U=a("RqPI"),W=a("xZGM"),G=a("0KEI");const q=(e,t)=>{const a=t.audienceControlsValue.communityIdValue||void 0;return a?p.c.select(e,a):void 0},$=(e,t)=>Object(W.z)(e,W.f);var K=Object(g.a)().propsFromState((()=>({communities:p.f,educationalVisibilityFlag:$,hasMemberships:H.d,selectedCommunity:q,sliceModule:Object(z.createSelector)(U.q,(e=>e?Object(j.a)(e):void 0))}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(G.createLocalApiErrorHandlerWithContextFactory)("COMMUNITIES_CONTROLS"),addEducationFlag:()=>Object(W.w)(W.f),updateSingleComposer:V.x}))),X=a("FG+G"),Q=a("v6aA"),Y=a("X00g"),Z=a("efqG"),J=a("/yvb");const ee=T.a.baffe39a,te=T.a.e815fc33,ae=T.a.aa4209e8,ie=l.a.createElement(X.a,null);class ne extends l.a.Component{constructor(e,t){super(e,t),o()(this,"_renderContent",(e=>{const{audienceControlsValue:t,hasMemberships:a,isC9sParticipationEnabled:i,isSuperFollowsCreator:n,sliceModule:s}=this.props;return l.a.createElement(B,{audienceControlsValue:t,dismiss:e,hasMemberships:a,isC9sParticipationEnabled:i,isSuperFollowsCreator:n,onAudienceControlsValueChange:this._handleAudienceControlsValueChange,sliceModule:s})})),o()(this,"_handleAudienceControlsValueChange",(e=>{const{updateSingleComposer:t}=this.props;this._handleDismissEducationalVisibilty(),this.props.onAudienceControlsValueChange(e),["super_followers_exclusive","community_members"].indexOf(e._type)>-1&&t({updates:{scheduledFor:void 0,scheduledTweetId:void 0}})})),o()(this,"_handleOpen",(()=>{this.setState({popoverIsOpen:!0})})),o()(this,"_handleDismiss",(()=>{this.setState({popoverIsOpen:!1}),this._handleDismissEducationalVisibilty()})),o()(this,"_handleDismissEducationalVisibilty",(()=>{this.props.addEducationFlag()})),this.state={popoverIsOpen:!1}}render(){const{audienceControlsValue:e,educationalVisibilityFlag:t,hasMemberships:a,isSuperFollowsCreator:i,selectedCommunity:s}=this.props,{popoverIsOpen:o}=this.state,r=this.context.featureSwitches.isTrue("c9s_ui_colors_enabled_rweb"),c=e.communityIdValue||!1,d=e.exclusivityControlValue||!1,h=t&&!s,u=c&&null!=s&&s.name?s.name:d?ae:ee;let p;if(d)p={color:"plum500",borderColor:"plum500",backgroundColor:"transparent"};else if(c&&null!=s&&s.theme&&r){const e=Y.a.getCommunityUIColorName(s.theme);p={color:e,borderColor:e,backgroundColor:"transparent"}}else p={type:"brandOutlined"};return i||a?l.a.createElement(m.a,{viewType:"communities_controls"},l.a.createElement(R.a,{style:se.container},l.a.createElement(Z.a,{onDismiss:this._handleDismiss,onOpen:this._handleOpen,renderContent:this._renderContent,visibilityBehavior:h?"forceVisible":"interactive"},l.a.createElement(J.a,n()({accessibilityExpanded:o,accessibilityHasPopup:"menu",accessibilityLabel:te,accessibilityRole:"button",icon:ie,size:"xSmall"},p),u)))):null}}o()(ne,"contextType",Q.a);const se=v.a.create((e=>({button:{paddingHorizontal:e.spaces.space4},container:{display:"inline-flex",flexDirection:"row",paddingBottom:e.spaces.space12},hidden:{visibility:"hidden"},root:{flexDirection:"column",paddingTop:e.spaces.space16,paddingBottom:e.spaces.space16}})));var oe=K(ne),re=a("PKbs");const le=(e,t)=>{const a=t.selectedCommunityId;return a?p.c.select(e,a):void 0};var ce=Object(g.a)().propsFromState((()=>({community:le}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(G.createLocalApiErrorHandlerWithContextFactory)("COMMUNITY_RULES"),fetchCommunityIfNeeded:p.c.fetchOneIfNeeded}))),de=a("YeIG"),he=a("21zW");const ue=T.a.gfca5254,me=T.a.f510c8b2,pe=l.a.createElement(f.b,{weight:"bold"},me),ge=v.a.create((e=>({button:{paddingHorizontal:e.spacesPx.space8+e.spacesPx.space2},badgeStyle:{marginRight:e.spaces.space12},container:{display:"inline-flex",flexDirection:"row",paddingBottom:e.spaces.space12,alignItems:"baseline"},rulesHeader:{marginHorizontal:e.spaces.space16,marginVertical:e.spaces.space12},ruleContainerStyle:{paddingHorizontal:e.spaces.space16,fontWeight:"normal"}})));var _e=ce((({community:e,createLocalApiErrorHandler:t,fetchCommunityIfNeeded:a,selectedCommunityId:i,showMiddot:s})=>{l.a.useEffect((()=>{i&&Object(de.a)(e)&&a(i).catch(t())}),[e,i,t,a]);const[o,r]=l.a.useState(!1),{featureSwitches:c}=l.a.useContext(Q.a),d=l.a.useCallback((t=>{if(null!=e&&e.rules){const{rules:t,theme:a}=e;return l.a.createElement(re.b,{badgeStyle:ge.badgeStyle,headerContainerStyle:ge.rulesHeader,heading:pe,ruleContainerStyle:ge.ruleContainerStyle,rules:t,theme:a})}return null}),[e]);if(null!=e&&e.rules&&e.rules.length>0){const{theme:t}=e,a=Y.a.getCommunityUIColorName(t),i=c.isTrue("c9s_ui_colors_enabled_rweb")?{color:a,borderColor:"transparent",backgroundColor:"transparent"}:{type:"brandText"};return l.a.createElement(R.a,{style:ge.container},s?l.a.createElement(he.a,null):null,l.a.createElement(Z.a,{onDismiss:()=>r(!1),onOpen:()=>r(!0),renderContent:d},l.a.createElement(J.a,n()({accessibilityExpanded:o,accessibilityHasPopup:"dialog",accessibilityRole:"button",size:"xSmall",style:ge.button},i),ue)))}return null}));const be=(e,t)=>Object(W.z)(e,W.g);var ye=Object(g.a)().propsFromState((()=>({shouldShowEducation:be}))).propsFromActions((()=>({addEducationFlag:()=>Object(W.w)(W.g)}))),fe=a("4zmP");const Ce=T.a.g46f363d,ve={viewType:"rule_education"};const we=v.a.create((e=>({container:{marginBottom:e.spaces.space8}})));var Te=ye((function({addEducationFlag:e,shouldShowEducation:t}){const a=()=>{e()};return l.a.useEffect((()=>a)),t?l.a.createElement(R.a,{style:we.container},l.a.createElement(fe.a,{behavioralEventContext:ve,onClose:a,text:Ce,withCloseButton:!0})):null})),xe=a("H7Rt"),Ee=a("yZqq");const Se=(e,t)=>Object(W.z)(e,W.q);var Ie=Object(g.a)().propsFromState((()=>({shouldShowEducation:Se}))).propsFromActions((()=>({addEducationFlag:()=>Object(W.w)(W.q)})));const Re=T.a.aa65a449,Ae={viewType:"persistent_conversation_controls_education"};const Pe=v.a.create((e=>({container:{width:"100%",marginBottom:e.spaces.space8}})));var Me=Ie((function({addEducationFlag:e,buttonRef:t,shouldShowEducation:a}){const{featureSwitches:i}=l.a.useContext(Q.a),[n,s]=l.a.useState(),o=()=>{e()};return l.a.useEffect((()=>o),[]),l.a.useEffect((()=>{if(t){const{left:e,width:a}=t.getBoundingClientRect();s(e+a/2)}}),[t]),!0===i.getValueWithoutScribeImpression("conversation_controls_persistence_enabled")&&a?l.a.createElement(R.a,{style:Pe.container},l.a.createElement(fe.a,{arrowPositionStart:n,behavioralEventContext:Ae,onClose:o,text:Re,withCloseButton:!0})):null})),Oe=a("Irs7"),De=a("DlMI"),ke=a("gBde"),Ne=a("gUPl"),Le=a("cOhU");const Fe=l.a.createElement(De.a,null),Be=l.a.createElement(ke.a,null),Ve=l.a.createElement(Ne.a,null),je=l.a.createElement(Le.a,null),ze="conversation_control",He=Object.freeze({all:{icon:Fe,label:T.a.i8ea6d4e},community:{icon:Ve,label:T.a.ec5a4a25},by_invitation:{icon:Be,label:T.a.b4543009},community_members:{icon:je,label:T.a.i13be5a0},super_followers_exclusive:{icon:Fe,label:T.a.f8393bda}});Object.freeze(["community","by_invitation"]);var Ue=Object(Oe.a)((e=>{const{analytics:t,...a}=e,{disabled:i,value:n}=e,{icon:s,label:o}=He[n],[r,c]=l.a.useState(!1),d=l.a.useRef(null);l.a.useEffect((()=>{n!==xe.a.all&&n!==xe.a.community_members&&c(!0)}),[]);const h=l.a.useCallback((e=>{t.scribe({element:ze,action:"click"})}),[t]);return l.a.createElement(m.a,{viewType:ze},r?l.a.createElement(Me,{buttonRef:d.current}):null,l.a.createElement(R.a,{style:We.controlsContainer},l.a.createElement(Ee.a,a,l.a.createElement(J.a,{disabled:i,icon:s,onPress:h,ref:d,size:"xSmall",style:We.button,type:"brandText"},o))))}));const We=v.a.create((e=>({button:{paddingHorizontal:e.spacesPx.space8+e.spacesPx.space2},controlsContainer:{display:"inline-flex",flexDirection:"row",paddingBottom:e.spaces.space12}})));var Ge=a("krmn"),qe=a("cIoY"),$e=a("w3n3"),Ke=a("MLl7"),Xe=a("1auM"),Qe=a("07FG"),Ye=a("Q8CU"),Ze=a("QbaN"),Je=a("nV1z"),et=a("VPdC"),tt=a("WPfJ");var at=v.a.create((e=>({root:{paddingHorizontal:e.componentDimensions.gutterHorizontal},avatarContainerExpanded:{paddingTop:e.spaces.space4},avatarContainer:{justifyContent:"center"},avatar:{width:"100%"},controlsContainer:{marginLeft:-e.spacesPx.space8,borderBottomColor:e.colors.borderColor,borderBottomWidth:e.spaces.space1,flexWrap:"wrap",width:"100%"},mobileControlsLayout:{flexDirection:"column"},controlsLayout:{flexDirection:"row",alignItems:"center"},rightColumn:{paddingTop:e.spaces.space4,justifyContent:"center",position:"static",transitionProperty:"opacity, color",transitionDuration:"0.1s",transitionTimingFunction:"ease-out"},composeBoxContainer:{display:"flex",flexDirection:"column",flexGrow:1,flexShrink:1,position:"static",zIndex:1},inputArea:{zIndex:1},dragDrop:{borderColor:e.colors.transparent,borderRadius:e.borderRadii.small,borderStyle:"solid",borderWidth:e.borderWidths.medium},textInputArea:{alignItems:"center",flexDirection:"row",justifyContent:"space-between",zIndex:tt.f},textInputStyle:{paddingHorizontal:0},textInputMobileCollapsed:{maxHeight:e.fontSizes.title4,padding:0,overflow:"hidden"},tweetAttachmentArea:{zIndex:tt.e},iconEmojiPicker:{zIndex:tt.c},toolBar:{alignItems:"center",backgroundColor:e.colors.cellBackground,flexDirection:"row",flexWrap:"wrap",justifyContent:"space-between",marginHorizontal:e.spaces.space2,zIndex:tt.a},firstToolBarButton:{marginLeft:`-${e.spaces.space8}`},toolBarButton:{marginHorizontal:0},toolBarIconsContainer:{alignItems:"center",flexDirection:"row",marginTop:e.spaces.space12},separator:{width:"1px",backgroundColor:e.colors.gray300,height:e.fontSizes.title2,marginRight:e.spaces.space12,marginLeft:`calc(${e.spaces.space12} - 2px)`},conversationLine:{alignSelf:"center",backgroundColor:e.colors.gray200,flexGrow:1,flexShrink:1,minHeight:0,width:e.componentDimensions.conversationLineWidth,marginTop:e.spaces.space4,marginBottom:e.spaces.space4},conversationLineWithOverflow:{marginTop:`-${e.spaces.space4}`},attachmentContainer:{marginTop:e.spaces.space4,marginBottom:e.spaces.space4},mediaPreview:{marginTop:e.spaces.space4},quoteTweet:{backgroundColor:e.colors.transparent,marginTop:e.spaces.space4,marginBottom:0},addImageTextContainer:{alignSelf:"flex-start",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},addImageActionIcon:{marginHorizontal:e.spaces.space4},addImageTextPadding:{marginEnd:e.spaces.space48},imageActions:{alignItems:"center",flexDirection:"row",flexWrap:"wrap",marginTop:e.spaces.space4},blurStyle:{opacity:.5},inputStyle:{width:"100%"},collapsedInputStyle:{flexGrow:1,flexShrink:1},highlightedText:{borderRadius:e.borderRadii.large,paddingVertical:e.spaces.space12,paddingLeft:e.spaces.space12,marginTop:0,marginBottom:0},highlightedTextInner:{marginHorizontal:e.spaces.space4},taggedLocationButton:{paddingLeft:e.spacesPx.space8+e.spacesPx.space2,paddingRight:e.spacesPx.space8+e.spacesPx.space2,maxWidth:"100%"},taggedLocationContainer:{display:"inline-flex",flexDirection:"row",minWidth:0,flexShrink:1,paddingBottom:e.spaces.space12}}))),it=a("aITJ");const nt=T.a.bdbcdd93,st=T.a.a809609f,ot=l.a.createElement(Je.a,null);var rt=({media:e,mediaAttachDisabled:t,onFilesAdded:a,setActiveParentKey:i,videoPickerEnabled:n})=>{const s=t||e.length>=4,o=e.length<3,r=n&&it.b.isIOS()&&it.b.isSafari();return l.a.createElement(l.a.Fragment,null,l.a.createElement(et.a,{acceptGifs:0===e.length,acceptVideo:0===e.length&&!r,accessibilityLabel:e.length>0||r?nt:void 0,disabled:s,multiple:o,onChange:a,onPress:i,style:[at.toolBarButton,at.firstToolBarButton],type:"brandText"}),r?l.a.createElement(et.a,{acceptGifs:!1,acceptImages:!1,acceptVideo:!0,accessibilityLabel:st,disabled:e.length>0,hoverLabel:{label:st},icon:ot,multiple:!1,onChange:a,onPress:i,style:at.toolBarButton,type:"brandText"}):null)},lt=a("p+r5"),ct=a("GWvE");class dt extends l.a.Component{constructor(...e){super(...e),o()(this,"_setInputRef",(e=>{this._inputRef=e}))}render(){const{autoFocus:e,defaultValue:t,editable:a,label:i,name:n,onBlur:s,onChange:o}=this.props;return l.a.createElement(R.a,{style:ht.root},l.a.createElement(lt.a,{autoCapitalize:"none",autoCorrect:!1,autoFocus:e,defaultValue:t,editable:a,label:i,maxLength:25,name:n,onBlur:s,onChange:o,ref:this._setInputRef,spellCheck:"false",style:ht.formTextInput}))}get value(){return this._inputRef&&this._inputRef.getValue()}get isValid(){const{optional:e}=this.props;return!this.value&&e||this.value&&!Object(ct.a)(this.value)&&this._inputRef&&this._inputRef.isValidLength()}}o()(dt,"defaultProps",{autoFocus:!1,editable:!0,optional:!1});const ht=v.a.create((e=>({root:{flexDirection:"row",flexShrink:1},action:{width:e.spaces.space40},addButton:{flexGrow:1,minHeight:"100%",padding:0},formTextInput:{flexGrow:1,flexShrink:1,marginVertical:0,paddingTop:0,paddingHorizontal:0,paddingBottom:e.spaces.space12}})));var ut=dt,mt=a("mtvn"),pt=a("6XNv");class gt extends l.a.PureComponent{render(){const{editable:e,label:t,last:a,max:i,min:n,onChange:s,testID:o,value:r}=this.props,c=!e||n===i,d=r.toString(),h=Object(mt.a)(n,i+1).map((e=>({label:`${T.a.ia24dc8c(e)}`,value:`${e}`})));return l.a.createElement(pt.a,{disabled:c,label:t,onChange:s,options:h,style:[_t.selector,!a&&_t.rightMargin],testID:o,value:d})}}o()(gt,"defaultProps",{last:!1});const _t=v.a.create((e=>({rightMargin:{marginRight:e.spaces.space20},selector:{flexGrow:1}})));var bt=gt,yt="addPollChoice",ft="selectPollDays",Ct="selectPollHours",vt="selectPollMinutes",wt="removePollButton";const Tt=T.a.caf8edc4,xt=T.a.g93586be,Et=T.a.d073b644,St=T.a.a2f0728e;class It extends l.a.Component{constructor(e,t){super(e,t),o()(this,"_handleDaysChange",(e=>{const{onChange:t}=this.props,a=parseInt(e,10);this.setState((e=>{const{hours:i,minutes:n}=e.duration,s=0===a&&0===i&&0===n?1:7===a?0:i,o={days:a,hours:s,minutes:7===a?0:0===a&&0===s&&n<5?5:n};return t&&t(o),{duration:o}}))})),o()(this,"_handleHoursChange",(e=>{const{onChange:t}=this.props,a=parseInt(e,10);this.setState((e=>{const{days:i,minutes:n}=e.duration,s={days:i,hours:a,minutes:0===i&&0===a&&n<5?5:n};return t&&t(s),{duration:s}}))})),o()(this,"_handleMinutesChange",(e=>{const{onChange:t}=this.props,a=parseInt(e,10);this.setState((e=>{const{days:i,hours:n}=e.duration,s={days:i,hours:n,minutes:a};return t&&t(s),{duration:s}}))})),this.state={duration:e.initialDuration}}render(){const{isActive:e,style:t}=this.props;return l.a.createElement(R.a,{style:t},l.a.createElement(f.b,{color:"normal",style:Rt.durationLabel},e?Tt:""),this._renderPicker())}_renderPicker(){const{editable:e,isActive:t}=this.props,{duration:{days:a,hours:i,minutes:n}}=this.state;return l.a.createElement(R.a,{style:Rt.durationControls},l.a.createElement(bt,{editable:e&&t,label:xt,max:7,min:0,onChange:this._handleDaysChange,testID:ft,value:a}),l.a.createElement(bt,{editable:e&&t,label:Et,max:7===a?0:23,min:0,onChange:this._handleHoursChange,testID:Ct,value:i}),l.a.createElement(bt,{editable:e&&t,label:St,last:!0,max:7===a?0:59,min:0===a&&0===i?5:0,onChange:this._handleMinutesChange,testID:vt,value:n}))}get duration(){return this.state.duration}}o()(It,"defaultProps",{editable:!0,initialDuration:{days:1,hours:0,minutes:0}});const Rt=v.a.create((e=>({durationControls:{flexDirection:"row",justifyContent:"space-between"},durationLabel:{marginBottom:e.spaces.space4}})));var At=It,Pt=a("iY63"),Mt=a("jtO7");const Ot=T.a.g589c2e1,Dt=T.a.a1e6c3a1,kt=T.a.a739e006,Nt=T.a.d89a5b92,Lt=T.a.c2a8118d,Ft=T.a.a8ede1de,Bt=T.a.af40a8ef;class Vt extends l.a.Component{constructor(e,t){super(e,t),o()(this,"_setChoice1Ref",(e=>{this._choice1=e})),o()(this,"_setChoice2Ref",(e=>{this._choice2=e})),o()(this,"_setChoice3Ref",(e=>{this._choice3=e})),o()(this,"_setChoice4Ref",(e=>{this._choice4=e})),o()(this,"_setDurationPickerRef",(e=>{this._durationPicker=e})),o()(this,"_handleValidation",(()=>{const{onChange:e,onInvalid:t,onValid:a}=this.props,i=this.choices,{_choice1:n,_choice2:s,_choice3:o,_choice4:r}=this,l=[n,s,o,r].filter(Boolean).every((e=>e.isValid));i&&i.length>=2&&l?a():t(),e&&e({choices:i,duration:this.duration})})),o()(this,"_handleAdd",(()=>{const{analytics:e}=this.props;e.scribe({element:"add_poll_option",action:"click"}),this.setState((({choiceCount:e})=>({autoFocus:!0,choiceCount:e+1})))})),o()(this,"_handleDurationChange",(e=>{const{onChange:t}=this.props;t&&t({choices:this.choices,duration:e})})),o()(this,"_handleBlur",(()=>{const{onBlur:e}=this.props;null==e||e()}));const{initialChoices:a}=e,i=void 0===a,n=(a||[]).length,s=n>2?n:2;this.state={autoFocus:i,choiceCount:s}}_renderChoices(){const{editable:e,initialChoices:t=[],isActive:a}=this.props,{autoFocus:i,choiceCount:n}=this.state,s=l.a.createElement(R.a,{style:jt.rightColumn},n<4?l.a.createElement(J.a,{accessibilityLabel:Ft,disabled:!(e&&a),hoverLabel:{label:Bt},icon:l.a.createElement(Pt.a,null),onPress:this._handleAdd,size:"medium",style:jt.addButton,testID:yt,type:"brandText"}):null);return l.a.createElement(R.a,{style:jt.choicesAndAddButton},l.a.createElement(R.a,{style:jt.choices},l.a.createElement(ut,{autoFocus:i,defaultValue:t[0],editable:e&&a,label:Ot,name:"Choice1",onBlur:this._handleBlur,onChange:this._handleValidation,ref:this._setChoice1Ref}),l.a.createElement(ut,{defaultValue:t[1],editable:e&&a,label:Dt,name:"Choice2",onBlur:this._handleBlur,onChange:this._handleValidation,ref:this._setChoice2Ref}),n>=3?l.a.createElement(ut,{autoFocus:i,defaultValue:t[2],editable:e&&a,label:kt,name:"Choice3",onBlur:this._handleBlur,onChange:this._handleValidation,optional:!0,ref:this._setChoice3Ref}):null,4===n?l.a.createElement(ut,{autoFocus:i,defaultValue:t[3],editable:e&&a,label:Nt,name:"Choice4",onBlur:this._handleBlur,onChange:this._handleValidation,optional:!0,ref:this._setChoice4Ref}):null),s)}render(){const{editable:e,initialDuration:t,isActive:a,onRemove:i}=this.props;return l.a.createElement(R.a,{style:jt.root},this._renderChoices(),l.a.createElement(At,{editable:e,initialDuration:t,isActive:a,onChange:this._handleDurationChange,ref:this._setDurationPickerRef,style:jt.durationPicker}),l.a.createElement(R.a,{style:jt.removePollButton},l.a.createElement(Mt.a,{color:"red500",label:Lt,onPress:i,testID:wt})))}get choices(){const{_choice1:e,_choice2:t,_choice3:a,_choice4:i}=this;return[e&&e.value,t&&t.value,a&&a.value,i&&i.value].filter(Boolean)}get duration(){return this._durationPicker?this._durationPicker.duration:void 0}}const jt=v.a.create((e=>({root:{backgroundColor:e.colors.transparent,borderColor:e.colors.nestedBorderColor,borderRadius:e.borderRadii.xLarge,borderStyle:"solid",borderWidth:e.borderWidths.small,flexDirection:"column",overflow:"hidden",paddingTop:e.spaces.space12},choicesAndAddButton:{paddingHorizontal:e.spaces.space12,flexDirection:"row"},choices:{flexGrow:1,flexShrink:1},removePollButton:{borderBottomLeftRadius:e.borderRadii.xLarge,borderBottomRightRadius:e.borderRadii.xLarge},rightColumn:{flexDirection:"column-reverse"},addButton:{marginBottom:e.spaces.space24,marginLeft:e.spaces.space4},durationPicker:{borderTopColor:e.colors.nestedBorderColor,borderTopWidth:e.borderWidths.small,borderBottomColor:e.colors.nestedBorderColor,borderBottomWidth:e.borderWidths.small,padding:e.spaces.space12}})));var zt=Object(Oe.a)(Vt);const Ht=v.a.create((e=>({container:{marginBottom:e.spaces.space4},link:{color:"black"}}))),Ut=T.a.i859676b,Wt=l.a.createElement(T.a.I18NFormatMessage,{$i18n:"a02c8d74"},l.a.createElement(f.b,{link:"/settings/audience_and_tagging",style:Ht.link,withInteractiveStyling:!0,withUnderline:!0},T.a.c9a48d3f));function Gt(){return l.a.createElement(R.a,{style:Ht.container},l.a.createElement(fe.a,{headline:Ut,text:Wt}))}var qt=a("b5s6"),$t=a("rcen"),Kt=a("zmS9"),Xt="addButton",Qt="addSubtitlesLabel",Yt="altTextLabel",Zt="tagPeopleLabel",Jt="attachments",ea="createPollButton",ta="geoButton",aa="gifSearchButton",ia="scheduleOption",na="taggedUsersLabel",sa="tweetTextarea_",oa="toolBar",ra="scheduledTweetIndicator",la=a("xM7j"),ca=a("6OUF"),da=a("tZIO"),ha=a("5mJL"),ua=a("DNho"),ma=a("jhWN"),pa=a("rFBM"),ga=a("zfvc"),_a=a("Ujvi"),ba=a("yTN1"),ya=a("gpVt"),fa=a("hOZg"),Ca=a("ll3R"),va=a("J0mu"),wa=a("EfHu"),Ta=a("KrGU"),xa=a("boUI"),Ea=a("6ZHn"),Sa=a("/WPq"),Ia=a("wpLu"),Ra=a("pHub"),Aa=a("8A5z"),Pa=a("pKoL"),Ma=a("ZvMt"),Oa=a("9Xij");class Da extends l.a.Component{render(){const{media:e,style:t}=this.props;return l.a.createElement(R.a,{style:t},this._renderImageGroup(e.length))}_renderImageGroup(e){switch(e){case 1:return this._renderGroupOf1();case 2:return this._renderGroupOf2();case 3:return this._renderGroupOf3();case 4:return this._renderGroupOf4();default:return null}}_renderGroupOf1(){const{media:e}=this.props,t=e&&!!e[0].mediaFile,{height:a,width:i}=e&&!t&&e[0].externalMediaDetails||{};let n=v.a.theme.aspectRatios.landscape;if(t){var s,o;const t=v.a.theme.aspectRatios.minTimelineImage,a=v.a.theme.aspectRatios.maxTimelineImage;n=Ma.a.getImageAspectRatio(t,a,{width:null===(s=e[0].mediaFile)||void 0===s?void 0:s.width,height:null===(o=e[0].mediaFile)||void 0===o?void 0:o.height})}return l.a.createElement(Oa.a,{ratio:t?n:i/a},l.a.createElement(R.a,{style:ka.mediaPreviewWrapper},this._renderMediaAtIndex(0)))}_renderGroupOf2(){return l.a.createElement(Oa.a,{ratio:v.a.theme.aspectRatios.landscape},l.a.createElement(R.a,{style:ka.mediaPreviewWrapper},this._renderMediaAtIndex(0,ka.gutterRight),this._renderMediaAtIndex(1)))}_renderGroupOf3(){return l.a.createElement(Oa.a,{ratio:v.a.theme.aspectRatios.landscape},l.a.createElement(R.a,{style:ka.mediaPreviewWrapper},this._renderMediaAtIndex(0,ka.gutterRight),this._renderColumnWithIndices([1,2])))}_renderGroupOf4(){return l.a.createElement(Oa.a,{ratio:v.a.theme.aspectRatios.landscape},l.a.createElement(R.a,{style:ka.mediaPreviewWrapper},this._renderColumnWithIndices([0,2],ka.gutterRight),this._renderColumnWithIndices([1,3])))}_renderColumnWithIndices(e,t){return l.a.createElement(R.a,{style:[ka.column,t]},this._renderMediaAtIndex(e[0],ka.gutterBottom),this._renderMediaAtIndex(e[1]))}_renderMediaAtIndex(e,t){var a,i,n,s;const{editable:o,isActive:r,media:c,onClickMedia:d,onEditMedia:h,onEditSensitiveWarning:u,onRemoveMedia:m,onSetMediaPreviewRef:p}=this.props,g=c[e],_=null===(a=g.mediaMetadata)||void 0===a?void 0:a.altText,b=null===(i=g.mediaMetadata)||void 0===i?void 0:i.defaultAltText,y=!(null===(n=g.mediaMetadata)||void 0===n||null===(s=n.sensitiveMediaWarning)||void 0===s||!s.size),f=h&&o&&r,C=f&&y&&!!u;return l.a.createElement(Pa.a,{accessibilityLabel:_||b,accessibilityRole:"group",enableGif:r,key:g.id,mediaItem:g,onClick:d?d(g.id):void 0,onEdit:h?h(g.id):void 0,onEditSensitiveWarning:u&&C?u(g.id):void 0,onRemove:m(g.id),ref:p,style:[ka.mediaContainer,t],withAltTextLabel:!!_,withCloseButton:o&&r,withEditButton:f,withEditSensitiveWarningButton:C})}}o()(Da,"contextType",Q.a);const ka=v.a.create((e=>({column:{flexDirection:"column",flexGrow:1,flexBasis:0},gutterRight:{marginRight:e.spaces.space12},gutterBottom:{marginBottom:e.spaces.space12},mediaContainer:{borderRadius:e.borderRadii.xLarge,transitionProperty:"width",transitionDuration:"0.1s",transitionTimingFunction:"ease-out",overflow:"hidden",flexGrow:1,flexBasis:0},mediaPreviewWrapper:{flexDirection:"row",height:"100%"}})));var Na=a("oQhu"),La=a("+d3d"),Fa=a("S1qy"),Ba=a.n(Fa),Va=a("cjAp"),ja=a.n(Va);const za=T.a.f0afcc0e,Ha=T.a.ha5e2e79,Ua=T.a.a3de3b68,Wa=T.a.cc2b28fc,Ga=T.a.g45af04e,qa=T.a.ee9c4013,$a=T.a.af40a8ef,Ka=T.a.e68b09b4,Xa=T.a.ec10ee02,Qa=T.a.h735a98d,Ya=T.a.c4ccfbe2,Za=T.a.j499fbcb,Ja=T.a.b7d8e3f0,ei=T.a.d1175c78,ti=T.a.bf4e9d79,ai=T.a.e0342f98,ii=T.a.e349147b,ni=T.a.e3a24e4b,si=T.a.de4669e2,oi=T.a.d2c7a41c,ri=T.a.f7364fa1,li=["ja","zh-cn","zh-tw","ko"],ci=T.a.ia24dc8c,di=l.a.createElement(fa.a,null),hi=l.a.createElement(Pt.a,null),ui=l.a.createElement(Ca.a,null),mi=l.a.createElement(va.a,null),pi={viewType:"schedule_tweet"},gi={viewType:"add_poll"},_i={viewType:"add_composer"},bi={viewType:"tag_location"};class yi extends l.a.Component{constructor(e,t){super(e,t),o()(this,"_handleConversationControlsValueChange",(e=>{this._handleAudienceControlsValueChange({_type:"conversation_controls",conversationControlsValue:e})})),o()(this,"_handleAudienceControlsValueChange",(e=>{this.props.updateAudienceControlsValue(e)})),o()(this,"_triggerConversationControlsImpression",Object(Na.a)((()=>this.context.featureSwitches.isTrue("conversation_controls_limited_replies_creation_enabled")))),o()(this,"_shouldRenderControls",((e,t)=>{const{isFocused:a}=this.state,{audienceControlsValue:i,isActive:n,isInline:s,isReply:o}=this.props;if("conversation"===t&&(i.conversationControlsValue===xe.a.community_members||i.conversationControlsValue===xe.a.super_followers_exclusive)&&o)return!0;return n&&!o&&(!s||(a||e))})),o()(this,"_renderConversationControls",(e=>{const{isFocused:t}=this.state,{audienceControlsValue:a,isInline:i,isReply:n}=this.props;if(n||!t&&i||this._triggerConversationControlsImpression(),!this._conversationControlsCreationEnabled)return null;const s=a.conversationControlsValue,o=this._shouldRenderControls(e,"conversation"),r=s===xe.a.community_members||s===xe.a.super_followers_exclusive||this._isScheduled();return o?l.a.createElement(Ue,{disabled:r,onChange:this._handleConversationControlsValueChange,value:s}):null})),o()(this,"_renderTaggedLocation",(e=>l.a.createElement(R.a,{style:at.taggedLocationContainer},l.a.createElement(J.a,{icon:l.a.createElement(wa.a,null),onPress:this._handleGeoButtonClick,size:"xSmall",style:at.taggedLocationButton,type:"brandText"},e.place.full_name)))),o()(this,"_renderMainContent",(()=>{const{additionalToolbarContent:e,data:t,index:a,isExpanded:i,isInline:n,isInlineReply:s,onTypeaheadStateChange:o,richTextInputContext:r}=this.props,{cardUrl:c,media:d,pollActive:h,quotedStatus:u,text:m}=t,p=Object(ya.b)(m)||c&&!Object(Qe.a)(c)&&[c],g=!!d.length||h||!!u,_=this.props.typeaheadWrapper,b=!this._isEmpty();return l.a.createElement(R.a,{style:at.textInputArea},l.a.createElement(R.a,{style:i?at.inputStyle:at.collapsedInputStyle},this._renderAudienceControls(b),l.a.createElement(_,{contextText:m,isInline:n,isInlineReply:s,onTextUpdated:r?this._handleRichTextChange:this._handlePlainTextChange,onTypeaheadStateChange:o},this._renderFieldTextInput),p&&!g?l.a.createElement(ya.a,{index:a,isCardPreviewTombstoned:Object(Qe.a)(c),urls:p}):null),i?null:e)})),o()(this,"_renderFieldTextInput",(e=>{const{autoFocus:t,data:a,editable:i,index:s,isActive:o,isExpanded:r,isInline:c,isInlineReply:d,isLast:h,keyCommandHandlers:u,onTextInputBlur:m,positionCursorAtBeginning:p,richTextInputContext:g}=this.props,{isFocused:_}=this.state,{text:b}=a,y=0===s&&h,f=!!g,{dismissComposerCommandName:C,element:v,sendTweetCommandName:w}=g||{},T=d&&!g&&!r,x=g?{onChange:this._getHandleRichTextChange(e),richTextInputContext:{dismissComposerCommandName:C,editorState:this.state.editorState,element:v,sendTweetCommandName:w}}:{onChange:this._getHandlePlainTextChange(e)};return l.a.createElement(ca.a,n()({appTextSize:"headline1",ariaLabel:Ua,autoFocus:t||o&&!c,closeButton:o&&(this._deleteNonemptyTweetstormComposerEnabled||this._isEmpty())&&!y?this._renderCloseButton():void 0,contentBelow:this._renderTweetAttachment(),editable:i,inputStyle:[at.textInputStyle,T&&at.textInputMobileCollapsed],keyCommandHandlers:u,maxNumberOfLines:f?30:10,multiline:!0,numberOfLines:this._calcNumberOfLines(),onBlur:m,onFilesAdded:this._handleFilesAdded,placeholder:this._getPlaceHolderText(),positionCursorAtBeginning:p,positionCursorAtEnd:!p,ref:this._setTextInputRef,styleType:"selection",testID:`${sa}${s}`,useCacheForDOMMeasurements:_,value:b},x))})),o()(this,"_getHandleRichTextChange",Object(Na.a)((e=>t=>{e(t),this._handleRichTextChange(t)}))),o()(this,"_getHandlePlainTextChange",Object(Na.a)((e=>t=>{e(t),this._handlePlainTextChange(t)}))),o()(this,"_renderCommunityTweetFromProtectedUserCallout",(()=>{const{index:e,isCommunityTweetFromProtectedUser:t}=this.props;return 0===e&&t?l.a.createElement(Gt,null):null})),o()(this,"_renderAudienceControls",(e=>{const{audienceControlsValue:t,index:a,isSuperFollowsCreator:i}=this.props,n=this.context.featureSwitches.isTrue("c9s_participation_enabled"),s=this.context.featureSwitches.isTrue("super_follow_exclusive_tweet_creation_api_enabled");return this._shouldRenderControls(e,"audience")&&0===a&&(n||s)?l.a.createElement(oe,{audienceControlsValue:t,isC9sParticipationEnabled:n,isSuperFollowsCreator:i&&s,onAudienceControlsValueChange:this._handleAudienceControlsValueChange}):null})),o()(this,"_renderCommunitiesRulesEducation",(()=>this.shouldRenderCommunitiesRules?l.a.createElement(Te,null):null)),o()(this,"_renderCommunitiesRules",(e=>{const{audienceControlsValue:t}=this.props,a=t.communityIdValue||void 0;return this.shouldRenderCommunitiesRules&&a?l.a.createElement(_e,{selectedCommunityId:a,showMiddot:!e}):null})),o()(this,"_calcNumberOfLines",(()=>{const{data:e,isActive:t,isInline:a,richTextInputContext:i}=this.props,n=!!i,{media:s,pollActive:o,quotedStatus:r}=e,l=!!s.length||!!o||!!r;return n&&(a||l)||!t?1:4})),o()(this,"_renderScheduledTweetLegend",(()=>{const{scheduledFor:e}=this.props;return l.a.createElement(Kt.a,{onPress:this._handlePressScheduledTweetLegend,scheduledFor:e,testID:ra})})),o()(this,"_handlePressScheduledTweetLegend",(()=>{const{analytics:e,history:t,setActiveParentKey:a}=this.props;t.push("/compose/tweet/schedule"),e.scribe({element:"tweet_legend",action:"click"}),a()})),o()(this,"_renderEmojiPicker",(()=>l.a.createElement(Ge.a,{onEmojiSelect:this._handleInsertEmoji,size:"medium",style:this._getEmojiPickerButtonStyles(),textInputRef:this._textInputRef||void 0}))),o()(this,"_getEmojiPickerButtonStyles",Object(Na.a)((()=>[at.iconEmojiPicker,at.toolBarButton]))),o()(this,"_isSchedulingDisabled",(()=>{const{audienceControlsValue:e,data:{media:t,mediaTags:a,pollActive:i,quotedStatus:n,text:s},index:o,isLast:r}=this.props,l=0===o&&r,c=e.conversationControlsValue!==xe.a.all;return Boolean(i||!l||n&&""===s&&!t.length||c||a.length>0)})),o()(this,"_renderSchedulingButton",(()=>l.a.createElement(J.a,{accessibilityLabel:Ha,behavioralEventContext:pi,disabled:this._isSchedulingDisabled(),hoverLabel:{label:Qa},icon:mi,onClick:this._handleClickScheduler,size:"medium",style:at.toolBarButton,testID:ia,type:"brandText"}))),o()(this,"_handleClickScheduler",(()=>{const{analytics:e,history:t,setActiveParentKey:a}=this.props;t.push("/compose/tweet/schedule"),e.scribe({element:"schedule_tweet",action:"click"}),a()})),o()(this,"_renderCloseButton",(()=>{const{onRemoveComposer:e}=this.props;return l.a.createElement(J.a,{accessibilityLabel:qa,hoverLabel:{label:Ka},icon:di,onPress:e,size:"xSmall",type:"brandText"})})),o()(this,"_renderTweetAttachment",(()=>{const{data:e,editable:t,isActive:a}=this.props,{media:i,pollActive:n,pollChoices:s,pollDuration:o,quotedStatus:r}=e;if(0===i.length&&!n&&!r)return null;const c=this.hasAttachedVideo&&(this._videoTrimmerEnabled?"trimmer":"subtitles");return l.a.createElement(R.a,{onClick:this._handleFocus,style:[at.attachmentContainer,at.tweetAttachmentArea],testID:Jt},i.length>0?l.a.createElement(Da,{editable:t,isActive:a,media:i,onClickMedia:this.hasAttachedImage?this._handleClickMediaDetail("crop"):void 0,onEditMedia:this.hasAttachedImage?this._handleClickMediaDetail("crop"):c?this._handleClickMediaDetail(c):void 0,onEditSensitiveWarning:this.hasAttachedImage||this.hasAttachedVideo?this._handleClickMediaDetail("sensitive_media"):void 0,onRemoveMedia:this._handleMediaRemoveFactory,onSetMediaPreviewRef:this._handleSetMediaPreviewRef,style:at.mediaPreview}):null,a?this._renderMediaActions():null,n?l.a.createElement(zt,{editable:t,initialChoices:s,initialDuration:o,isActive:a,onBlur:this._handlePollChoiceBlur,onChange:this._handlePollChange,onInvalid:this._handlePollInvalid,onRemove:this._handlePollRemove,onValid:this._handlePollValid,ref:this._setPollCreatorRef}):null,r?this._renderQuoteTweet(r):null)})),o()(this,"_renderQuoteTweet",(e=>{const{data:{media:t}}=this.props,a=e.tombstoneInfo;return a&&a.richText?l.a.createElement(la.a,null,l.a.createElement($t.a,{entities:a.richText.entities,rtl:a.richText.rtl,text:a.richText.text})):l.a.createElement(qt.a,{isCondensed:t.length>0,style:at.quoteTweet,tweetId:e.id_str,withLink:!1,withUserHoverCard:!1})})),o()(this,"_renderToolbar",(e=>{const{additionalToolbarContent:t,data:{media:a},hidePoll:i,hideScheduling:n,isInlineReply:s,isReply:o,isSelfThreadReply:r,richTextInputContext:c,setActiveParentKey:d}=this.props,h=!!c,u=!s&&!i,m=!s&&!n,p=this.context.featureSwitches.isTrue("responsive_web_video_picker");return l.a.createElement(R.a,{style:at.toolBar,testID:oa},l.a.createElement(R.a,{style:at.toolBarIconsContainer},l.a.createElement(rt,{media:a,mediaAttachDisabled:this.mediaAttachDisabled,onFilesAdded:this._handleFilesAdded,setActiveParentKey:d,videoPickerEnabled:p}),this._renderGifButton(),u?this._renderPollButton():null,h?this._renderEmojiPicker():null,m?this._renderSchedulingButton():null,this._renderGeoButton()),l.a.createElement(R.a,{style:at.toolBarIconsContainer},e?this._renderCountdownCircle():null,o&&!r||!e?null:l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{style:at.separator}),this._renderAddComposerButton()),t))})),o()(this,"_addOverflowStyle",(e=>{const{richTextInputContext:t}=this.props;if(!t)return;const a=e.getCurrentContent().getPlainText(),i=a.length,n=this._getParsedTweet(a).validRangeEnd,s=n+1<i;if(this.state.hasOverflowStyle||s){const a=s?n+1:-1;return{editorState:t.updateOverflowStyle&&t.updateOverflowStyle(e,a,this.state.hasOverflowStyle),hasOverflowStyle:s}}return{editorState:e,hasOverflowStyle:s}})),o()(this,"_handleRichTextChange",(e=>{const{richTextInputContext:t}=this.props,a=e.getCurrentContent().getPlainText();if(t){const a=t.convertEmojiToEntities(e);this.setState(this._addOverflowStyle(a))}this._handleTextValueChange(a)})),o()(this,"_handlePlainTextChange",(e=>{const t=da.a.replaceCarriageReturns(e.target.value);this._handleTextValueChange(t)})),o()(this,"_handleTextValueChange",(e=>{const{data:{key:t,text:a},onTextChange:i}=this.props;a!==e&&i(e,t)})),o()(this,"_handleClickAltTextShortcut",(()=>{const{analytics:e}=this.props;e.scribe({element:"alt_text_button",action:"click"})})),o()(this,"_handleClickSubtitlesShortcut",(()=>{const{analytics:e}=this.props;e.scribe({element:"subtitles_button",action:"click"})})),o()(this,"_handleClickMediaDetail",(e=>t=>()=>{const{analytics:a,history:i}=this.props;a.scribe({element:"media_detail_button",action:"click"}),(this.hasAttachedImage||this.hasAttachedVideo)&&i.push("/compose/tweet/media",{mediaId:t,tab:e})})),o()(this,"_handleFilesAdded",(e=>{const{addToast:t,data:{pollActive:a},onFilesAdded:i}=this.props;a?t({text:Wa}):i(e)})),o()(this,"_handleMediaRemoveFactory",(e=>()=>{this.props.onRemoveMedia(this.props.index,e)})),o()(this,"_handleInsertEmoji",(e=>{const{editorState:t}=this.state,{richTextInputContext:a}=this.props;if(!a||!t)return;const i=a.insertTextAtCursor(t,e.text);this._handleRichTextChange(i)})),o()(this,"_validateMedia",(e=>{const{data:{media:t}}=this.props;return u.c(t.concat(e))})),o()(this,"_handlePollAdd",(()=>{const{analytics:e,index:t,updateSingleComposer:a}=this.props;e.scribe({element:"add_poll",action:"click"}),a({pollActive:!0},t)})),o()(this,"_handlePollRemove",(()=>{const{analytics:e,index:t,updateSingleComposer:a}=this.props;e.scribe({element:"remove_poll",action:"click"}),a({pollActive:!1},t)})),o()(this,"_handlePollInvalid",(()=>{const{data:{pollValid:e},index:t,updateSingleComposer:a}=this.props;e&&a({pollValid:!1},t)})),o()(this,"_handlePollValid",(()=>{const{data:{pollValid:e},index:t,updateSingleComposer:a}=this.props;!e&&a({pollValid:!0},t)})),o()(this,"_updatePoll",(({choices:e,duration:t})=>{const{index:a,updateSingleComposer:i}=this.props;i({pollChoices:e,pollDuration:t},a)})),o()(this,"_handlePollChange",Object(La.a)(this._updatePoll,200,{leading:!0,trailing:!0})),o()(this,"_handlePollChoiceBlur",(()=>{this._handlePollChange.flush()})),o()(this,"_handleGeoButtonClick",(()=>{const{analytics:e,history:t,setActiveParentKey:a}=this.props;t.push("/compose/tweet/place_picker"),e.scribe({element:"tag_location",action:"click"}),a()})),o()(this,"_handleWrapperClick",(e=>{e.target instanceof Element&&e.target.closest('[role="button"],a,input,textarea,select')||this.focus()})),o()(this,"_handleFocus",(()=>{const{index:e,isActive:t,onFocus:a,setActiveParentKey:i}=this.props;i(),t||(window.requestAnimationFrame((()=>{this._mediaPreviewRef&&this._mediaPreviewRef.playVideo()})),a(e))})),o()(this,"_handleEditorFocus",(()=>this.setState({isFocused:!0}))),o()(this,"_formatCountdownNumber",(e=>ci(Math.ceil(e/this._userLanguageWeight)))),o()(this,"_getPlaceHolderText",(()=>{const{data:{pollActive:e,quotedStatus:t},index:a,isReply:i,isSelfThreadReply:n}=this.props;return t?si:e?ri:i&&!n?oi:n||a>0?ni:ii})),o()(this,"_getNumberOfAltTextEntries",(()=>{const{data:{media:e}}=this.props;return e.reduce(((e,t)=>{var a;return null!==(a=t.mediaMetadata)&&void 0!==a&&a.altText?e+1:e}),0)})),o()(this,"_getParsedTweet",Object(Na.a)((e=>{const t=ja.a[this.props.twitterTextConfigurationVersion];return Ba()(e,t)}))),o()(this,"_isEmpty",(()=>{const{data:e}=this.props;return Object(Ye.c)(e)})),o()(this,"_isScheduled",(()=>{const{data:{scheduledFor:e}}=this.props;return Object(Ze.h)(e)})),o()(this,"_autotagLocationIfNeeded",(()=>{const{data:{taggedLocation:e},fetchAutotaggedLocationIfNeeded:t,index:a,updateSingleComposer:i}=this.props;t().then((t=>{void 0===e&&i({taggedLocation:null!=t?t:null},a)}))})),o()(this,"_setPollCreatorRef",(e=>{this._pollCreatorRef=e})),o()(this,"_handleSetMediaPreviewRef",(e=>{this._mediaPreviewRef=e})),o()(this,"_setTextInputRef",(e=>{this._textInputRef=e}));const{data:{text:a},richTextInputContext:i,userLanguage:s}=e,{initEditorState:r}=i||{};this._conversationControlsCreationEnabled=!0===this.context.featureSwitches.getValueWithoutScribeImpression("conversation_controls_limited_replies_creation_enabled"),this._deleteNonemptyTweetstormComposerEnabled=this.context.featureSwitches.isTrue("responsive_web_delete_nonempty_tweetstorm_composer_enabled"),this._userLanguageWeight=s&&li.indexOf(s)>-1?2:1,this._autotagLocationIfNeeded(),this.state={editorState:r?r(a):null,hasOverflowStyle:!1,isFocused:!1}}componentDidUpdate(e){(this.hasExternalMedia||this.props.data.media.some((e=>e.mediaFile&&!(e.mediaFile instanceof Xe.a)&&e.mediaFile.isVideo)))&&e.isActive&&!this.props.isActive&&this._mediaPreviewRef&&this._mediaPreviewRef.pauseVideo()}focus(){this._textInputRef&&this._textInputRef.focus()}render(){const{data:{taggedLocation:e},isActive:t,isExpanded:a,isInline:i,isLast:n,loggedInUser:s,windowWidth:o,withAvatar:r}=this.props,c=!this._isEmpty(),d=this._shouldRenderControls(c),h=o<v.a.theme.breakpoints.small;return l.a.createElement(R.a,{onClick:this._handleWrapperClick,onFocus:this._handleFocus,style:[at.root,!t&&at.blurStyle]},this._renderCommunityTweetFromProtectedUserCallout(),l.a.createElement(ha.a,{avatarCell:l.a.createElement(l.a.Fragment,null,r?l.a.createElement(ua.a.Consumer,null,(({avatarSize:e})=>l.a.createElement(ma.a,{accessibilityLabel:s?s.name:void 0,screenName:s?s.screen_name:void 0,size:e,style:at.avatar,uri:s?s.profile_image_url_https:void 0,withLink:i}))):null,n?null:l.a.createElement(R.a,{style:[at.conversationLine,!r&&at.conversationLineWithOverflow]})),avatarCellStyle:a?at.avatarContainerExpanded:at.avatarContainer,cellStyle:at.rightColumn},this._renderScheduledTweetLegend(),l.a.createElement(R.a,{onFocus:this._handleEditorFocus,style:at.inputArea},l.a.createElement(pa.a,{allowDragDrop:!this.mediaAttachDisabled,onDragEnter:this._handleFocus,onFilesAdded:this._handleFilesAdded,style:at.dragDrop},(e=>l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{style:at.composeBoxContainer},this._renderMainContent()))))),this._renderCommunitiesRulesEducation(),l.a.createElement(R.a,{style:[(d||e)&&at.controlsContainer,h?at.mobileControlsLayout:at.controlsLayout]},this._renderConversationControls(c),this._renderCommunitiesRules(h),e?this._renderTaggedLocation(e):null),l.a.createElement(ga.b,{show:t&&a},this._renderToolbar(c))))}_renderGifButton(){const{data:{media:e,pollActive:t},history:a,loggedInUser:i,setActiveParentKey:n}=this.props,s=t||e.length||!i;return l.a.createElement($e.a,{enabled:!s,gifSearchKeySource:Ke.a.Composition,history:a,onPress:n,testID:aa})}_renderPollButton(){const{data:{media:e,pollActive:t,quotedStatus:a},loggedInUser:i}=this.props,n=this._isScheduled(),s=!(!(t||e.length||a||n)&&i);return l.a.createElement(J.a,{accessibilityLabel:za,behavioralEventContext:gi,disabled:s,hoverLabel:{label:Xa},icon:ui,onPress:this._handlePollAdd,size:"medium",style:at.toolBarButton,testID:ea,type:"brandText"})}_renderGeoButton(){const{data:{taggedLocation:e},geoEnabled:t,loggedInUser:a}=this.props,i=!(t&&a),n=e?l.a.createElement(wa.a,null):l.a.createElement(Ta.a,null);return l.a.createElement(J.a,{accessibilityLabel:Ya,behavioralEventContext:bi,disabled:i,hoverLabel:{label:Ya},icon:n,onPress:this._handleGeoButtonClick,size:"medium",style:at.toolBarButton,testID:ta,type:"brandText"})}_renderMediaActions(){const{data:{gifMetadata:e,media:t,mediaTags:a}}=this.props,i=0!==a.length,n=t.some((e=>e.mediaFile&&e.mediaFile.isGif))||this.hasExternalMedia;if(!(this.hasAttachedImage||this.hasAttachedVideo||e||n))return null;const s=this.context.featureSwitches.isTrue("rweb_video_tagging_enabled");return l.a.createElement(R.a,{style:at.imageActions},e&&e.url&&e.provider?l.a.createElement(R.a,{style:at.addImageTextPadding},l.a.createElement(qe.a,{gifUrl:e.url,provider:e.provider})):null,!this.hasAttachedImage&&!s||this._isScheduled()?null:l.a.createElement(f.b,{accessibilityLabel:ei,color:"gray700",link:"/compose/tweet/tags",style:[at.addImageTextContainer,at.addImageTextPadding]},i?this._renderTaggedUsers():this._renderTagPeopleLabel()),this.hasAttachedImage||n?l.a.createElement(f.b,{accessibilityLabel:Za({numberOfImages:t.length}),color:"gray700",link:{pathname:"/compose/tweet/media",state:{mediaId:t[0].id,tab:"alt_text"}},onPress:this._handleClickAltTextShortcut,style:at.addImageTextContainer},this._renderAltTextLabel()):null,this.hasAttachedVideo?this._renderSubtitlesLabel():null)}_renderTagPeopleLabel(){return l.a.createElement(f.b,{color:"gray700",size:"subtext2",testID:Zt},l.a.createElement(xa.a,{style:at.addImageActionIcon}),ei)}_renderTaggedUsers(){const{data:{mediaTags:e},loggedInUser:t}=this.props,a=e.map((e=>({name:e.data.name,screen_name:e.data.screen_name,type:e.type,user_id:e.data.id_str})));return l.a.createElement(f.b,{color:"gray700",size:"subtext2",testID:na},l.a.createElement(Ea.a,{style:at.addImageActionIcon}),l.a.createElement(_a.a,{loggedInUserId:null==t?void 0:t.id_str,users:a}))}_renderAltTextLabel(){const{data:{media:e}}=this.props,t=e[0].mediaMetadata;return this.hasAttachedAltText?e.length>1?l.a.createElement(f.b,{color:"gray700",size:"subtext2",testID:Yt},l.a.createElement(Ia.a,{style:at.addImageActionIcon}),Ja({numberOfAltTextEntries:this._getNumberOfAltTextEntries()})):l.a.createElement(f.b,{color:"gray700",numberOfLines:1,size:"subtext2",testID:Yt},l.a.createElement(Ia.a,{style:at.addImageActionIcon}),null==t?void 0:t.altText):l.a.createElement(f.b,{color:"gray700",size:"subtext2",testID:Yt},l.a.createElement(Sa.a,{style:at.addImageActionIcon}),Za({numberOfImages:e.length}))}_renderSubtitlesLabel(){const{data:{media:e}}=this.props,t=this.attachedSubtitles?Ra.a:Aa.a;return l.a.createElement(f.b,{accessibilityRole:"button",color:"gray700",link:{pathname:"/compose/tweet/media",state:{mediaId:e[0].id,tab:"subtitles"}},onPress:this._handleClickSubtitlesShortcut,size:"subtext2",style:at.addImageTextContainer,testID:Qt},l.a.createElement(t,{accessibilityLabel:this.attachedSubtitles?ai:void 0,style:at.addImageActionIcon}),this.attachedSubtitles?this.attachedSubtitles.displayName:ti)}_renderCountdownCircle(){const{data:{text:e},twitterTextConfigurationVersion:t}=this.props,a=ja.a[t],i=this._getParsedTweet(e).weightedLength;return l.a.createElement(ba.a,{count:i,formatNumber:this._formatCountdownNumber,maxCount:a.maxWeightedTweetLength,warningCount:260})}_renderAddComposerButton(){const{disableAddTweet:e,isCommunityTweetFromProtectedUser:t,isInline:a,loggedInUser:i,onAddComposer:n}=this.props,s=this._isEmpty(),o=this._isScheduled(),r=e||s||o||!i||t;return l.a.createElement(J.a,{accessibilityLabel:Ga,behavioralEventContext:_i,disabled:r,hoverLabel:{label:$a},icon:hi,link:!a||s||r?void 0:"/compose/tweet",onPress:n,size:"xSmall",testID:Xt,type:"brandOutlined"})}get pollChoices(){const{data:{pollActive:e}}=this.props;return e&&this._pollCreatorRef?this._pollCreatorRef.choices:void 0}get pollDuration(){const{data:{pollActive:e}}=this.props;return e&&this._pollCreatorRef?this._pollCreatorRef.duration:void 0}get mediaAttachDisabled(){const{data:{media:e,pollActive:t},loggedInUser:a}=this.props,i=e.length,n=e.some((e=>{var t;return null===(t=e.mediaFile)||void 0===t?void 0:t.isGif})),s=e.some((e=>e.mediaFile&&!(e.mediaFile instanceof Xe.a)&&e.mediaFile.isVideo));return 4===i||n||s||t||this.hasExternalMedia||!a}get hasAttachedImage(){const{data:{media:e}}=this.props;return e.some((e=>{var t;return null===(t=e.mediaFile)||void 0===t?void 0:t.isImage}))}get hasAttachedVideo(){const{data:{media:e}}=this.props,t=e.some((e=>{var t;return null===(t=e.mediaFile)||void 0===t?void 0:t.isVideo}));return t&&(this._videoTrimmerEnabled=this.context.featureSwitches.isTrue("responsive_web_video_trimmer_enabled")),t}get attachedSubtitles(){var e;const{data:{media:t}}=this.props;if(!this.hasAttachedVideo)return;const a=t.find((e=>e.mediaFile&&!(e.mediaFile instanceof Xe.a)&&e.mediaFile.isVideo));return null==a||null===(e=a.mediaMetadata)||void 0===e?void 0:e.subtitles}get hasAttachedAltText(){return this._getNumberOfAltTextEntries()>0}get hasExternalMedia(){const{data:{media:e}}=this.props;return e.some((e=>!!e.externalMediaDetails))}get shouldRenderCommunitiesRules(){const{audienceControlsValue:e}=this.props,t=this.context.featureSwitches.isTrue("c9s_enabled"),a=e.communityIdValue||void 0,i=t&&a,n=this._shouldRenderControls(!1,"conversation");return Boolean(n&&i)}}o()(yi,"contextType",Q.a),o()(yi,"defaultProps",{twitterTextConfigurationVersion:"defaults",withAvatar:!0});var fi=Object(Oe.a)(yi);const Ci=l.a.createElement(f.b,{weight:"bold"}),vi=l.a.createElement(f.b,{color:"link"}),wi=e=>`@${e}`;var Ti=a("SrIh");const xi=e=>(null==e?void 0:e.screen_name)||"",Ei=({communityName:e,excludedRecipients:t,inReplyToStatus:a,loggedInUserId:i})=>{const n={replyToOne:({userName:e})=>l.a.createElement(T.a.I18NFormatMessage,{$i18n:"e34022a7"},l.a.cloneElement(vi,null,T.a.b50e199a({userName:wi(e)}))),replyToTwo:({userOneName:e,userTwoName:t})=>l.a.createElement(T.a.I18NFormatMessage,{$i18n:"bfd9c99a"},l.a.cloneElement(vi,null,T.a.f2e4dd37({replyUserName:wi(e),otherUserName:wi(t)}))),replyToThree:({userOneName:e,userThreeName:t,userTwoName:a})=>l.a.createElement(T.a.I18NFormatMessage,{$i18n:"g7a1000e"},l.a.cloneElement(vi,null,T.a.eccfddc3({userOneName:wi(e),userTwoName:wi(a),userThreeName:wi(t)}))),replyToMany:({othersCount:e,userOneName:t,userTwoName:a})=>l.a.createElement(T.a.I18NFormatMessage,{$i18n:"i558c201"},l.a.cloneElement(vi,null,T.a.h758cd22({userOneName:wi(t),userTwoName:wi(a),othersCount:e}))),communityReplyToOne:({communityName:e,userName:t})=>l.a.createElement(T.a.I18NFormatMessage,{$i18n:"j935bcde",communityName:e},l.a.cloneElement(vi,null,T.a.e9f8a0eb({userName:wi(t)}))),communityReplyToTwo:({communityName:e,userOneName:t,userTwoName:a})=>l.a.createElement(T.a.I18NFormatMessage,{$i18n:"i7bd9c8e",communityName:e},l.a.cloneElement(vi,null,T.a.df7e9fbc({replyUserName:wi(t),otherUserName:wi(a)}))),communityReplyToThree:({communityName:e,userOneName:t,userThreeName:a,userTwoName:i})=>l.a.createElement(T.a.I18NFormatMessage,{$i18n:"cfa0049d",communityName:e},l.a.cloneElement(vi,null,T.a.b45fa505({userOneName:wi(t),userTwoName:wi(i),userThreeName:wi(a)}))),communityReplyToMany:({communityName:e,othersCount:t,userOneName:a,userTwoName:i})=>l.a.createElement(T.a.I18NFormatMessage,{$i18n:"jfc8e4b4",communityName:e},l.a.cloneElement(vi,null,T.a.a4383815({userOneName:wi(a),userTwoName:wi(i),othersCount:t}))),exclusiveReplyToOne:({userName:e})=>l.a.createElement(T.a.I18NFormatMessage,{$i18n:"a4e11010"},l.a.cloneElement(vi,null,T.a.ff792e35({userName:wi(e)})),l.a.cloneElement(Ci,null,T.a.a18d8f1c)),exclusiveReplyToTwo:({userOneName:e,userTwoName:t})=>l.a.createElement(T.a.I18NFormatMessage,{$i18n:"cf1b3321"},l.a.cloneElement(vi,null,T.a.g7d5e985({replyUserName:wi(e),otherUserName:wi(t)})),l.a.cloneElement(Ci,null,T.a.af82725c)),exclusiveReplyToThree:({userOneName:e,userThreeName:t,userTwoName:a})=>l.a.createElement(T.a.I18NFormatMessage,{$i18n:"c83d647e"},l.a.cloneElement(vi,null,T.a.fe5a61e9({userOneName:wi(e),userTwoName:wi(a),userThreeName:wi(t)})),l.a.cloneElement(Ci,null,T.a.f7126257)),exclusiveReplyToMany:({othersCount:e,userOneName:t,userTwoName:a})=>l.a.createElement(T.a.I18NFormatMessage,{$i18n:"fec57cab"},l.a.cloneElement(vi,null,T.a.bc9dd514({userOneName:wi(t),userTwoName:wi(a),othersCount:e})),l.a.cloneElement(Ci,null,T.a.de5071ba))},s=u.a({inReplyToStatus:a,loggedInUserId:i}).filter((({id_str:e})=>t.indexOf(e)<0)),{exclusivity_info:o,user:r}=a.retweeted_status||a,[c,d]=s.filter((({id_str:e})=>e!==r.id_str)),[h,m,p]=[r,c,d].map(xi),g=s.length-2;switch(s.length){case 0:return Object(Ti.a)("Compose reply context should not have 0 recipients"),null;case 1:return e?n.communityReplyToOne({communityName:e,userName:h}):o?n.exclusiveReplyToOne({userName:h}):n.replyToOne({userName:h});case 2:return e?n.communityReplyToTwo({communityName:e,userOneName:h,userTwoName:m}):o?n.exclusiveReplyToTwo({userOneName:h,userTwoName:m}):n.replyToTwo({userOneName:h,userTwoName:m});case 3:return e?n.communityReplyToThree({communityName:e,userOneName:h,userTwoName:m,userThreeName:p}):o?n.exclusiveReplyToThree({userOneName:h,userTwoName:m,userThreeName:p}):n.replyToThree({userOneName:h,userTwoName:m,userThreeName:p});default:return e?n.communityReplyToMany({communityName:e,userOneName:h,userTwoName:m,othersCount:g}):o?n.exclusiveReplyToMany({userOneName:h,userTwoName:m,othersCount:g}):n.replyToMany({userOneName:h,userTwoName:m,othersCount:g})}};var Si=l.a.memo(Ei),Ii=a("fs1G"),Ri=a("BLtI"),Ai=a("kY28");function Pi(e){null==e||e.preventDefault()}const Mi=v.a.create((e=>({replyUsersContainer:{flexDirection:"row",minHeight:e.spaces.space12,paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:0},grid:{flexGrow:1,flexShrink:1},repliesTextContainer:{flexGrow:1},repliesMessage:{flexGrow:1,paddingBottom:e.spaces.space16,paddingTop:e.spaces.space4},conversationLineContainer:{alignItems:"center"},conversationLine:{backgroundColor:e.colors.gray200,flexGrow:1,minHeight:0,width:e.componentDimensions.conversationLineWidth,marginBottom:e.spaces.space4}})));var Oi=({communityName:e,excludedRecipients:t,inReplyToStatus:a,loggedInUserId:i,onPress:n,shouldDisplayRepliesText:s,showParentTweet:o=!0})=>l.a.createElement(R.a,null,o?l.a.createElement(Ri.b,{conversationPosition:{isStart:!0},linkableQuotedTweet:!1,linkify:!1,onAnalyticsClick:Ii.a,onAvatarClick:Pi,onEntityClick:Pi,onMediaClick:Pi,onReplyContextClick:Pi,replyContext:Ai.a.ReplyContextTypes.None,tweet:a,withAvatarLink:!1,withCardLinks:!0,withInlineMedia:!1,withQuotedTweetLinks:!0,withSocialContext:!1,withTimestampLink:!1,withUserHoverCard:!1}):null,l.a.createElement(R.a,{style:Mi.replyUsersContainer},l.a.createElement(ha.a,{avatarCell:o?l.a.createElement(R.a,{style:Mi.conversationLine}):null,avatarCellStyle:Mi.conversationLineContainer,cellStyle:Mi.repliesTextContainer,style:Mi.grid},s?l.a.createElement(f.b,{accessibilityRole:"button",color:"gray700",onPress:n,style:o&&Mi.repliesMessage},l.a.createElement(Si,{communityName:e,excludedRecipients:t,inReplyToStatus:a,loggedInUserId:i})):null))),Di=a("Tb0w"),ki=a("1YZw"),Ni=a("pidX"),Li=a("5oBF"),Fi=a("JYYi"),Bi=a("/Rsk"),Vi=a("qlwE"),ji=a("XOJV"),zi=a("G6rE"),Hi=a("AspN"),Ui=a("oEGd"),Wi=a("P1r1");const Gi=e=>e.parentTweetId||(e.isInline?Fi.a.homeTimeline:Fi.a.modal),qi=(e,t)=>{const a=Gi(t);return V.l(e,a)},$i=(e,t)=>{const a=Gi(t);return V.m(e,a)},Ki=(e,t)=>{const a=Gi(t);return V.k(e,a)},Xi=(e,t)=>{const a=nn(e,t),i=Ki(e,t).communityIdValue||void 0,n=(null==a?void 0:a.community_id_str)||i,s=n?p.c.select(e,n):void 0;return s?s.name:void 0},Qi=(e,t)=>{const a=Gi(t);return V.n(e,a)},Yi=(e,t)=>{const a=Gi(t);return V.j(e,a)},Zi=e=>(t,a)=>{const i=((e,t)=>t.location.state)(0,a);return i?e(i):void 0},Ji=Object(z.createSelector)(((e,t)=>t.activeUser),zi.e.selectLoggedInUser,((e,t)=>e||t)),en=(e,t)=>t.parentTweetId||tn(e,t)||an(e,t),tn=(e,t)=>{const{location:{query:a}}=t;return a&&"string"==typeof a.in_reply_to?a.in_reply_to:void 0},an=Zi((e=>e.inReplyToStatusId)),nn=(e,t)=>{const a=en(e,t);return a?ji.a.selectHydrated(e,a):void 0},sn=(e,t)=>t.location.pathname.indexOf("/intent/")>-1,on=Zi((e=>e.hasArticleNudge)),rn=Zi((e=>e.convoCardData)),ln=Zi((e=>e.externalMedia)),cn=Zi((e=>e.externalMediaFiles)),dn=Zi((e=>e.previewTweetId)),hn=Zi((e=>e.defaultText)),un=(e,t)=>{const a=hn(e,t),i=Object(Ni.a)(t.location);return(sn(0,t)||((e,t)=>t.location.pathname.indexOf("/compose/tweet")>-1)(0,t))&&i?i:a},mn=Zi((e=>e.quotedStatusId)),pn=Zi((e=>e.quotedStatus)),gn=(e,t)=>((e,t)=>t.quotedStatus?t.quotedStatus:pn(e,t))(e,t)||((e,t)=>{const a=mn(e,t);return a?ji.a.selectHydratedMemoized(e,a):void 0})(e,t),_n=Zi((e=>e.isSelfThreadReply)),bn=Zi((e=>e.positionCursorAtBeginning)),yn=Zi((e=>e.promotedContent)),fn=({mediaIds:e,...t})=>t,Cn={addComposer:V.a,addToast:ki.b,createLocalApiErrorHandler:Object(G.createLocalApiErrorHandlerWithContextFactory)("SCREEN_COMPOSE_V2"),checkTweetForNudge:V.b,deletePreviewTweet:Li.c,fetchAutotaggedLocationIfNeeded:Bi.a,fetchTweetIfNeeded:ji.a.fetchOneIfNeeded,removeComposer:V.f,resetDraft:V.g,retweet:ji.a.retweet,schedule:V.i,draftTweet:V.e,send:V.r,updateActiveComposerIndex:V.t,updateAudienceControlsValue:V.u,updateConvoCardState:Di.b,preUploadMedia:Hi.e,addMedia:Hi.b,processMultipleMedia:Hi.g,removeMediaUpload:Hi.i,updateSingleComposer:V.x,setActiveParentKey:V.s,copyDataFromInlineComposerToModalComposer:V.c,copyDataFromInlineReplyComposerToModalComposer:V.d};var vn=Object(Ui.e)((()=>Object(z.createStructuredSelector)({activeComposerIndex:Yi,activeUser:Ji,altTextNudgeType:Wi.h,audienceControlsValue:Ki,composerData:Object(z.createSelector)(qi,un,gn,Hi.j,((e,t,a,i)=>e.map(((e,n)=>({...fn(e),media:i.filter((t=>e.mediaIds.some((e=>e===t.id)))),quotedStatus:0===n?a:void 0,text:0===n&&t?t:e.text}))))),dataSaverMode:Wi.k,excludedRecipients:$i,externalMedia:ln,externalMediaFiles:cn,geoEnabled:Wi.p,hasArticleNudge:on,inReplyToStatus:nn,inReplyToStatusId:en,isIntentRoute:sn,isSelfThreadReply:_n,isSending:Qi,isSuperFollowsCreator:U.l,positionCursorAtBeginning:bn,loggedInUser:zi.e.selectLoggedInUser,prepopulatedText:un,previewTweetId:dn,promotedContent:yn,scheduledFor:V.o,selectedCommunityName:Xi,sendingProgress:V.p,convoCardData:rn,undoTweetSettings:Vi.p,userLanguage:U.o,quotedStatusId:mn})),Cn),wn=a("45mF"),Tn=a("c0ZR"),xn=a("W5XZ"),En=a("lsKC"),Sn=a("Drq4"),In=a("I8M8"),Rn=a("7myi"),An=a("7nmT"),Pn=a.n(An),Mn=a("vbWy"),On=a("Rp9C"),Dn=a("Q5Mu"),kn=a("N5qz"),Nn="tweetButton",Ln="tweetButtonInline",Fn=Object(g.a)().propsFromState((()=>({loggedInUser:zi.e.selectLoggedInUser}))).adjustStateProps((({loggedInUser:e})=>({userName:e&&e.name,userProfileImageUrl:e&&e.profile_image_url_https,userScreenName:e&&e.screen_name}))).withAnalytics(),Bn=a("cHvH"),Vn=a("sgih"),jn=a("xKuM"),zn=a("5Vk4");const Hn=v.a.create((e=>({mainCard:{marginHorizontal:"auto",paddingVertical:e.spaces.space16,textAlign:"center",alignItems:"center"},largeScreenCard:{width:"70%"},smallScreenCard:{width:"85%"},sheetStyle:{justifyContent:"center"}})));var Un=({actionButtonType:e,children:t,onActionButtonClick:a,onMaskClick:i,sheetType:n,showActionButton:s})=>l.a.createElement(Bn.a,null,(({windowWidth:o})=>{const r=o>v.a.theme.breakpoints.small;return l.a.createElement(Vn.a,{onMaskClick:i,style:Hn.sheetStyle,type:n,withMask:!0},s&&l.a.createElement(jn.a,{leftControl:l.a.createElement(zn.a,{backButtonType:e,onClick:a}),position:"absolute"}),l.a.createElement(R.a,{style:[Hn.mainCard,r?Hn.largeScreenCard:Hn.smallScreenCard]},t))}));const Wn=T.a.cb7c0987,Gn=T.a.de3bcf27,qn=T.a.e710ce75,$n=T.a.h11e5910,Kn=T.a.b7ec04f3,Xn=T.a.i62a03aa,Qn=v.a.create((e=>({itemPadding:{marginVertical:e.spaces.space8},buttonContainer:{paddingHorizontal:e.spaces.space20,width:"100%"}})));var Yn=({onBack:e,onNo:t,onYes:a})=>l.a.createElement(Un,{actionButtonType:"back",onActionButtonClick:e,onMaskClick:e,sheetType:"full",showActionButton:!0},l.a.createElement(f.b,{size:"title4",style:Qn.itemPadding,weight:"heavy"},Wn),l.a.createElement(f.b,{color:"gray700",style:Qn.itemPadding},Gn),l.a.createElement(f.b,{color:"gray700",style:Qn.itemPadding},qn),l.a.createElement(R.a,{style:Qn.buttonContainer},l.a.createElement(f.b,{size:"title4",style:Qn.itemPadding,weight:"heavy"},$n),l.a.createElement(J.a,{onPress:a,style:Qn.itemPadding,type:"brandOutlined"},Kn),l.a.createElement(J.a,{onPress:t,style:Qn.itemPadding,type:"brandOutlined"},Xn))),Zn=a("cm6r");const Jn=v.a.create((e=>({button:{width:e.spaces.space72,height:e.spaces.space72,marginBottom:e.spaces.space12}})));var es=({icon:e,label:t,onPress:a})=>l.a.createElement(Zn.a,{interactiveStyles:null,onPress:a},(a=>l.a.createElement(l.a.Fragment,null,l.a.createElement(J.a,{icon:e,interactivityState:a,size:"xLarge",style:Jn.button,type:"primaryOutlined"}),l.a.createElement(f.b,{color:"gray700"},t)))),ts=a("sjK1"),as=a("FDY4"),is=a("tevE"),ns=a("jV+4"),ss=a("UgB4"),os=a("TW8A"),rs=a("hiGS"),ls=a("WtWS"),cs=a("Lsrn"),ds=a("k/Ka");const hs=(e={})=>Object(ds.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[cs.a.root,e.style],viewBox:"0 0 24 24"},l.a.createElement("g",null,l.a.createElement("path",{d:"M17.928 9.026l.095 3.545H19l.1-3.544h-1.172zm.586 5.394c.414 0 .667-.238.667-.623 0-.388-.252-.626-.666-.626-.41 0-.667.24-.667.627 0 .385.257.623.667.623zm-4.57-.11h.813l.278-1.384h.89l.15-.813h-.883l.198-.96h.875l.15-.805h-.864l.268-1.326h-.813l-.27 1.326h-.946l.263-1.326h-.81l-.27 1.326h-.846l-.154.806h.846l-.2.96h-.83l-.15.812h.824l-.278 1.384h.81l.277-1.384h.952l-.28 1.384zm-.578-2.124l.227-1.102h1.055l-.23 1.102h-1.052zm-5.889-.941c.388 0 .634.32.634.835s-.244.835-.636.835c-.385 0-.615-.315-.615-.835-.002-.524.23-.835.617-.835zM7.595 9C5.763 9 4.5 10.245 4.5 12.054c0 1.838 1.25 3.05 3.157 3.05.388 0 .765-.047 1.05-.13v-.598c-.204.073-.603.12-.995.12-1.556 0-2.542-.937-2.542-2.423 0-1.46.985-2.48 2.402-2.48 1.392 0 2.307.865 2.307 2.19 0 .744-.24 1.213-.61 1.213-.222 0-.35-.15-.35-.41v-1.94h-.74v.435h-.065c-.147-.325-.465-.515-.857-.515-.732 0-1.23.604-1.23 1.494 0 .93.505 1.544 1.267 1.544.425 0 .725-.19.88-.56h.065c.08.352.414.57.872.57.886 0 1.44-.728 1.44-1.892C10.55 10.106 9.348 9 7.594 9z"})));hs.metadata={width:24,height:24};var us=hs;const ms=[{headlineText:T.a.f3a7a80c,subTextLine1:T.a.ge52d1de,subTextLine2:null},{headlineText:T.a.j311bf49,subTextLine1:T.a.ae42ebff,subTextLine2:T.a.aa350ab1},{headlineText:T.a.j18b2956,subTextLine1:T.a.f6bee896,subTextLine2:T.a.dddd0995},{headlineText:T.a.d02a94fa,subTextLine1:T.a.dddd0995,subTextLine2:null},{headlineText:T.a.i018b746,subTextLine1:T.a.b8d85df9,subTextLine2:T.a.d5ca11f0}],ps=T.a.h11e5910,gs=T.a.abd845fd,_s=T.a.bea869b3,bs=T.a.d96cf7cd,ys=T.a.d3145da8,fs=v.a.create((e=>({itemPadding:{marginVertical:e.spaces.space8},buttonContainer:{paddingHorizontal:e.spaces.space20,width:"100%"},profanityIcon:{backgroundColor:e.colors.primary,color:e.colors.whiteOnColor,width:e.spaces.space48,height:e.spaces.space48,borderRadius:e.borderRadii.infinite},tweetContainer:{borderColor:e.colors.nestedBorderColor,borderWidth:e.borderWidths.small,borderRadius:e.borderRadii.large,width:"100%",textAlign:"left"},tweetContent:{paddingHorizontal:e.spaces.space16,paddingVertical:e.spaces.space12},tweetBody:{flexDirection:"row"},userName:{paddingBottom:e.spaces.space4},mobileButtonContainer:{justifyContent:"space-around",flexDirection:"row",width:"100%",marginTop:e.spaces.space72},thanksContainer:{flexDirection:"row",alignItems:"center"},thanksCheckMark:{color:v.a.theme.colors.primary,marginRight:e.spaces.space8},photos:{borderRadius:e.borderRadii.xLarge,overflow:"hidden",marginRight:e.spaces.space12,flex:"3 1 0%"},textStyle:{flex:"8 1 0%"}})));var Cs=({hasSentFeedback:e,media:t,onDeleteTweet:a,onDismiss:i,onEditTweet:n,onSendTweet:s,onWeGotItWrong:o,tweetText:r,userName:c,userProfileImageUrl:d,userScreenName:h})=>{const{featureSwitches:u}=l.a.useContext(Q.a);let m=u.getNumberValue("responsive_web_reply_nudge_copy_version");m=m>=0&&m<=4?m:0;const p=ms[m];return l.a.createElement(Bn.a,null,(({windowWidth:u})=>l.a.createElement(Un,{actionButtonType:"close",onActionButtonClick:i,onMaskClick:i,sheetType:"full",showActionButton:u>v.a.theme.breakpoints.medium},l.a.createElement(us,{style:[fs.profanityIcon,fs.itemPadding]}),l.a.createElement(is.a,{size:"title4",style:fs.itemPadding,weight:"heavy"},p.headlineText),l.a.createElement(f.b,{color:"gray700",style:fs.itemPadding},p.subTextLine1),l.a.createElement(f.b,{color:"gray700",style:fs.itemPadding},p.subTextLine2),l.a.createElement(R.a,{style:[fs.tweetContainer,fs.itemPadding]},l.a.createElement(R.a,{style:fs.tweetContent},l.a.createElement(ns.a,{name:c,profileImageUrl:d,screenName:h,style:fs.userName}),l.a.createElement(R.a,{style:fs.tweetBody},(()=>{if(0===t.length)return null;const e=t.map((e=>{var t,a,i;let n="";if(e.externalMediaDetails)n=e.externalMediaDetails.stillMediaUrl;else if(e.mediaFile instanceof ts.c)n=e.mediaFile.thumbnail;else if(null!==(t=e.mediaFile)&&void 0!==t&&t.url){var s;n=null===(s=e.mediaFile)||void 0===s?void 0:s.url}return{accessibilityLabel:"",url:n,width:(null===(a=e.mediaFile)||void 0===a?void 0:a.width)||100,height:(null===(i=e.mediaFile)||void 0===i?void 0:i.height)||100,expandedUrl:"",shouldShowAltLabel:!1}}));return l.a.createElement(R.a,{style:fs.photos},l.a.createElement(as.a,{containerAspectRatio:1,images:e,previewMode:!1,singleImageMaxAspectRatio:1,singleImageMinAspectRatio:1,withCenterCrop:!0,withLink:!1}))})(),l.a.createElement(f.b,{style:fs.textStyle},r)))),e?l.a.createElement(R.a,{style:fs.thanksContainer},l.a.createElement(ls.a,{style:fs.thanksCheckMark}),l.a.createElement(f.b,{align:"center",style:fs.itemPadding},ys)):l.a.createElement(f.b,{align:"center",onPress:o,style:fs.itemPadding,withUnderline:!0},ps),u>v.a.theme.breakpoints.small?l.a.createElement(R.a,{style:fs.buttonContainer},l.a.createElement(J.a,{onPress:n,style:fs.itemPadding,type:"brandFilled"},gs),l.a.createElement(J.a,{onPress:s,style:fs.itemPadding,type:"brandOutlined"},_s),l.a.createElement(J.a,{onPress:a,style:fs.itemPadding,type:"destructiveText"},bs)):(()=>{const e=l.a.createElement(ss.a,{style:{color:v.a.theme.colors.text}}),t=l.a.createElement(os.a,{style:{color:v.a.theme.colors.primary}}),i=l.a.createElement(rs.a,{style:{color:v.a.theme.colors.red500}});return l.a.createElement(R.a,{style:fs.mobileButtonContainer},l.a.createElement(es,{icon:e,label:_s,onPress:s}),l.a.createElement(es,{icon:t,label:gs,onPress:n}),l.a.createElement(es,{icon:i,label:bs,onPress:a}))})())))};var vs=Fn((({analytics:e,media:t,nudgeId:a,onDeleteTweet:i,onDismiss:n,onEditTweet:s,onSendTweet:o,tweetText:r,userName:c,userProfileImageUrl:d,userScreenName:h})=>{const[u,m]=l.a.useState(!1),[p,g]=l.a.useState(!1),_=({action:t,element:i,page:n})=>{e.scribe({action:t,data:{nudge_id:a},element:i,page:n,section:"dialog"})};return u?l.a.createElement(Yn,{onBack:()=>{_({action:"back",element:"action",page:"nudge_more_info"}),m(!1)},onNo:()=>{_({action:"got_it_wrong_no",element:"action",page:"nudge_more_info"}),g(!0),m(!1)},onYes:()=>{_({action:"got_it_wrong_yes",element:"action",page:"nudge_more_info"}),g(!0),m(!1)}}):l.a.createElement(Cs,{hasSentFeedback:p,media:t,onDeleteTweet:()=>{_({action:"cancel",element:"action",page:"nudge"}),i()},onDismiss:()=>{_({action:"dismiss",element:"action",page:"nudge"}),n()},onEditTweet:()=>{_({action:"revise",element:"action",page:"nudge"}),s()},onSendTweet:()=>{_({action:"send",element:"action",page:"nudge"}),o()},onWeGotItWrong:()=>{_({action:"more_info",element:"action",page:"nudge"}),_({action:"impression",page:"nudge_more_info"}),m(!0)},tweetText:r,userName:c,userProfileImageUrl:d,userScreenName:h})})),ws=a("eb3s"),Ts=a("JYMr"),xs=a("sCk0"),Es=a("3A2y"),Ss=a("zrOZ"),Is=a("s1N3"),Rs=a("4FGy"),As=a("mN6z"),Ps=a("eyty"),Ms=a("rziq"),Os=a("jTgF");const Ds=T.a.d28215f0,ks=T.a.ec909a54,Ns=T.a.jd53409d,Ls={singular:T.a.edae65de,plural:T.a.a859846a,oneOfMultiple:T.a.e90118f5,someOfMultiple:T.a.c211dcb1},Fs={singular:T.a.d7c26bfb,plural:T.a.a75e3ccc},Bs=T.a.dcb7e3a0,Vs=({numberOfDescriptionsMissing:e,numberOfImages:t})=>{let a,i;const n=e===t;return 1===e?(i=Fs.singular,a=n?Ls.singular:Ls.oneOfMultiple):(i=Fs.plural,a=n?Ls.plural:Ls.someOfMultiple),`${a} ${i} ${Bs}`},js=T.a.c1bf53b0,zs=T.a.bb8170da,Hs=T.a.dad5a4b8,Us=T.a.e65aed64,Ws=T.a.bc2ceaf2,Gs=T.a.d8222374,qs=T.a.j890123a,$s=T.a.bb01231c,Ks=T.a.d4ab68e2,Xs=T.a.d8af8a4c,Qs=T.a.d09d4c05,Ys=T.a.i2209530,Zs=T.a.bf9b89e4,Js=T.a.f277e949,eo=T.a.b551cd22,to=T.a.f026a7fa,ao=T.a.a5d4fda0,io=T.a.ib067d6a,no=h.canUseDOM&&document.documentElement&&"scrollBehavior"in document.documentElement.style,so={element:"alt_text_prompt"},oo={component:"article_nudge"},ro={viewType:"send_tweet"},lo=Object.freeze({Original:"original",Reply:"reply",Quote:"quote",Thread:"thread"});class co extends l.a.Component{constructor(e,t){var a;super(e,t),o()(this,"_getParentKey",(()=>{const{isInline:e,parentTweetId:t}=this.props;return t||(e?Fi.a.homeTimeline:Fi.a.modal)})),o()(this,"_updateSingleComposer",((e,t)=>{const{updateSingleComposer:a}=this.props;return a({updates:e,index:t,parentKey:this._getParentKey()})})),o()(this,"_resetDraft",(()=>{const{resetDraft:e}=this.props;e({parentKey:this._getParentKey(),isPreview:this.isPreview})})),o()(this,"_fetchAutotaggedLocationIfNeeded",(()=>{const{createLocalApiErrorHandler:e,fetchAutotaggedLocationIfNeeded:t}=this.props;return t().catch(e())})),o()(this,"_syncTexts",(()=>{const{composerData:e}=this.props,{textMap:t}=this.state;e.forEach(((e,a)=>{const i=t[e.key];"string"==typeof i&&i!==e.text&&this._updateSingleComposer({text:i},a)}))})),o()(this,"_hasGif",(e=>e.gifMetadata||e.media.some((e=>e.mediaFile&&e.mediaFile.isGif)))),o()(this,"_hasPhoto",(e=>e.media&&e.media.some((e=>e.mediaFile&&e.mediaFile.isImage)))),o()(this,"_hasVideo",(e=>e.media&&e.media.some((e=>e.mediaFile&&e.mediaFile.isVideo&&!e.mediaFile.isGif)))),o()(this,"_handleDeletePreviewTweet",(()=>{const{deletePreviewTweet:e,previewTweetId:t}=this.props;t&&e(t)})),o()(this,"_handleAnimateComplete",(()=>{const{activeComposerIndex:e,onHandleAppBarHeight:t}=this.props,a=Pn.a.findDOMNode(this._composerRefs[e]);if(a instanceof window.Element){const{bottom:e,top:i}=a.getBoundingClientRect(),n=Math.max(i,window.scrollY);if(n<window.pageYOffset||e>window.innerHeight){const e=t?n-t()-14:n-14,a=Math.max(e,0);window.requestAnimationFrame((()=>{no?window.scrollTo({top:a,left:0,behavior:"smooth"}):window.scrollTo(0,a)}))}}})),o()(this,"_handleFetchTweetIfNeeded",(()=>{const{createLocalApiErrorHandler:e,fetchTweetIfNeeded:t,inReplyToStatus:a,inReplyToStatusId:i,quotedStatus:n,quotedStatusId:s}=this.props;!a&&i&&t(i).catch(e(xn.a)),!n&&s&&t(s).catch(e(xn.a))})),o()(this,"_blockHistory",((e,t)=>{const{audienceControlsValue:a,isInline:i}=this.props,n=!i&&/unsent/.test(e.pathname),s=!i&&!/\/compose\/tweet\/?$/.test(e.pathname);return this.shouldShowDiscardConfirmation&&"POP"===t&&s?(this.setState({showDiscardTweetConfirmation:!0}),!1):this._canSaveDraft&&n&&"PUSH"===t?this.shouldShowDiscardConfirmation?(this.setState({showDiscardTweetConfirmation:!0,navigatingToOutbox:n}),!1):(this._resetDraft(),!0):this.shouldShowBackgroundSendConfirmation&&"POP"===t&&s?(this._cancelAllMediaUploads(),!1):!("POP"===t&&s&&this._areComposersEmptyOrUnchanged&&!Object(Ye.a)(a))||(this._resetDraft(),!0)})),o()(this,"_getKeyCommandHandlers",(()=>{const{typeaheadActive:e}=this.state;return e?this._keyCommandHandlersForActiveTypeahead:this._keyCommandHandlers})),o()(this,"handleTweetOrRetweet",(()=>{this._scribe({section:"composition",element:"send_tweet",action:"click"});if(this._areComposersValid())return this.shouldShowAltTextPrompt?(this.setState({showAltTextPrompt:!0}),void this._scribe({...so,action:"show"})):this._handleTweetOrRetweet()})),o()(this,"_handleTweetOrRetweet",(()=>this.isRetweet?this._handleRetweet():this._handleTweet())),o()(this,"_renderReplyContext",(()=>{const{activeUser:e,excludedRecipients:t,inReplyToStatus:a,isInline:i,isSelfThreadReply:n,selectedCommunityName:s}=this.props;if(a&&this._shouldBeExpanded())return l.a.createElement(Oi,{communityName:s,excludedRecipients:t,inReplyToStatus:a,key:t.join(),loggedInUserId:e?e.id_str:void 0,onPress:this._handleViewRecipients,shouldDisplayRepliesText:!n,showParentTweet:!i})})),o()(this,"_renderAltTextPrompt",(()=>{const{numberOfDescriptionsMissing:e,numberOfImages:t}=this._getAltTextMetadata();return l.a.createElement(ws.a,{Icon:Sn.a,cancelButtonLabel:zs,confirmButtonLabel:js({numOfDescriptions:e}),headline:Ns,onCancel:this._handleIgnoreAltTextPrompt,onConfirm:this._handleAcceptAltTextPrompt,onMaskClick:this._handleCancelAltTextPrompt,text:Vs({numberOfDescriptionsMissing:e,numberOfImages:t})})})),o()(this,"_renderToxicReplyNudge",(()=>{const e=this._getSingleComposerDataWithLatestText(this.props.composerData[0]),t=e.text,a=e.media;return l.a.createElement(vs,{media:a,nudgeId:this.state.nudgeId,onDeleteTweet:this._handleReplyNudgeDeleteTweet,onDismiss:this._handleReplyNudgeDismiss,onEditTweet:this._handleReplyNudgeEditTweet,onSendTweet:this._handleReplyNudgeSendTweet,tweetText:t})})),o()(this,"_handleReplyNudgeDeleteTweet",(()=>{this._hideToxicReplyNudge(),this._handleConfirmDiscardTweet()})),o()(this,"_handleReplyNudgeDismiss",(()=>{this._hideToxicReplyNudge()})),o()(this,"_handleReplyNudgeEditTweet",(()=>{this._hideToxicReplyNudge()})),o()(this,"_handleReplyNudgeSendTweet",(()=>{this._hideToxicReplyNudge(),this._handleSendTweet()})),o()(this,"_setRootRef",(e=>{e&&(this._root=e)})),o()(this,"_handleTweet",(()=>{const{composerData:e}=this.props,{scheduledFor:t}=e[0];this.setState({errorMessage:void 0}),t?Object(Ze.h)(t)&&this._handleScheduleTweet():this._checkToxicReplyAndSendTweet()})),o()(this,"_handleTweetError",((e,t)=>a=>{const{analytics:i,createLocalApiErrorHandler:n}=this.props;if(Object(Os.d)(a)&&a.code===In.b.CANCELED)return i.scribeAction(e),Promise.resolve();const s=Object(Os.b)(a);if(s)return this.setState({errorMessage:s}),Promise.resolve();n({...t||Object(wn.a)(void 0,!1)})(a);const o=a instanceof d.a&&(null==t?void 0:t[a.errors[0].code]);this.setState({errorMessage:{text:o?o.toast.text:ao}})})),o()(this,"_handleScheduleTweet",(()=>{const{addToast:e,composerData:t,excludedRecipients:a,inReplyToStatus:i,schedule:n}=this.props,s=this._getSingleComposerDataWithLatestText(t[0]);n({excludedRecipients:a,inReplyToStatus:i,scheduleData:s}).then((a=>{this.setState({tweetsSentOrScheduled:!0});const i=Object(Ze.c)(s.scheduledFor);if(i){const n=Object(Ze.b)(i),s=Object(Ze.i)(i),o=eo({scheduleDate:n,scheduleTime:s});e({text:o,action:{label:Js,link:"/compose/tweet/unsent/scheduled"}}),this._scribeTweetSent(t[0],{...a,id_str:a.scheduled_id_str},{isScheduled:!0})}this._updateConvoCardState(),this._close()})).catch(this._handleTweetError("schedule_tweet_cancel"))})),o()(this,"_handleDraftTweet",(()=>{const{addToast:e,composerData:t,draftTweet:a,excludedRecipients:i,inReplyToStatus:n}=this.props;a({excludedRecipients:i,inReplyToStatus:n,draftData:this._getSingleComposerDataWithLatestText(t[0])}).then((a=>{this.setState({showDiscardTweetConfirmation:!1}),e({text:Zs,action:{label:Js,link:"/compose/tweet/unsent/drafts"}}),this._scribeTweetSent(t[0],{...a,id_str:a.draft_id_str},{isDraftTweet:!0}),this._updateConvoCardState(),this._close()})).catch(this._handleTweetError("draft_tweet_cancel",Dn.a))})),o()(this,"_checkToxicReply",(()=>{const{checkTweetForNudge:e,composerData:t,inReplyToStatus:a,inReplyToStatusId:i,parentTweetId:n}=this.props,s=e(this._getSingleComposerDataWithLatestText(t[0]).text,n||i,null==a?void 0:a.conversation_id_str).then((e=>{var t,a,i,n,s,o,r;const l=this.context.featureSwitches.getValueWithoutScribeImpression("responsive_web_reply_nudge_supported_languages");if(!l||!Array.isArray(l)||!l.includes(null===(t=e.create_nudge)||void 0===t||null===(a=t.nudge)||void 0===a?void 0:a.proposed_tweet_language))return!1;const c=null==e||null===(i=e.create_nudge)||void 0===i||null===(n=i.nudge)||void 0===n||null===(s=n.nudge_type)||void 0===s?void 0:s.__typename,d=null==e||null===(o=e.create_nudge)||void 0===o||null===(r=o.nudge)||void 0===r?void 0:r.id;return d&&this.setState({nudgeId:d}),!!c})),o=new Promise(((e,t)=>setTimeout(e,1e3,!1)));return Promise.race([s,o])})),o()(this,"_showToxicReplyNudge",(()=>{this._scribe({page:"nudge",section:"dialog",action:"impression"},{nudge_id:this.state.nudgeId}),this.setState({showToxicReplyNudge:!0})})),o()(this,"_hideToxicReplyNudge",(()=>this.setState({showToxicReplyNudge:!1}))),o()(this,"_checkToxicReplyAndSendTweet",(()=>{const{composerData:e,isSelfThreadReply:t}=this.props,{nudgeId:a}=this.state;if(!(!this._getSingleComposerDataWithLatestText(e[0]).scheduledFor&&this.isReply&&!t&&this.context.featureSwitches.getValueWithoutScribeImpression("responsive_web_reply_nudge_enabled")&&!a))return this._handleSendTweet();this._checkToxicReply().then((e=>{if(!e)return this._handleSendTweet();this.context.featureSwitches.isTrue("responsive_web_reply_nudge_enabled"),this.context.featureSwitches.getArrayValue("responsive_web_reply_nudge_supported_languages"),this._showToxicReplyNudge()}))})),o()(this,"_handleSendTweet",(()=>{const{activeUser:e,addToast:t,analytics:a,audienceControlsValue:i,composeSemanticCoreId:n,excludedRecipients:s,hasArticleNudge:o,history:r,inReplyToStatus:l,isSelfThreadReply:c,location:d,promotedContent:h,selectedCommunityName:m,send:p}=this.props,{conversationControlsValue:g,exclusivityControlValue:_}=i,b=this.isPreview,y=this.props.composerData.map((e=>this._getSingleComposerDataWithLatestText(e))),f=Object(Ze.c)(y[0].scheduledFor);if(f){const e=Object(Ze.b)(f),a=Object(Ze.i)(f),i=eo({scheduleDate:e,scheduleTime:a});return t({text:i,action:{label:Js,link:""}}),void this._close()}if(s.length>0&&a.scribe({element:"mentions",action:"edited"}),this._conversationControlsCreationEnabled)if("community"===g)a.scribe({action:"send_community_tweet"});else if("by_invitation"===g){const e=this._getSingleComposerDataWithLatestText(y[0]).text,t=Object(u.d)(e);a.scribe({action:t?"send_mentioned_tweet_with_mentions":"send_mentioned_tweet_without_mentions"})}else"followers"===g&&a.scribe({action:"send_my_followers_tweet"});const C=(null==l?void 0:l.community_id_str)||i.communityIdValue||void 0,v=C?`8.31.${C}`:"",w=n?C?[n,v].join(","):n:v;p({sendData:y,communityIdValue:C,conversationControlsValue:g,excludedRecipients:s,exclusivityControlValue:_,inReplyToStatus:l,isSelfThreadReply:c,promotedContent:h,composeSemanticCoreId:w,isPreview:b}).then((a=>{b||this.setState({tweetsSentOrScheduled:!0}),a.map(((e,t)=>this._scribeTweetSent(y[t],e,{hasArticleNudge:o}))),a.length>1&&this._scribeThreadSent(y,a,"thread_send_success");let i=a.length>1?Us:Hs;if(C&&m){const e=m,t=a.length;i=ks({numOfTweets:t,communityName:e})}const n=b&&this.isReply;if(n||!b){const s=n?a[0].in_reply_to_status_id_str:a[0].id_str;t({text:n?Ws:i,action:{label:Js,link:`/${e?e.screen_name:"i"}/status/${s||""}`}})}this.isInlineReply&&this.setState({focused:!1}),this._updateConvoCardState(),this._close()})).catch((e=>{var t;const{sentTweets:i=[]}=e,n=Array.isArray(e.errors)&&(null===(t=e.errors[0])||void 0===t?void 0:t.code),s=null==e?void 0:e.url,l=null==e?void 0:e.status,c={message:e.type,event_info:n?`${n}`:void 0,status_code:l,url:s};throw i.map(((e,t)=>this._scribeTweetSent(y[t],e)),{hasArticleNudge:o}),Object(Os.d)(e)&&e.code===In.b.CANCELED||a.scribe({action:"send_tweet_failure",data:c}),y.length>1&&this._scribeThreadSent(y,i,"thread_send_failure"),i.length&&r.replace({pathname:d.pathname,state:{...Object(Es.a)(d.state||{},"quotedStatus"),inReplyToStatusId:i[i.length-1].id_str,isSelfThreadReply:!0}}),e})).catch(this._handleTweetError("send_tweet_cancel",Dn.a))})),o()(this,"_setActiveParentKey",(()=>{const{setActiveParentKey:e}=this.props;e(this._getParentKey())})),o()(this,"_scribeTweetSent",((e,t,{hasArticleNudge:a=!1,isDraftTweet:i=!1,isScheduled:n=!1}={})=>{const{nudgeId:s}=this.state,o=e.scheduledTweetId?"schedule_edit_":"schedule_",r=e.draftTweetId?"draft_edit_":"draft_",l=i?r:n?o:"send_",c={items:[On.a.getTweetItem(t)]},d=e.pollActive&&e.pollValid,h=e.media.some((e=>{var t;return!(null===(t=e.mediaMetadata)||void 0===t||!t.altText)})),u=e.mediaTags.length,m=Object(Ss.a)(e.media.map((e=>{var t;const a=null===(t=e.mediaMetadata)||void 0===t?void 0:t.sensitiveMediaWarning;return a?Array.from(a):void 0})).filter(Boolean).flat()),p=this.props.isInline?"inline_reply":"tweet_box_dialog";if(this._scribe({action:`${l}tweet`},c),i||!e.draftTweetId||e.scheduledTweetId||this._scribe({action:`${l}draft_tweet`},c),this.isQuoteTweet&&(this._scribe({action:"retweet_with_comment"},c),a&&this._scribe({...oo,element:"result",action:"retweet_with_comment"},c)),this.isReply&&this._scribe({component:p,action:`${l}reply`},c),d&&this._scribe({action:`${l}poll_tweet`},c),this._hasPhoto(e)&&(this._scribe({action:`${l}photo_tweet`},c),h&&this._scribe({action:`${l}photo_tweet_with_alt_text`},c),u&&this._scribe({action:`${l}photo_tweet_with_tags`},c)),this._hasVideo(e)&&(this._scribe({action:`${l}video_tweet`},c),u&&this._scribe({action:`${l}video_tweet_with_tags`},c)),m.size){const t=this._hasPhoto(e)?"photo":"video";m.forEach((e=>{this._scribe({action:`${l}${t}_tweet_with_${e}_warning`},c)}))}const g={page:"nudge",section:"dialog",element:"result"};if(s&&this.isReply&&!n&&(i?this._scribe({...g,action:"save"},{nudge_id:s}):this._scribe({...g,action:"sent"},{nudge_id:s})),s||i||!this.isReply||n||this._scribe({...g,action:"sent_no_nudge"}),e.gifMetadata){const a=t.id_str&&On.a.getGifSearchItemForTweet(t.id_str,e.gifMetadata);this._scribe({element:"remote",action:`${l}gif_tweet`},{items:a?[a]:[]});const i=e.media.some((e=>{var t;return!(null===(t=e.mediaMetadata)||void 0===t||!t.defaultAltText)}));(h||i)&&this._scribe({element:"remote",action:`${l}gif_tweet_with_alt_text`},{event_info:h?"user_entered":"from_provider",items:a?[a]:[]}),u&&this._scribe({action:`${l}gif_tweet_with_tags`},c)}else this._hasGif(e)&&(this._scribe({element:"local",action:`${l}gif_tweet`},c),h&&this._scribe({element:"local",action:`${l}gif_tweet_with_alt_text`},c))})),o()(this,"_scribeThreadSent",((e,t,a)=>{const{inReplyToStatus:i}=this.props,n={items:[On.a.getSendThreadItem(e,t.length,!!i)]};this._scribe({action:a},n)})),o()(this,"_scribeRetweet",(e=>{const{hasArticleNudge:t}=this.props,a={items:[On.a.getTweetItem(e)]};this._scribe({action:"retweet"},a),t&&this._scribe({...oo,element:"result",action:"retweet"},a)})),o()(this,"_handleRetweet",(()=>{const{composerData:e,createLocalApiErrorHandler:t,retweet:a}=this.props,i=e[0].quotedStatus;i&&(this._scribeRetweet(i),a(i.id_str,{}).then((e=>{this.setState({tweetsSentOrScheduled:!0}),this._close()}),t(Mn.a)))})),o()(this,"handleDismissComposer",(()=>{this.shouldShowDiscardConfirmation?this.setState({showDiscardTweetConfirmation:!0}):this.shouldShowBackgroundSendConfirmation?this._cancelAllMediaUploads():this._close()})),o()(this,"_cancelAllMediaUploads",(()=>{this.props.composerData.forEach((e=>e.media.forEach((e=>e.uploading&&e.uploader&&e.uploader.cancel()))))})),o()(this,"_handleConfirmDiscardTweet",(()=>{const{analytics:e,hasArticleNudge:t}=this.props,a=this._canSaveDraft?"draft":"send";this.setState({showDiscardTweetConfirmation:!1}),this._close(),e.scribeAction(`${a}_tweet_discard`),t&&this._scribe({...oo,element:"result",action:"cancel"}),this.state.nudgeId&&this._scribe({page:"nudge",section:"dialog",element:"result",action:"cancel"},{nudge_id:this.state.nudgeId})})),o()(this,"_handleCancelDiscardTweet",(()=>{this.setState({showDiscardTweetConfirmation:!1},(()=>{this._restoreFocusToActiveComposer()}))})),o()(this,"_handleAcceptAltTextPrompt",(()=>{this.setState({showAltTextPrompt:!1});const{history:e}=this.props,{noDescriptionImageIDs:t}=this._getAltTextMetadata();t[0]&&(this._scribe({...so,action:"accepted"}),e.push("/compose/tweet/media",{mediaId:t[0],cropTabEnabled:!1,showAllMedia:!0}))})),o()(this,"_handleIgnoreAltTextPrompt",(()=>{this._scribe({...so,action:"declined"}),this.setState({showAltTextPrompt:!1}),this._handleTweetOrRetweet()})),o()(this,"_handleCancelAltTextPrompt",(()=>{this._scribe({...so,action:"cancel"}),this.setState({showAltTextPrompt:!1},(()=>{this._restoreFocusToActiveComposer()}))})),o()(this,"_restoreFocusToActiveComposer",(()=>{const{activeComposerIndex:e}=this.props;void 0!==e&&this._composerRefs[e]&&this._composerRefs[e].focus()})),o()(this,"_close",(()=>{const{history:e,isSending:t,onCloseComposer:a}=this.props;t||this._resetDraft(),this.state.navigatingToOutbox?this._canSaveDraft?e.push("/compose/tweet/unsent/drafts"):e.push("/compose/tweet/unsent/scheduled"):a&&a()})),o()(this,"_handleComposerFocus",(e=>{this._composerRefs[e]?this.props.updateActiveComposerIndex(e):setTimeout((()=>{this._restoreFocusToActiveComposer()}),0)})),o()(this,"_handleFocus",(()=>{const{focused:e}=this.state;e||(this.isInlineReply&&this._scribe({element:"inline_reply",action:"reply"}),this.setState({focused:!0}))})),o()(this,"_handleTypeaheadStateChange",(e=>{this.setState({typeaheadActive:e})})),o()(this,"_handleRemoveComposer",(()=>{const{activeComposerIndex:e,composerData:t,history:a,location:i,removeComposer:n}=this.props;0===e&&t[0].quotedStatus&&a.replace({pathname:i.pathname,state:Object(Es.a)(i.state||{},"quotedStatus")}),n(),setTimeout(this._restoreFocusToActiveComposer)})),o()(this,"_handleViewRecipients",(()=>{const{excludedRecipients:e,history:t,inReplyToStatus:a}=this.props;this._setActiveParentKey(),t.push({pathname:"/compose/tweet/recipients",state:{excludedRecipients:e,inReplyToStatus:a}})})),o()(this,"_handleTextChange",((e,t)=>{const{textMap:a}=this.state,{activeComposerIndex:i,isInline:n,setValidity:s}=this.props;if(this.setState({textMap:{...a,[t]:e}},(()=>{s&&s(this._areComposersValid())})),this.setState({errorMessage:void 0}),it.b.isIOS()){const t=n?0:i;this._updateSingleComposer({text:e},t)}})),o()(this,"_handleTextOnBlur",Object(Na.a)(((e,t)=>()=>{const{textMap:a,tweetsSentOrScheduled:i}=this.state,{composerData:n}=this.props,s=a[e],o=n.some((t=>t.key===e));"string"==typeof s&&!i&&o&&this._updateSingleComposer({text:s},t)}))),o()(this,"_updateAudienceControlsValue",(e=>{const{composerData:t,updateAudienceControlsValue:a}=this.props,{errorMessage:i}=this.state;switch(e._type){case"conversation_controls":if(!this._conversationControlsCreationEnabled)return;break;case"community_members":if(!this._isCommunitiesEnabled)return;t[0].pollActive&&(this._updateSingleComposer({pollActive:!1},0),this.setState({errorMessage:{text:Ds}})),(null==i?void 0:i.text)===Ds&&this.setState({errorMessage:void 0})}a(e,this._getParentKey())})),o()(this,"_renderProgressBar",(()=>{const{isSending:e,sendingProgress:t}=this.props;return l.a.createElement(Ts.a,{progress:e?Math.max(t,.02):0,style:ho.progressBar})})),o()(this,"_updateConvoCardState",(()=>{const{convoCardData:e,updateConvoCardState:t}=this.props;if(e){const{cardId:a,nextState:i}=e;i&&a&&t(a,{cardState:i})}})),o()(this,"_attachExternalMedia",(e=>t=>Promise.all(t.map((e=>Object(Tn.a)(e)))).then(this._handleAddMediaFiles(e)))),o()(this,"_handleAddMediaFiles",(e=>t=>{var a;const{addMedia:i,addToast:n,composerData:s,dataSaverMode:o,preUploadMedia:r,processMultipleMedia:l,removeMediaUpload:c}=this.props,d=s[e],h=d.pollActive,u=Object(Ps.e)(null==this||null===(a=this.context)||void 0===a?void 0:a.userClaims);h||i(t,{location:Ps.d.Tweet,canUploadLongVideo:u}).then((t=>{const a=t.map((e=>e.id));if(co._validateMedia(d,t)){const i=d.media.map((e=>e.id));this._updateSingleComposer({mediaIds:Object(Is.a)(i.concat(a))},e),l(t,{onFailure:this._handleMediaRemoveFactory(e)}).then((e=>{o||r(e.map((e=>e.id)))}))}else n({text:io}),c(a)}))})),o()(this,"_handleMediaRemoveFactory",(e=>t=>this._handleMediaRemove(e,t))),o()(this,"_handleMediaRemove",((e,t)=>{const{composerData:a,removeMediaUpload:i}=this.props,{media:n,mediaTags:s}=a[e],o=((e,...t)=>Object(Rs.a)(e,t))(n.map((e=>e.id)),t),r=o.length>0?s:[];this._updateSingleComposer({mediaIds:o,gifMetadata:void 0,mediaTags:r},e),i(t),this.setState({errorMessage:void 0})})),o()(this,"_setComposerRef",(e=>t=>{this._composerRefs[e]=t})),o()(this,"_shouldBeExpanded",(()=>{const{composerData:e,parentTweetId:t}=this.props,{focused:a}=this.state;if(a)return!0;const i=!Object(Ye.c)(this._getSingleComposerDataWithLatestText(e[0]));return!t||i})),o()(this,"_areComposersValid",(()=>{const{audienceControlsValue:{_type:e},composerData:t}=this.props,a=t[0].quotedStatus,i=null==a?void 0:a.community_id_str,n="community_members"===e;return this.isRetweet&&!i&&!n||t.every((e=>Object(Ye.e)(this._getSingleComposerDataWithLatestText(e))))})),o()(this,"_areComposersEmptyOrUnchanged",(()=>{const{composerData:e,prepopulatedText:t}=this.props;return e.every((e=>Object(Ye.d)(this._getSingleComposerDataWithLatestText(e),t)))})),o()(this,"_getAltTextMetadata",(()=>{const{composerData:e}=this.props,t={numberOfDescriptionsMissing:0,numberOfImages:0,noDescriptionImageIDs:[]};return e.forEach((e=>{const a=(e.media||[]).filter((({mediaFile:e})=>(null==e?void 0:e.isImage)||(null==e?void 0:e.isGif))),i=a.filter((({mediaMetadata:e})=>!(null!=e&&e.altText))).map((e=>e.id));t.numberOfImages+=a.length,t.noDescriptionImageIDs.push(...i)})),t.numberOfDescriptionsMissing=t.noDescriptionImageIDs.length,t})),o()(this,"_getSingleComposerDataWithLatestText",(e=>{const{textMap:t}=this.state;return"string"==typeof t[e.key]?{...e,text:t[e.key]}:e}));const i=!(null===(a=e.location.state)||void 0===a||!a.focusComposer);this.state={focused:i,showAltTextPrompt:!1,showDiscardTweetConfirmation:!1,showToxicReplyNudge:!1,textMap:{},tweetsSentOrScheduled:!1,typeaheadActive:!1,shouldDisableButton:!1},this._composerRefs={},this._conversationControlsCreationEnabled=!0===this.context.featureSwitches.getValueWithoutScribeImpression("conversation_controls_limited_replies_creation_enabled"),this._throttledSyncTexts=Object(La.a)(this._syncTexts,1e3,{leading:!0,trailing:!1}),this._keyCommandHandlers={[Ms.b]:this.handleTweetOrRetweet,[Ms.a]:this.handleDismissComposer},this._keyCommandHandlersForActiveTypeahead={[Ms.b]:this.handleTweetOrRetweet},this._isAltTextNudgeEnabled=!0===this.context.featureSwitches.getValueWithoutScribeImpression("responsive_web_alt_text_nudges_enabled"),this._isCommunitiesEnabled=this.context.featureSwitches.isTrue("c9s_enabled")}UNSAFE_componentWillMount(){const{onRef:e}=this.props;e&&e(this)}componentDidMount(){const{convoCardData:e,externalMedia:t,externalMediaFiles:a,history:i,isInline:n,isIntentRoute:s,location:o,prepopulatedText:r,setValidity:l}=this.props;if(this._unblockHistory=this.props.history.block(this._blockHistory),t.length>0&&this._attachExternalMedia(0)(t),a.length>0&&this._handleAddMediaFiles(0)(a),this._handleFetchTweetIfNeeded(),this._handleDeletePreviewTweet(),r||e&&e.cardUrl){const t={};r&&(t.text=r),e&&e.cardUrl&&(t.cardUrl=e.cardUrl),this._updateSingleComposer(t)}(r||e&&e.cardUrl||t.length>0||a.length>0)&&!s&&i.replace({query:Object(Ni.b)(o.query),search:"",pathname:o.pathname,state:Object(Es.a)(Object(Ni.b)(o.state||{}),["defaultText","externalMedia","externalMediaFiles"])}),l&&l(this._areComposersValid()),n||this._setActiveParentKey(),this.isInlineReply&&this._root&&(this._height=this._root.getBoundingClientRect().height)}componentDidUpdate(e,t){const{addToast:a,composerData:i,copyDataFromInlineReplyComposerToModalComposer:n,externalMedia:s,externalMediaFiles:o,onRef:r,parentTweetId:l,replyPressToggle:c,setValidity:d,windowWidth:h}=this.props;h!==e.windowWidth&&this._throttledSyncTexts(),e.onRef&&e.onRef!==r&&e.onRef(void 0),r&&r!==e.onRef&&r(this),i.length>=25&&e.composerData.length<25&&a({text:to}),s.length>0&&s!==e.externalMedia?this._attachExternalMedia(0)(s):o.length>0&&o!==e.externalMediaFiles&&this._handleAddMediaFiles(0)(o),d&&!Object(As.a)(i,e.composerData)&&d&&d(this._areComposersValid()),c!==e.replyPressToggle&&n(l)}componentWillUnmount(){const{onRef:e}=this.props;this._unblockHistory&&this._unblockHistory(),e&&e(void 0),this._syncTexts()}render(){var e,t;const{activeUser:a,addComposer:i,addToast:s,audienceControlsValue:o,composeHeader:r,composerData:c,copyDataFromInlineComposerToModalComposer:d,customizePropsForSingleComposerItem:h,geoEnabled:u,history:m,inReplyToStatus:p,isInline:g,isModal:_,isSelfThreadReply:b,isSending:y,isSuperFollowsCreator:f,parentTweetId:C,positionCursorAtBeginning:v,richTextInputContext:w,scheduledFor:T,typeaheadWrapper:x,userLanguage:E,windowWidth:S}=this.props,{errorMessage:I,focused:A,shouldDisableButton:P,showAltTextPrompt:M,showDiscardTweetConfirmation:O,showToxicReplyNudge:D,typeaheadActive:k}=this.state,N=!_&&k,L=g?0:this.props.activeComposerIndex,F=N||g?[c[L]]:c,B=this._areComposersValid(),V=this.hasNonCompliantQuote&&this.isRetweet,j=g?R.a:xs.a,z=g?{}:{onAnimateComplete:_?void 0:this._handleAnimateComplete},H=P||!B||V||this.isCommunityTweetFromProtectedUser,U=g&&kn.a.isOneColumnSquishedLayout(S)||this.isCommunityTweet,W=g&&kn.a.isOneColumnSquishedLayout(S)||this.isCommunityTweet||this.isExclusiveTweet;return l.a.createElement(R.a,{ref:this._setRootRef,style:!C&&ho.root},g?this._renderProgressBar():null,I&&l.a.createElement(R.a,{style:ho.inlineCallout},l.a.createElement(fe.a,{action:null!==(e=I.action)&&void 0!==e&&e.label&&null!==(t=I.action)&&void 0!==t&&t.link?{label:I.action.label,link:I.action.link}:void 0,text:I.text,type:"danger"})),l.a.createElement(R.a,{onFocus:this._handleFocus,style:[ho.content,C&&ho.contentInlineReply,_&&ho.contentModal]},p?this._renderReplyContext():null,r,l.a.createElement(j,z,F.map(((e,t)=>{const r=Object(Ze.h)(e.scheduledFor),C=c.indexOf(e),I=h(e,t,F),P=_||g?l.a.createElement(J.a,{behavioralEventContext:ro,disabled:H,onPress:this.handleTweetOrRetweet,size:"medium",style:ho.inlineSendButton,testID:_?Nn:Ln,type:"brandFilled"},Object(En.a)({inReplyToStatus:!!p,isSelfThreadReply:!!b,isQuoteTweet:!!this.isQuoteTweet,isRetweet:!!this.isRetweet,isScheduled:!!r,isThread:this.isThread})):null,M=this._getSingleComposerDataWithLatestText(e);return l.a.createElement(R.a,{key:e.key},l.a.createElement(fi,n()({addToast:s,additionalToolbarContent:P,audienceControlsValue:o,autoFocus:this.isInlineReply&&A,data:M,disableAddTweet:c.length>=25,editable:!y&&!!a,fetchAutotaggedLocationIfNeeded:this._fetchAutotaggedLocationIfNeeded,geoEnabled:u,hidePoll:U,hideScheduling:W,history:m,index:C,isActive:C===L&&!y,isCommunityTweetFromProtectedUser:this.isCommunityTweetFromProtectedUser,isExpanded:0!==t||this._shouldBeExpanded(),isInline:g,isInlineReply:this.isInlineReply,isLast:g||C===c.length-1,isReply:!!p||this.isInlineReply,isSelfThreadReply:!!b,isSuperFollowsCreator:f,keyCommandHandlers:this._getKeyCommandHandlers(),loggedInUser:a,onAddComposer:g?d:i,onFilesAdded:this._handleAddMediaFiles(C),onFocus:this._handleComposerFocus,onRemoveComposer:this._handleRemoveComposer,onRemoveMedia:this._handleMediaRemove,onTextChange:this._handleTextChange,onTextInputBlur:this._handleTextOnBlur(M.key,t),onTypeaheadStateChange:this._handleTypeaheadStateChange,positionCursorAtBeginning:!!v,ref:this._setComposerRef(C),richTextInputContext:w,scheduledFor:T,setActiveParentKey:this._setActiveParentKey,twitterTextConfigurationVersion:"version3",typeaheadActive:k,typeaheadWrapper:x,updateAudienceControlsValue:this._updateAudienceControlsValue,updateSingleComposer:this._updateSingleComposer,userLanguage:E,windowWidth:S},I)))}))),O?this._canSaveDraft?l.a.createElement(ws.a,{cancelButtonLabel:Ks,confirmButtonLabel:Ys,headline:Xs,onCancel:this._handleConfirmDiscardTweet,onConfirm:this._handleDraftTweet,onMaskClick:this._handleCancelDiscardTweet,text:Qs}):l.a.createElement(ws.a,{confirmButtonLabel:Ks,confirmButtonType:"destructiveFilled",headline:this.isThread?qs:Gs,onCancel:this._handleCancelDiscardTweet,onConfirm:this._handleConfirmDiscardTweet,text:$s}):null,M?this._renderAltTextPrompt():null,D?this._renderToxicReplyNudge():null,l.a.createElement(R.a,{style:y&&ho.mask})))}_scribe(e,t){const{analytics:a}=this.props;a.scribe({...e,data:t})}get isInlineReply(){const{parentTweetId:e}=this.props;return!!e}get isThread(){return this.props.composerData.length>1}get isRetweet(){const{composerData:e}=this.props,t=0===e[0].media.length,a=this._getSingleComposerDataWithLatestText(e[0]).text;return!this.isThread&&e[0].quotedStatus&&""===a&&t}get isQuoteTweet(){const{composerData:e}=this.props,t=this._getSingleComposerDataWithLatestText(e[0]).text;return!this.isThread&&e[0].quotedStatus&&t.length>0}get hasNonCompliantQuote(){var e;const{composerData:t}=this.props;return"non_compliant"===(null===(e=t[0].quotedStatus)||void 0===e?void 0:e.limited_actions)}get shouldShowDiscardConfirmation(){const{composerData:e,isSending:t}=this.props,{scheduledTweetId:a}=e[0],{showDiscardTweetConfirmation:i}=this.state,n=this._areComposersEmptyOrUnchanged();return!(t||n||i||a)}get shouldShowBackgroundSendConfirmation(){const{composerData:e,isSending:t}=this.props,a=e.some((e=>e.media.some((e=>e.uploading))));return t&&a}get shouldShowAltTextPrompt(){const{altTextNudgeType:e}=this.props;if(!this.context.featureSwitches.isTrue("responsive_web_alt_text_nudges_enabled")||e!==c.a.prompt)return!1;const{numberOfDescriptionsMissing:t}=this._getAltTextMetadata();return t>0}get _canSaveDraft(){const{composerData:e,isInline:t}=this.props;return!(this.isCommunityTweet||this.isExclusiveTweet||this.isThread||e[0].pollActive||0!==e[0].mediaTags.length||t)}get isCommunityTweet(){const{audienceControlsValue:e,inReplyToStatus:t}=this.props;return!!(null!=t&&t.community_id_str||"community_members"===e._type)}get isCommunityTweetFromProtectedUser(){var e;return!(!this.isCommunityTweet||null===(e=this.props.activeUser)||void 0===e||!e.protected)}get isReply(){return!(!this.props.inReplyToStatus&&!this.props.inReplyToStatusId)}get isExclusiveTweet(){const{audienceControlsValue:e}=this.props;return!!e.exclusivityControlValue}get tweetType(){return this.isQuoteTweet?lo.Quote:this.isThread?lo.Thread:this.isReply?lo.Reply:lo.Original}get isPreview(){var e,t;const{undoTweetSettings:a}=this.props;return(null==this||null===(e=this.context)||void 0===e||null===(t=e.userClaims)||void 0===t?void 0:t.isTrueAndEnabled("subscriptions_feature_1003"))&&("original"===this.tweetType||"reply"===this.tweetType)&&(!a||void 0===a[this.tweetType]||a[this.tweetType])}}o()(co,"defaultProps",{customizePropsForSingleComposerItem:(e,t,a)=>({}),externalMedia:[],externalMediaFiles:[],isSelfThreadReply:!1,isModal:!1,positionCursorAtBeginning:!1,prepopulatedText:"",setValidity:()=>{},typeaheadWrapper:Rn.a}),o()(co,"contextType",Q.a),o()(co,"_validateMedia",((e,t)=>{const{media:a}=e;return Object(u.c)(a.concat(t))}));const ho=v.a.create((e=>({root:{paddingBottom:e.spaces.space4},content:{paddingVertical:e.spaces.space4,backgroundColor:e.colors.cellBackground},contentModal:{borderBottomLeftRadius:e.borderRadii.xLarge,borderBottomRightRadius:e.borderRadii.xLarge},contentInlineReply:{paddingVertical:e.componentDimensions.gutterVertical},mask:{...v.a.absoluteFillObject},inlineSendButton:{marginLeft:e.spaces.space12},progressBar:{position:"absolute",borderTopLeftRadius:e.borderRadii.small,borderTopRightRadius:e.borderRadii.small},inlineCallout:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},hidden:{position:"absolute",visibility:"hidden",width:"100%"}})));t.a=Object(Oe.a)(vn(co))},iY63:function(e,t,a){"use strict";var i=a("ERkP"),n=a.n(i),s=a("Lsrn"),o=a("k/Ka");const r=(e={})=>Object(o.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[s.a.root,e.style],viewBox:"0 0 24 24"},n.a.createElement("g",null,n.a.createElement("path",{d:"M19.75 11H13V4.25c0-.553-.447-1-1-1s-1 .447-1 1V11H4.25c-.553 0-1 .447-1 1s.447 1 1 1H11v6.75c0 .553.447 1 1 1s1-.447 1-1V13h6.75c.553 0 1-.447 1-1s-.447-1-1-1z"})));r.metadata={width:24,height:24},t.a=r},lsKC:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var i=a("3XMw"),n=a.n(i);const s=n.a.g34f2c63,o=n.a.f70a36d0,r=n.a.d17df547,l=n.a.h735a98d,c=e=>{const t=e.inReplyToStatus&&!e.isSelfThreadReply;return e.isScheduled?l:t?r:e.isThread?o:s({verb:""})}},nV1z:function(e,t,a){"use strict";var i=a("ERkP"),n=a.n(i),s=a("Lsrn"),o=a("k/Ka");const r=(e={})=>Object(o.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[s.a.root,e.style],viewBox:"0 0 24 24"},n.a.createElement("g",null,n.a.createElement("path",{d:"M19.75 2H4.25C3.01 2 2 3.01 2 4.25v15.5C2 20.99 3.01 22 4.25 22h15.5c1.24 0 2.25-1.01 2.25-2.25V4.25C22 3.01 20.99 2 19.75 2zM5.25 20.033h-1.5v-2.5h1.5v2.5zm0-4.55h-1.5v-2.5h1.5v2.5zm0-4.55h-1.5v-2.5h1.5v2.5zm0-4.55h-1.5v-2.5h1.5v2.5zM17 20.5H7v-7.75h10v7.75zm0-9.25H7V3.5h10v7.75zm3.25 8.783h-1.5v-2.5h1.5v2.5zm0-4.55h-1.5v-2.5h1.5v2.5zm0-4.55h-1.5v-2.5h1.5v2.5zm0-4.55h-1.5v-2.5h1.5v2.5z"})));r.metadata={width:24,height:24},t.a=r},pidX:function(e,t,a){"use strict";a.d(t,"b",(function(){return l}));var i=a("3XMw"),n=a.n(i),s=a("3A2y");const o=n.a.b2e94283,r=["title","screen_name","text","url","hashtags","via"];t.a=e=>{const t=e.state||{},a=e.query||{},[i,n,s,l,c,d]=r.map((e=>t[e]||a[e])),h=[i,n&&`@${n.toString()}`,s,l,c&&c.toString().split(",").map((e=>`#${e}`)).join(" "),d&&o({viaScreenName:d})].filter(Boolean).join(" ");return h?`${h} `:void 0};const l=e=>Object(s.a)(e,r)},rziq:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return n}));const i="send-tweet",n="dismiss-composer"},sCk0:function(e,t,a){"use strict";var i=a("KEM+"),n=a.n(i),s=a("ERkP"),o=a.n(s),r=a("zfvc"),l=a("zrc3");const c=Object.freeze({in:"in",out:"out",static:"static"});class d extends o.a.Component{constructor(...e){super(...e),n()(this,"state",{isAnimating:!1,renderChildren:o.a.Children.toArray(this.props.children).map((e=>({status:c.static,child:e})))}),n()(this,"_handleEachAnimateComplete",(()=>{const{isAnimating:e}=this.state,{children:t,onAnimateComplete:a}=this.props;e&&(a&&a(),this.setState({renderChildren:o.a.Children.toArray(t).map((e=>({status:c.static,child:e}))),isAnimating:!1}))}))}static getDerivedStateFromProps(e,t){const a=((e,t)=>{let a=0,i=0;const n=[];for(;i<e.length;){if(a>=t.length){n.push(...e.slice(i).map((e=>({child:e,status:c.out}))));break}const s=t[a],o=e[i];if(s.key===o.key)n.push({child:s,status:c.static}),a+=1;else{const e=Object(l.a)(t,(e=>e.key===o.key));e>=0?(n.push(...t.slice(a,e).map((e=>({child:e,status:c.in}))),{child:t[e],status:c.static}),a=e+1):n.push({child:o,status:c.out})}i+=1}return a<t.length&&n.push(...t.slice(a).map((e=>({child:e,status:c.in})))),n})(t.renderChildren.map((e=>e.child)),o.a.Children.toArray(e.children));return{renderChildren:a,isAnimating:!a.every((e=>e.status===c.static))}}render(){const{renderChildren:e}=this.state;return e.map((({child:e,status:t})=>o.a.createElement(r.a,{animateMount:t!==c.static,key:e.key,onAnimateComplete:this._handleEachAnimateComplete,show:t!==c.out},e)))}}t.a=d},wa7Z:function(e,t,a){"use strict";var i=a("wAC9");t.a=e=>Object(i.a)({contextSuffix:"COMMUNITIES_MEMBERSHIPS_SLICE",getFetchApiEndpoint:e=>e.Communities.fetchCommunitiesMembershipsSlice,getEndpointParams:e=>e,sliceKey:`communitiesMembershipsSlice-${e}`})},yTN1:function(e,t,a){"use strict";var i=a("ERkP"),n=a.n(i),s=a("WOwf"),o=a("3XMw"),r=a.n(o),l=a("k6Ei"),c=a("rHpw"),d=a("+/1j"),h=a("MWbm");const u=r.a.c2fc878c,m=r.a.db11b27f,p=e=>e,g=c.a.create((({colors:e})=>({root:{alignItems:"flex-start",minHeight:30,minWidth:30},center:{alignItems:"center",justifyContent:"center",margin:"auto"},progressCircle:{transitionDuration:"0.2s",transitionProperty:"opacity"},hide:{opacity:0},text:{fontSize:13,lineHeight:.8,minWidth:16,textAlign:"center"},gray700:{color:e.gray700},red500:{color:e.red500}})));t.a=e=>{const{count:t,maxCount:a,formatNumber:i=p,warningCount:o}=e,r=a-t,_=r>=0?m({count:i(r)}):u({count:i(t-a)}),b=t>=o?n.a.createElement(d.a,{accessibilityAtomic:!0,accessibilityLiveRegion:"polite",style:c.a.visuallyHidden},_):null,y=Object(s.a)(r,a),f=t>=a?"red500":t>=o?"yellow500":"primary",C=n.a.createElement(l.a,{color:f,progress:y,size:t>=o?30:20,style:[g.progressCircle,r<=-10&&g.hide]}),v=t>=o?n.a.createElement(d.a,{style:[g.text,r>0?g.gray700:g.red500]},i(r)):null;return n.a.createElement(h.a,{style:[g.root,g.center]},b,C,n.a.createElement(h.a,{style:[c.a.absoluteFill,g.center]},v))}},yZqq:function(e,t,a){"use strict";var i=a("97Jx"),n=a.n(i),s=a("ERkP"),o=a.n(s),r=a("H7Rt"),l=a("3XMw"),c=a.n(l),d=a("MWbm"),h=a("t62R"),u=a("CKsB"),m=a("/yvb"),p=a("rHpw"),g=a("Zg3A"),_=a("Lsrn"),b=a("k/Ka");const y=(e={})=>Object(b.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[_.a.root,e.style],viewBox:"0 0 24 24"},o.a.createElement("g",null,o.a.createElement("path",{d:"M10.43 12.24c-1.37 0-2.89-.15-3.87-1.26-.82-.95-1.09-2.39-.81-4.43C6.13 3.7 7.88 2 10.43 2s4.3 1.7 4.68 4.55c.27 2.04.01 3.49-.81 4.42-.98 1.12-2.51 1.27-3.87 1.27zm0-8.73c-2.39 0-3.03 2.03-3.19 3.24-.21 1.56-.06 2.65.45 3.23.46.53 1.28.75 2.73.75 1.46 0 2.28-.22 2.74-.75.51-.58.66-1.67.45-3.23-.16-1.21-.79-3.24-3.18-3.24zm2.01 18.99H4.22c-.7 0-1.33-.3-1.75-.83-.43-.54-.57-1.26-.4-1.95.88-3.55 4.31-6.03 8.34-6.03.42 0 .75.34.75.75 0 .42-.34.75-.75.75-3.34 0-6.17 2.01-6.88 4.89-.06.25-.02.49.12.66.13.16.32.25.56.25h8.22c.42 0 .75.34.75.75.01.42-.32.76-.74.76zm9.15-10.87l-4.2 8.46c-.01.03-.02.05-.04.07-.02.06-.06.11-.1.15-.05.05-.1.09-.15.13h-.01c-.06.04-.12.06-.19.08-.07.02-.13.03-.2.03-.05 0-.11 0-.17-.02-.06-.01-.11-.03-.16-.06-.06-.03-.12-.07-.18-.12-.01-.01-.03-.02-.04-.03l-3.08-3.27c-.28-.3-.27-.78.04-1.06.3-.29.77-.27 1.06.03l2.34 2.48 3.74-7.53c.18-.37.63-.52 1-.34.37.17.52.63.34 1z"}),o.a.createElement("path",{d:"M17.1 20.44c.05-.04.1-.08.15-.13 0 .01-.02.03-.03.04-.04.04-.08.06-.12.09z"})));y.metadata={width:24,height:24};var f=y,C=a("boUI"),v=a("EweD");const w=c.a.g6185a9e,T=c.a.g2d04222,x=c.a.baffe39a,E=c.a.af293dc2,S=c.a.h1053f7e,I=c.a.bf994ab2,R=c.a.cf7f7e39,A=c.a.cfd2f35d,P=p.a.create((e=>({root:{flexDirection:"column",paddingTop:e.spaces.space16,paddingBottom:e.spaces.space4,borderRadius:e.borderRadii.xLarge},popover:{maxWidth:5*e.spacesPx.space64},modal:{borderRadius:e.borderRadii.none},title:{flexDirection:"column",paddingHorizontal:e.spaces.space16,marginBottom:e.spaces.space12},menuRow:{flexDirection:"row",paddingTop:e.spaces.space12,paddingBottom:e.spaces.space12,alignItems:"center",borderRadius:e.borderRadii.small},cancelButton:{marginHorizontal:e.spaces.space16,marginVertical:e.spaces.space16}})));var M=e=>{var t,a;const{dismiss:i,isModal:n,midConversationTweet:s,value:l}=e,c=t=>()=>{e.onChange(t),e.dismiss()},p=!!s,_=p&&!(null!=s&&null!==(t=s.entities)&&void 0!==t&&null!==(a=t.user_mentions)&&void 0!==a&&a.some((e=>e.id_str!==s.user.id_str)));let b=S;return _?b=I:p&&(b=R),o.a.createElement(d.a,{accessibilityDescribedBy:"conversation-controls-details",accessibilityLabelledBy:"conversation-controls-title",accessibilityRole:"dialog",style:[P.root,n?P.modal:P.popover]},o.a.createElement(d.a,{style:P.title},o.a.createElement(h.b,{nativeID:"conversation-controls-title",weight:"bold"},w),o.a.createElement(h.b,{color:"gray700",nativeID:"conversation-controls-details",size:"body"},T)),o.a.createElement(d.a,null,o.a.createElement(u.a,{Icon:g.a,actionText:x,isSelected:r.a.all===l,onClick:c(r.a.all),selectable:!0,style:P.menuRow,withIconAsThumbnail:!0}),o.a.createElement(u.a,{Icon:f,actionText:E,isSelected:r.a.community===l,onClick:c(r.a.community),selectable:!0,style:P.menuRow,withIconAsThumbnail:!0}),o.a.createElement(u.a,{Icon:_?C.a:v.a,actionText:b,isSelected:r.a.by_invitation===l,onClick:c(r.a.by_invitation),selectable:!0,style:P.menuRow,withIconAsThumbnail:!0}),e.isModal?o.a.createElement(m.a,{key:"button_cancel",onPress:i,size:"large",style:P.cancelButton,type:"primaryOutlined"},A):null))},O=a("OiMc"),D=a("efqG");t.a=e=>{const{children:t,controlled:a=!1,disabled:i}=e,[s,r]=o.a.useState(!1),l=o.a.useCallback((()=>r(!0)),[]),c=o.a.useCallback((()=>r(!1)),[]),d=a?s?O.a.VISIBILITY_BEHAVIOR.forceVisible:O.a.VISIBILITY_BEHAVIOR.forceHidden:void 0,h="function"==typeof t?t({openPopover:l,closePopover:c}):t;return o.a.createElement(D.a,{disabled:i,onDismiss:c,renderContent:(t,a)=>{const{children:i,controlled:s,...r}=e;return o.a.createElement(M,n()({},r,{dismiss:t,isModal:"sheet"===a}))},visibilityBehavior:d},h)}},ye3X:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));const i=Object.freeze({inline:"inline",prompt:"prompt",require:"require"})}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/shared~bundle.Compose~bundle.RichTextCompose~bundle.PlainTextCompose.8c039e25.js.map