(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{"+Bsv":function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),s=a("3XMw"),o=a.n(s),r=a("M2x3"),c="settingsAppBar",l=a("/yvb"),d=a("rHpw");const u=o.a.bb081ea1,p={viewType:"settings_button"},m=i.a.memo((({onPress:e,pullRight:t,to:a})=>i.a.createElement(l.a,{accessibilityLabel:u,behavioralEventContext:p,hoverLabel:{label:u},icon:i.a.createElement(r.a,null),link:a,onPress:e,pullRight:t,style:h.button,testID:c,type:"primaryText"}))),h=d.a.create((e=>({button:{marginVertical:`calc(-${e.spaces.space12})`}})));t.a=m},QuZr:function(e,t,a){"use strict";a.d(t,"a",(function(){return Y}));var n=a("97Jx"),i=a.n(n),s=a("KEM+"),o=a.n(s),r=a("ERkP"),c=a.n(r),l=a("oQhu"),d=a("z2Pn"),u=a("rxPX");const p=Object(l.a)(((e,t)=>t&&t.notificationsModule(e)));var m=a("FIs5"),h=a("ezF+"),b=a("xZXe"),f=a("QIgh"),y=a("8UdT"),g=a("AP4B");var _={loader:()=>Promise.all([a.e(4),a.e(221)]).then(a.bind(null,"RfPh")),loaderKey:"defaultNotificationLoader",strategy:a("XBtf").a.Critical};var w=h.e(_),T=a("b5s6"),v=a("rHpw"),E=a("VrCx"),I=a("yy6l");const A={[y.b.Notification]:w,[y.b.Tweet]:h.c({selectDisplayType:e=>e.content.displayType,handlers:{[E.a.Tweet]:Object(I.a)({allowDownvote:!0,component:b.a,createAdditionalProps:(e,{isUnread:t})=>({isUnread:t}),selectData:({entry:e,module:t})=>({isUnread:a=>t.selectIsUnread(a,e.entryId)}),withMuteConversation:!0}),[E.a.QuotedTweet]:Object(I.a)({component:T.a,createAdditionalProps:e=>({isCondensed:!0,style:x.quotedTweet})})}})};var M={...Object(f.a)({tweetDismissable:!0,withMuteConversation:!0}),...A,...g.a};const x=v.a.create((e=>({quotedTweet:{marginHorizontal:e.componentDimensions.gutterHorizontal,marginTop:0,marginBottom:e.componentDimensions.gutterVertical}})));var C=a("3XMw"),P=a.n(C),O=a("f42t"),L=a("EUHl"),S=a("5waQ"),j=a("VE3M"),k=a("yoO3"),R=a("fTQJ"),N=a("v6aA");const U={notifications_alt_a:[{height:200,uri:"https://abs.twimg.com/sticky/illustrations/empty-states/rooster-head-400x200.v1.png",width:400},{height:400,uri:"https://abs.twimg.com/sticky/illustrations/empty-states/rooster-head-800x400.v1.png",width:800},{height:600,uri:"https://abs.twimg.com/sticky/illustrations/empty-states/rooster-head-1200x600.v1.png",width:1200}],notifications_alt_b:[{height:200,uri:"https://abs.twimg.com/sticky/illustrations/empty-states/bell-400x200.v1.png",width:400},{height:400,uri:"https://abs.twimg.com/sticky/illustrations/empty-states/bell-800x400.v1.png",width:800},{height:600,uri:"https://abs.twimg.com/sticky/illustrations/empty-states/bell-1200x600.v1.png",width:1200}]},D={notifications_alt_a:{[S.a.All]:{headerMessage:P.a.b6a43e77,bodyMessage:P.a.f269c47d,buttonText:P.a.g6871092},[S.a.Mentions]:{headerMessage:P.a.e577e1a1,bodyMessage:P.a.b91e5a3a}},notifications_alt_b:{[S.a.All]:{headerMessage:P.a.g264f125,bodyMessage:P.a.a3420a9b,buttonText:P.a.g6871092},[S.a.Mentions]:{headerMessage:P.a.ef0b8028,bodyMessage:P.a.b91e5a3a}}},B=e=>["control","notifications_alt_a","notifications_alt_b"].includes(e),Q=e=>U[e],V=(e,t,a)=>{var n,i;return null===(n=D[t])||void 0===n||null===(i=n[a])||void 0===i?void 0:i[e]},F=(e,t)=>V("bodyMessage",e,t),H=P.a.eb75875d,J=P.a.e9f1fbcb,X=P.a.f287bb3a,G=P.a.h994ec4f,W=P.a.c06d4305,K=P.a.bfdb3c12,Z=P.a.h1d919eb,q=P.a.ib4510fd;class z extends c.a.Component{constructor(...e){super(...e),o()(this,"_getNewItemsPillLabel",(()=>{switch(this.props.notificationsType){case S.a.All:return q;default:return}})),o()(this,"_getEmptyMessageBody",(()=>{const e=this.context.featureSwitches.isTrue("responsive_web_reactions_enabled"),t=this.context.featureSwitches.getStringValue("responsive_web_notifications_empty_state_redesign_variant");switch(this.props.notificationsType){case S.a.Mentions:return B(t)&&"control"!==t?F(t,this.props.notificationsType):W;case S.a.Verified:return e?Z:K;default:return B(t)&&"control"!==t?F(t,this.props.notificationsType):e?G:X}})),o()(this,"_getEmptyMessageHeader",(()=>{const e=this.context.featureSwitches.getStringValue("responsive_web_notifications_empty_state_redesign_variant");return B(e)&&"control"!==e?(t=e,a=this.props.notificationsType,V("headerMessage",t,a)):J;var t,a})),o()(this,"_renderEmptyTimeline",(()=>{const e=this.context.featureSwitches.getStringValue("responsive_web_notifications_empty_state_redesign_variant");if(B(e)&&"control"!==e){const n=(t=e,a=this.props.notificationsType,V("buttonText",t,a));return c.a.createElement(m.a,i()({},n&&{buttonLink:"/i/connect_people",buttonText:n},{header:this._getEmptyMessageHeader(),imageVariants:Q(e),message:this._getEmptyMessageBody(),onButtonPress:this._handleEmptyTimelineButtonPress,onImpression:this._handleEmptyTimelineImpression}))}var t,a;return c.a.createElement(m.a,{header:this._getEmptyMessageHeader(),message:this._getEmptyMessageBody(),onImpression:this._handleEmptyTimelineImpression})})),o()(this,"_handleEmptyTimelineImpression",(()=>{const{analytics:e}=this.props;e.scribe({component:"empty_message",action:"impression"})})),o()(this,"_handleEmptyTimelineButtonPress",(()=>{const{analytics:e}=this.props;e.scribe({component:"empty_message",element:"primary_cta",action:"click"})})),o()(this,"_handleAtTop",(()=>{this._updateLastReadIfNeeded()}))}componentDidMount(){const{notificationsType:e,setNotificationsType:t}=this.props;t(e)}componentWillUnmount(){const{markAllAsRead:e,notificationsType:t}=this.props;this._updateLastReadIfNeeded(),t===S.a.All&&e()}render(){const{notificationsModule:e}=this.props;return e?c.a.createElement(k.a,null,c.a.createElement(R.a,{entryConfiguration:M,key:"notification-timeline",module:e,newTweetsPillLabel:this._getNewItemsPillLabel(),newTweetsPillMode:L.a.CLIENT,onAtTop:this._handleAtTop,renderEmptyState:this._renderEmptyTimeline,title:H})):null}_updateLastReadIfNeeded(){const{notificationsType:e,unreadCount:t,updateLastRead:a}=this.props;t&&a(e)}}o()(z,"contextType",N.a);const $=e=>Object(O.a)((e=>Object(u.a)().propsFromState((()=>({unreadCount:(t,{ntabData:a})=>{var n;return null===(n=p(e,a))||void 0===n?void 0:n.selectUnreadEntriesCount(t)}}))).adjustStateProps((({unreadCount:t},{ntabData:a})=>({ntabData:null,notificationsModule:p(e,a),notificationsType:e,unreadCount:t}))).propsFromActions((({ntabData:t})=>{var a;return{markAllAsRead:null===(a=p(e,t))||void 0===a?void 0:a.markAllAsRead,updateLastRead:t&&t.updateLastSeenCursor,setNotificationsType:d.j}})).withAnalytics({page:"ntab",section:e}))(e)(z),{ntabData:j.a}),Y=({notificationsType:e})=>$(e)},WR6I:function(e,t,a){"use strict";a.r(t),a.d(t,"NotificationsScreen",(function(){return D}));var n=a("ERkP"),i=a.n(n),s=a("v6aA"),o=a("es0u"),r=a("G6rE"),c=a("rxPX"),l=Object(c.a)().propsFromState((()=>({loggedInUser:r.e.selectLoggedInUser}))).adjustStateProps((({loggedInUser:e})=>({isLoggedInUserVerified:!!e&&e.verified}))),d=a("pnqf"),u=a("dwig"),p=a("0+qk"),m=a("3XMw"),h=a.n(m),b=a("5FtR"),f=a("wytG"),y=a("+Bsv"),g=a("VS6U"),_=a("7JQg"),w=a("mw9i"),T=a("k/OQ"),v=a("Ty5D");const E=h.a.eb75875d,I=h.a.f8321d82,A=h.a.cdb53d79,M=h.a.h3290871,x=h.a.a98ba778,C="/notifications",P="/notifications/mentions",O="/notifications/verified",L=i.a.createElement(y.a,{pullRight:!0,to:"/settings/notifications"}),S=h.a.eb75875d,j=Object(d.a)(Object(f.a)((()=>Promise.resolve().then(a.bind(null,"hCg+"))))),k=Object(d.a)(Object(f.a)((()=>Promise.resolve().then(a.bind(null,"lGAB"))))),R=Object(d.a)(Object(f.a)((()=>Promise.resolve().then(a.bind(null,"srGC"))))),N=[{to:C,key:I,label:I,retainScrollPosition:!1},{to:P,key:A,label:A,retainScrollPosition:!1}],U=[...N,{to:O,key:M,label:M,retainScrollPosition:!1}],D=e=>{const{featureSwitches:t}=i.a.useContext(s.a),a=t.isTrue("responsive_web_ntab_verified_mentions_vit_internal_dogfood"),{history:n,isLoggedInUserVerified:r,location:c}=e,l=r||a,d=i.a.createElement(v.e,null,i.a.createElement(v.c,{component:j,exact:!0,path:C}),i.a.createElement(v.c,{component:k,exact:!0,path:P}),i.a.createElement(v.c,{component:R,exact:!0,path:O}));return c.pathname!==O||l?i.a.createElement(g.a,{documentTitle:E,history:n,primaryContent:(()=>{const e=i.a.createElement(p.a,{history:n});return i.a.createElement(u.a,{component:w.a,fab:e},d)})(),rightControl:L,secondaryBar:(()=>{const e=l?U:N;return i.a.createElement(T.a,{accessibilityLabel:x,links:e})})(),sidebarContent:i.a.createElement(o.a,null),title:S}):i.a.createElement(b.a,{to:C})};t.default=Object(_.c)({page:"ntab"})(l(D))},b5s6:function(e,t,a){"use strict";var n=a("97Jx"),i=a.n(n),s=a("ERkP"),o=a.n(s),r=a("v6aA"),c=a("XOJV"),l=a("eSoz"),d=a("rxPX"),u=a("0KEI");const p=(e,t)=>t.tweetId,m=(e,t)=>{const a=t.tweetId,n=a&&c.a.select(e,a);return n?Object(l.g)(e,n):void 0};var h=Object(d.a)().propsFromState((()=>({community:m,hydratedTweet:c.a.createHydratedTweetSelector(p)}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(u.createLocalApiErrorHandlerWithContextFactory)("QUOTE_TWEET_CONTAINER"),fetchCommunityIfNeeded:l.c.fetchOneIfNeeded}))),b=a("YeIG"),f=a("uCxL"),y=a("x5Pi");const g=h((({community:e,createLocalApiErrorHandler:t,fetchCommunityIfNeeded:a,hydratedTweet:n,tweetId:s,...c})=>{const{featureSwitches:l,loggedInUserId:d}=o.a.useContext(r.a),u=null==n?void 0:n.community_id_str;o.a.useEffect((()=>{u&&Object(b.a)(e)&&a(u).catch(t())}),[e,u,t,a]);const p=l.isTrue("responsive_web_alt_text_badge_enabled"),m=n&&Object(y.f)(n,d,e),h=m&&Object(y.e)(m),g=l.isTrue("responsive_web_reactions_enabled");return o.a.createElement(f.a,i()({},c,{loggedInUserId:d,shouldShowAltLabelAlways:p,socialContextProps:h,tweet:n,withReactions:g}))}));t.a=g},f42t:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a("97Jx"),i=a.n(n),s=a("KEM+"),o=a.n(s),r=a("ERkP"),c=a.n(r);class l extends c.a.Component{constructor(...e){super(...e),o()(this,"state",{isLoaded:!1})}componentDidMount(){return this._isMounted=!0,this.load()}componentDidUpdate(e){return this.props.modules===e.modules?null:this.load()}componentWillUnmount(){this._isMounted=!1}load(){this.setState({isLoaded:!1});const{modules:e}=this.props,t=Object.keys(e);return Promise.all(t.map((t=>e[t]()))).then((e=>t.reduce(((t,a,n)=>(t[a]=e[n],t)),{}))).then((e=>{if(!this._isMounted)return null;this.setState({modules:e,isLoaded:!0})}))}render(){const{isLoaded:e}=this.state,t=e?this.state.modules:{};return c.a.Children.only(this.props.children(t||{}))}}const d=(e,t)=>a=>c.a.createElement(l,{modules:t},(t=>c.a.createElement(e,i()({},t,a))))},"hCg+":function(e,t,a){"use strict";a.r(t);var n=a("5waQ"),i=a("QuZr");t.default=Object(i.a)({notificationsType:n.a.All})},lGAB:function(e,t,a){"use strict";a.r(t);var n=a("5waQ"),i=a("QuZr");t.default=Object(i.a)({notificationsType:n.a.Mentions})},qJ6t:function(e,t,a){"use strict";a.r(t),a.d(t,"notificationsModule",(function(){return d})),a.d(t,"updateLastSeenCursor",(function(){return u}));var n=a("vWJI"),i=a("k49u"),s=a("0KEI"),o=a("UtAB"),r=a("fs1G"),c=a("5waQ"),l=a("ZNT5");const d=(e=c.a.All)=>Object(l.a)({timelineId:`notifications-${e}`,getEndpoint:e=>e.URT.fetchNotifications,getEndpointParams:t=>{const{polling:a,...n}=t;return{type:e,...n}},context:"FETCH_NOTIFICATIONS_TIMELINE",perfKey:"notifications",postFetchAction:o.a,staleIntervalMs:5e3}),u=(e=c.a.All)=>(t,a,{api:o})=>{const c=d(e),l=c&&n.getTopCursor(c.selectEntries(a()));if(l){const a={cursor:n.getValue(l),type:e},c=t(Object(s.createLocalApiErrorHandlerWithContextFactory)("APP_UPDATE_NOTIFICATION_LAST_READ")({[i.a.AppInReadOnlyMode]:{customAction:r.a}}));o.URT.updateNotificationsLastSeenCursor(a).catch(c)}};t.default=d(c.a.All)},srGC:function(e,t,a){"use strict";a.r(t);var n=a("5waQ"),i=a("QuZr");t.default=Object(i.a)({notificationsType:n.a.Verified})}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/bundle.Notifications.85fe73b5.js.map