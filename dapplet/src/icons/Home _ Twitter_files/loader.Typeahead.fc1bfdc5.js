(window.webpackJsonp=window.webpackJsonp||[]).push([[183],{"4ZbN":function(e,t,a){"use strict";t.a={deleteRecentSearchesDialog:"deleteRecentSearchesDialog",deleteSavedSearchDialog:"deleteSavedSearchDialog",typeaheadEmptySearch:"typeaheadEmptySearch",typeaheadRecentSearchesHeader:"typeaheadRecentSearchesHeader",typeaheadRecentSearchesItem:"typeaheadRecentSearchesItem",typeaheadSavedSearchesContainer:"typeaheadSavedSearchesContainer",typeaheadSavedSearchesHeader:"typeaheadSavedSearchesHeader",typeaheadSavedSearchesItem:"typeaheadSavedSearchesItem"}},"72nz":function(e,t,a){"use strict";a.r(t),a.d(t,"SearchBoxContainer",(function(){return Be}));var s=a("97Jx"),r=a.n(s),n=a("KEM+"),c=a.n(n),o=(a("MvUL"),a("ERkP")),i=a.n(o),l=a("+Kfv"),d=a("lnti"),h=a("wtjx"),p=a("rxPX");var u=Object(p.a)().propsFromActions((()=>({addQuery:h.a}))).withAnalytics({component:"search_box"}),m=a("Hw0q"),S=a("3XMw"),y=a.n(S),_=a("8jkQ"),b=a("u3ZE"),f=a("rRIm"),g=a("Rp9C"),v=a("hqKg"),I=a("3IPs"),w=a("M0jS"),E=a("G6rE"),C=a("k49u"),R=a("J4ZH"),x=a("0KEI"),D=a("v4XE"),k=a("kGix");const T=e=>Object(C.c)(e,C.a.GenericUserNotFound)||Object(C.c)(e,C.a.OtherUserSuspended)||Object(C.c)(e,C.a.AddressBookLookupNotFound);var O=Object(p.a)().propsFromState((()=>{const e=Object(v.createSelector)(h.g,E.e.selectFetchStatuses,((e,t)=>{const a=Object(d.a)(e.map((e=>{var a;const s=null===(a=e.user)||void 0===a?void 0:a.id;return s&&t[s]?{id:s,fetchStatus:t[s]}:void 0})));return Object(R.a)(a,(e=>e.fetchStatus))})),t=Object(v.createSelector)(e,(e=>(e[k.a.FAILED]||[]).map((e=>e.id)))),a=Object(v.createSelector)(e,E.e.selectErrors,((e,t)=>(e[k.a.FAILED]||[]).filter((({id:e})=>T(t[e]||{}))).map((e=>e.id)))),s=Object(v.createSelector)(e,E.e.selectErrors,((e,t)=>{const a=(e[k.a.FAILED]||[]).filter((({id:e})=>!T(t[e]||{})));return(e[k.a.LOADING]||[]).length>0?k.a.LOADING:(e[k.a.LOADED]||[]).length>0?k.a.LOADED:a.length>0?k.a.FAILED:k.a.NONE})),r=Object(v.createSelector)(h.g,(e=>e.map((e=>({...e,category:I.b.RecentSearch}))))),n=Object(v.createSelector)(D.d,(e=>e.map((e=>({keyword:{query:e.query},savedSearchId:e.id_str,category:I.b.SavedSearch})))));return{isRecentSearchDataLoaded:h.e,recentSearches:r,usersFetchStatus:s,invalidRecentSearchUserIds:a,failedRecentSearchUserIds:t,savedSearches:n}})).adjustStateProps((({failedRecentSearchUserIds:e,invalidRecentSearchUserIds:t,isRecentSearchDataLoaded:a,recentSearches:s,savedSearches:r,usersFetchStatus:n})=>{const c=!s.filter((({user:e})=>e&&t.indexOf(e.id)<0)).length,o=n!==k.a.LOADING&&a&&c?k.a.LOADED:n;return{failedRecentSearchUserIds:e,invalidRecentSearchUserIds:t,recentSearches:s,fetchStatus:o,savedSearches:r}})).propsFromActions((()=>({clearAll:h.b,createLocalApiErrorHandler:Object(x.createLocalApiErrorHandlerWithContextFactory)("SEARCH_ONE_CLICK"),deleteSavedSearch:D.a,fetchRecentSearchesIfNeeded:h.c,fetchSavedSearchesIfNeeded:D.b,fetchUsersIfNeeded:E.e.fetchManyIfNeeded,fetchUsersPresenceIfNeeded:w.b.fetchManyIfNeeded,removeQuery:h.d}))).withAnalytics({element:"typeahead"}),A=a("sYRn"),U=a("v//M"),L=a("7nmT"),F=a.n(L),H=a("hOZg"),N=a("5T6p"),j=a("MWbm"),q=a("/yvb"),M=a("rHpw");const P=y.a.e68b09b4;class V extends i.a.PureComponent{render(){const{id:e,onRemove:t,...a}=this.props;return e?i.a.createElement(j.a,{style:Q.root},i.a.createElement(N.a,a),i.a.createElement(q.a,{accessibilityLabel:P,icon:i.a.createElement(H.a,null),onPress:t,size:"small",style:Q.button,type:"brandText"})):null}get searchItemData(){const{id:e,image:t,supportText:a,title:s}=this.props;return{category:I.b.RecentSearch,query:e,recentSearchType:I.a.Event,queryMetadata:{id:e,image:t,title:s,supportText:a}}}}const Q=M.a.create((e=>({root:{flexDirection:"row",justifyContent:"space-between"},button:{alignSelf:"center"}})));var K=V,B=a("j7Bv"),$=a("5mJL"),z=a("t62R"),W=a("EHV7");const G=i.a.createElement(H.a,null),Z=y.a.e68b09b4;class X extends i.a.Component{render(){const{description:e,id:t,name:a,onRemove:s,withNewTypeaheadUI:r}=this.props;if(!t)return null;const n=r?"xxxLarge":"xLarge",c=i.a.createElement(B.a,{Icon:W.a,color:"primary",size:n,style:J.searchIcon});return i.a.createElement($.a,{avatarCell:c,avatarSize:n,cellStyle:J.bodyColumn},i.a.createElement(j.a,null,i.a.createElement(z.b,{numberOfLines:1,weight:"bold",withHashflags:!0},a),i.a.createElement(z.b,{color:"gray700",numberOfLines:1,withHashflags:!0},e)),i.a.createElement(q.a,{accessibilityLabel:Z,icon:G,onPress:s,size:"small",type:"brandText"}))}get searchItemData(){const{description:e,id:t,name:a}=this.props;return t?{category:I.b.RecentSearch,query:t,recentSearchType:I.a.Topic,queryMetadata:{id:t,name:a,description:e}}:null}}var Y=X;const J=M.a.create((e=>({bodyColumn:{alignItems:"center",flexDirection:"row",justifyContent:"space-between"},searchIcon:{marginRight:e.spaces.space12}}))),ee=(e,t)=>E.e.select(e,t.id),te=(e,t)=>Object(w.c)(e,t.id);var ae=Object(p.a)().propsFromState((()=>({user:ee,userSpace:te}))),se=a("v6aA"),re=a("IMA+");const ne=i.a.createElement(H.a,null),ce=y.a.e68b09b4,oe=y.a.fd06b02f;class ie extends i.a.Component{constructor(...e){super(...e),c()(this,"_handleAvatarClick",(()=>{const{userSpace:e}=this.props;e||this._handleClick()})),c()(this,"_handleClick",(()=>{const{index:e,onItemClick:t}=this.props,a=this.searchItemData;a&&t(a,e)}))}render(){const{onRemove:e,style:t,user:a,userSpace:s,withNewTypeaheadUI:r}=this.props,{featureSwitches:n}=this.context;if(!a)return null;const c=s&&n.isTrue("voice_rooms_recent_search_audiospace_ring_enabled")?s:void 0;c&&(c.accessibilityLabel=oe({screenName:a.screen_name}));const o=i.a.createElement(q.a,{accessibilityLabel:ce,icon:ne,onPress:e,size:"small",type:"brandText"});return i.a.createElement(re.a,{avatarSize:"xLarge",avatarUri:a.profile_image_url_https,decoration:o,displayMode:r?"ExperimentalUserTypeahead":"UserCompact",isProtected:a.protected,isVerified:a.verified,name:a.name,onAvatarClick:this._handleAvatarClick,onCellClick:this._handleClick,onScreenNameClick:this._handleClick,presenceIndicator:c,screenName:a.screen_name,style:t,userId:a.id_str,withInteractiveStyling:!1,withLink:!1,withUsernameCenterAligned:!0})}get searchItemData(){return this.props.user?{category:I.b.RecentSearch,link:this.props.user.screen_name,query:this.props.id,recentSearchType:I.a.User}:null}}c()(ie,"contextType",se.a);var le=ae.forwardRef(ie),de=a("oQhu"),he=a("hiGS"),pe=a("VwDm");const ue=i.a.createElement(H.a,null),me=i.a.createElement(he.a,null),Se=Object(de.a)((e=>e===I.b.SavedSearch?"destructiveText":"brandText")),ye=Object(de.a)((e=>e===I.b.SavedSearch?me:ue));class _e extends i.a.Component{constructor(...e){super(...e),c()(this,"_getButtonType",(()=>{const{category:e}=this.props;return Se(e)})),c()(this,"_getRemoveIcon",(()=>{const{category:e}=this.props;return ye(e)}))}render(){const{onRemove:e,query:t,withNewTypeaheadUI:a}=this.props,s=a?"xxxLarge":"xLarge",r=i.a.createElement(B.a,{Icon:pe.a,color:"neutral",size:s,style:be.searchIcon});return i.a.createElement($.a,{avatarCell:r,avatarSize:s,cellStyle:be.bodyColumn},i.a.createElement(z.b,{numberOfLines:1,withHashflags:!0},t),i.a.createElement(q.a,{accessibilityLabel:"",icon:this._getRemoveIcon(),onPress:e,size:"small",type:this._getButtonType()}))}get searchItemData(){const{category:e,query:t}=this.props;return{category:e,query:t,recentSearchType:e===I.b.RecentSearch?I.a.Keyword:void 0}}}const be=M.a.create((e=>({bodyColumn:{alignItems:"center",flexDirection:"row",justifyContent:"space-between"},searchIcon:{marginRight:e.spaces.space12}})));var fe=_e,ge=a("htQn");class ve extends i.a.Component{constructor(e,t){super(e,t),c()(this,"_renderSearchItem",(()=>{const{index:e,item:t,onItemClick:a}=this.props;return t.keyword?i.a.createElement(fe,{category:t.category,onRemove:this._handleOnRemove,query:t.keyword.query,ref:this._handleItemRef,withNewTypeaheadUI:this._withNewTypeaheadUI}):t.user?i.a.createElement(le,{id:t.user.id||"",index:e,onItemClick:a,onRemove:this._handleOnRemove,ref:this._handleItemRef,style:Ie.itemPadding,withNewTypeaheadUI:this._withNewTypeaheadUI}):t.topic?i.a.createElement(Y,{description:t.topic.description||"",id:t.topic.id,name:t.topic.name||"",onRemove:this._handleOnRemove,ref:this._handleItemRef,withNewTypeaheadUI:this._withNewTypeaheadUI}):t.event?i.a.createElement(K,{id:t.event.id,image:t.event.image||{url:"",height:0,width:0},onRemove:this._handleOnRemove,ref:this._handleItemRef,supportText:t.event.supportText||"",title:t.event.title||"",withNewTypeaheadUI:this._withNewTypeaheadUI}):null})),c()(this,"_handleItemRef",(e=>{this._itemRef=e})),c()(this,"_handleOnRemove",(e=>{const{index:t,item:a,onRemoveQuery:s}=this.props;s(a,t),e.stopPropagation()})),c()(this,"_handleOnClick",(()=>{const{index:e,item:t,onItemClick:a}=this.props;t.user||this.searchItemData&&a(this.searchItemData,e)})),this._withNewTypeaheadUI=this.context.featureSwitches.isTrue("responsive_web_account_search_readability_enabled")}render(){const{domId:e,item:t,testID:a}=this.props;return i.a.createElement(l.a,{viewType:"search_item"},i.a.createElement(ge.a,{accessibilityRole:"option",accessibilityState:{selected:!!e},focusable:!0,nativeID:e,onClick:this._handleOnClick,style:[Ie.root,e&&Ie.focused,!(null!=t&&t.user)&&Ie.itemPadding],testID:a},this._renderSearchItem()))}get searchItemData(){return this._itemRef?this._itemRef.searchItemData:null}}c()(ve,"contextType",se.a);const Ie=M.a.create((e=>({root:{cursor:"pointer"},itemPadding:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},focused:{backgroundColor:e.colors.gray0}})));var we=ve,Ee=a("4ZbN"),Ce=a("eb3s"),Re=a("MXDK");const xe=y.a.ee295fbe,De={headline:y.a.f45c425f,text:y.a.caae4dd9,confirmButtonLabel:y.a.dbd5d40f},ke=y.a.a8d68f61,Te=y.a.c6530778,Oe=y.a.e047b8fa,Ae=["user","keyword"];class Ue extends i.a.Component{constructor(e,t){super(e,t),c()(this,"_withNewTypeaheadUI",!1),c()(this,"_getRecentSearchItems",(()=>{const{failedRecentSearchUserIds:e,recentSearches:t}=this.props,{allowedRecentSearchItems:a}=this.state,s=t.filter((({user:t})=>!t||e.indexOf(t.id)<0)).filter((e=>Object.keys(e).some((e=>a.includes(e)))));return s.length>15?s.slice(0,15):s})),c()(this,"_render",(()=>{const{domId:e,savedSearches:t}=this.props,a=0===this._getNumOfSearchItems(),s=this._getRecentSearchItems();return a?i.a.createElement(j.a,{style:Le.emptyState,testID:Ee.a.typeaheadEmptySearch},i.a.createElement(z.b,{align:"center",color:"gray700"},xe)):i.a.createElement(j.a,{accessibilityRole:"listbox",nativeID:e},s.length>0?i.a.createElement(i.a.Fragment,null,i.a.createElement(j.a,{style:Le.header,testID:Ee.a.typeaheadRecentSearchesHeader},i.a.createElement(z.b,{numberOfLines:1,size:"headline1",weight:"bold"},ke),i.a.createElement(q.a,{onPress:this._handleClearAllClick,size:"xSmall",type:"brandText"},Oe)),s.map(((e,t)=>this._renderRecentSearchItem(e,t)))):null,t.length>0?i.a.createElement(i.a.Fragment,null,i.a.createElement(j.a,{accessibilityHidden:!0,style:[Le.header,Le.borderTop],testID:Ee.a.typeaheadSavedSearchesHeader},i.a.createElement(z.b,{numberOfLines:1,size:"headline1",weight:"bold"},Te)),this._renderSavedSearches()):null)})),c()(this,"_renderRecentSearchItem",((e,t)=>{const{ariaDescendantId:a}=this.props,s=this.state.focusIndex===t;return i.a.createElement(we,{domId:s?a:void 0,index:t,item:e,key:this._chooseKeyType(e,t),onItemClick:this._handleOnItemClick,onRemoveQuery:this._handleRemoveQuery,ref:s?this._setFocusedItemRef:void 0,testID:Ee.a.typeaheadRecentSearchesItem})})),c()(this,"_chooseKeyType",((e,t)=>e.keyword?`keyword_${e.keyword.query}`:e.user?`user_${e.user.id}`:e.topic?`topic_${e.topic.id}`:e.event?`event_${e.event.id}`:`${t}`)),c()(this,"_renderSavedSearches",(()=>{const{ariaDescendantId:e,savedSearches:t}=this.props,{focusIndex:a}=this.state,s=this._getRecentSearchItems(),r=[...t];return r.reverse(),i.a.createElement(j.a,{testID:Ee.a.typeaheadSavedSearchesContainer},r.map(((t,r)=>{const n=a===r+s.length;return i.a.createElement(we,{domId:n?e:void 0,index:r,item:t,key:t.savedSearchId,onItemClick:this._handleOnItemClick,onRemoveQuery:this._handleRemoveQuery,ref:n?this._setFocusedItemRef:void 0,testID:Ee.a.typeaheadSavedSearchesItem})})))})),c()(this,"_getNumOfSearchItems",(()=>{const{savedSearches:e}=this.props,t=this._getRecentSearchItems();return e.length+t.length})),c()(this,"_handleUsersRetry",(()=>{this._fetchUsersDetailsIfNeeded()})),c()(this,"_fetchUsersDetailsIfNeeded",(()=>{const{createLocalApiErrorHandler:e,fetchUsersIfNeeded:t,fetchUsersPresenceIfNeeded:a,invalidRecentSearchUserIds:s,recentSearches:r}=this.props,{featureSwitches:n,loggedInUserId:c}=this.context,o=((e,t)=>e.map((e=>{var t;return null==e||null===(t=e.user)||void 0===t?void 0:t.id})).filter(Boolean).filter((e=>t.indexOf(e)<0)))(r,s);t(o).catch(e({})),c&&n.isTrue("voice_rooms_recent_search_audiospace_ring_enabled")&&a(o).catch(e({}))})),c()(this,"_handleRemoveQuery",((e,t)=>{const{analytics:a,removeQuery:s}=this.props;switch(e.category){case I.b.RecentSearch:{const r={keyword:e.keyword,user:e.user,topic:e.topic,event:e.event};s(r),this._resetFocus();const n=g.a.forRecentSearchResult(r,t),c=this._handleRemoveAction(e);n&&a.scribe({action:c,data:{items:[n]}});break}case I.b.SavedSearch:this.setState({shouldShowDeleteSavedSearchConfirmation:!0,savedSearchIdToDelete:e.savedSearchId});break;default:return}})),c()(this,"_handleRemoveAction",(e=>e.user?"clear_user":e.topic?"clear_topic_interests":e.event?"clear_event":"clear_topic")),c()(this,"_handleClearAllClick",(()=>{this.setState({shouldShowClearAllConfirmationSheet:!0})})),c()(this,"_handleOnClearAllConfirm",(()=>{const{analytics:e,clearAll:t}=this.props;t(),e.scribeAction("clear_all"),this.setState({shouldShowClearAllConfirmationSheet:!1})})),c()(this,"_handleOnClearAllCancel",(()=>{this.setState({shouldShowClearAllConfirmationSheet:!1})})),c()(this,"_handleOnDeleteSavedSearchConfirm",(()=>{const{analytics:e,deleteSavedSearch:t,savedSearches:a}=this.props,{savedSearchIdToDelete:s}=this.state,r=a.findIndex((e=>e.savedSearchId===s)),n=a[r];if(s){t(s);const a=n&&g.a.forSavedSearchResult(n.keyword.query,r);a&&e.scribe({element:"saved_search",action:"delete",data:{items:[a]}})}this.setState({shouldShowDeleteSavedSearchConfirmation:!1,savedSearchIdToDelete:void 0})})),c()(this,"_handleOnDeleteSavedSearchCancel",(()=>{this.setState({shouldShowDeleteSavedSearchConfirmation:!1,savedSearchIdToDelete:void 0})})),c()(this,"_handleOnItemClick",((e,t)=>{const{onDismiss:a,onItemClick:s}=this.props;s(e,t),this._scribeClick(e,t),a&&a()})),c()(this,"_scribeRecentSearchImpression",(()=>{const{analytics:e,recentSearches:t}=this.props;if(t&&t.length){const a=Object(d.a)(t.map(((e,t)=>g.a.forRecentSearchResult(e,t))));e.scribe({action:"impression",data:{items:a}})}})),c()(this,"_scribeSavedSearchImpression",(()=>{const{analytics:e,savedSearches:t}=this.props;if(t&&t.length){const a=Object(d.a)(t.map(((e,t)=>g.a.forSavedSearchResult(e.keyword.query,t))));e.scribe({element:"saved_search",action:"impression",data:{items:a}})}})),c()(this,"_scribeClick",((e,t)=>{const{analytics:a}=this.props;switch(e.category){case I.b.SavedSearch:{const s=g.a.forSavedSearchResult(e.query,t);a.scribe({element:"typeahead",action:"click",data:{targets:[s]}});break}case I.b.RecentSearch:{let s;e.recentSearchType&&(s=e.recentSearchType===I.a.User?{user:{type:I.a.User,id:e.query}}:e.recentSearchType===I.a.Event&&e.queryMetadata&&e.queryMetadata.title?{event:{...e.queryMetadata,type:I.a.Event,id:e.query}}:e.recentSearchType===I.a.Topic&&e.queryMetadata&&e.queryMetadata.name?{topic:{...e.queryMetadata,type:I.a.Topic,id:e.query}}:{keyword:{type:I.a.Keyword,query:e.query}});const r=s&&g.a.forRecentSearchResult(s,t);r&&a.scribe({action:"click",data:{targets:[r]}});break}}})),c()(this,"_setFocusedItemRef",(e=>{this._focusedItemRef=e,e&&this._shouldScrollToFocusedItem&&(Object(Re.c)(this._getScrollParent(),this._getFocusedItem()),this._shouldScrollToFocusedItem=!1)})),c()(this,"hasFocusedItem",(()=>this._getNumOfSearchItems()>0)),c()(this,"selectFocusedItem",(()=>{if(this.hasFocusedItem()){const e=this._focusedItemRef&&this._focusedItemRef.searchItemData;e&&this._handleOnItemClick(e,this.state.focusIndex)}})),c()(this,"_setFocusIndex",((e,t)=>{const{onItemFocusChanged:a}=this.props;this._shouldScrollToFocusedItem=t,this.setState({focusIndex:e}),a&&a()})),c()(this,"_resetFocus",(()=>{this._setFocusIndex(-1)})),c()(this,"focusNext",(()=>{const{focusIndex:e}=this.state,t=this._getNumOfSearchItems();if(0===t)return;const a=e+1>=t?0:e+1;this._setFocusIndex(a,!0)})),c()(this,"focusPrevious",(()=>{const{focusIndex:e}=this.state,t=this._getNumOfSearchItems();if(0===t)return;const a=e-1<0?t-1:e-1;this._setFocusIndex(a,!0)}));const{featureSwitches:a}=this.context;var s,r;this.state={focusIndex:0,shouldShowClearAllConfirmationSheet:!1,shouldShowDeleteSavedSearchConfirmation:!1,allowedRecentSearchItems:(s=!0===a.getValueWithoutScribeImpression("responsive_web_recent_searches_topics_enabled"),r=!0===a.getValueWithoutScribeImpression("responsive_web_recent_searches_events_enabled"),[...Ae,s?"topic":"",r?"event":""])},this._withNewTypeaheadUI=this.context.featureSwitches.isTrue("responsive_web_account_search_readability_enabled")}componentDidMount(){const{createLocalApiErrorHandler:e,fetchRecentSearchesIfNeeded:t,fetchSavedSearchesIfNeeded:a,recentSearches:s,savedSearches:r}=this.props;t(),a().catch(e({})),this._fetchUsersDetailsIfNeeded(),this._scribeRecentSearchImpression(),this._scribeSavedSearchImpression(),(s&&s.length||r&&r.length)&&this._resetFocus()}componentDidUpdate(e){const{recentSearches:t,savedSearches:a}=this.props;e.recentSearches!==t&&(this._fetchUsersDetailsIfNeeded(),this._resetFocus(),this._scribeRecentSearchImpression()),e.savedSearches!==a&&(this._resetFocus(),this._scribeSavedSearchImpression())}render(){const{fetchStatus:e,style:t}=this.props,{shouldShowClearAllConfirmationSheet:a,shouldShowDeleteSavedSearchConfirmation:s}=this.state;return i.a.createElement(j.a,{style:t},i.a.createElement(U.a,{fetchStatus:e,onRequestRetry:this._handleUsersRetry,render:this._render}),a?i.a.createElement(Ce.a,{confirmButtonLabel:De.confirmButtonLabel,confirmButtonType:"destructiveFilled",headline:De.headline,onCancel:this._handleOnClearAllCancel,onConfirm:this._handleOnClearAllConfirm,testID:Ee.a.deleteRecentSearchesDialog,text:De.text}):null,s?i.a.createElement(A.a,{onCancel:this._handleOnDeleteSavedSearchCancel,onConfirm:this._handleOnDeleteSavedSearchConfirm}):null)}_getScrollParent(){if(!this._scrollParent){const e=Object(Re.a)(F.a.findDOMNode(this));this._scrollParent=e===window?null:e}return this._scrollParent}_getFocusedItem(){const e=this._focusedItemRef&&F.a.findDOMNode(this._focusedItemRef);return e instanceof Element?e:null}}c()(Ue,"contextType",se.a);const Le=M.a.create((e=>({emptyState:{padding:e.spaces.space12,paddingTop:e.spaces.space20},borderTop:{borderTopColor:e.colors.borderColor,borderTopStyle:"solid",borderTopWidth:1},header:{alignItems:"center",flexDirection:"row",justifyContent:"space-between",paddingVertical:e.componentDimensions.gutterVertical,paddingHorizontal:e.componentDimensions.gutterHorizontal}})));var Fe=O.forwardRef(Ue),He="SearchBox_Search_Input",Ne=a("TnY3"),je=a("GZwR"),qe=a("4e/K");const Me=y.a.ib2e46ee,Pe=y.a.hbc99b02,Ve=/^(\w+)$/,Qe=[je.a.Events,je.a.Users,je.a.Topics],Ke=e=>"@"===e[0]?e.substring(1):e;class Be extends i.a.Component{constructor(e,t){var a;super(e,t),c()(this,"_withNewTypeaheadUI",!1),c()(this,"_reorderResults",((e,t,a,s)=>Object(d.a)([e,t.length?t:void 0,a.length?a:void 0,s.length?s:void 0]))),c()(this,"_renderSearchBoxEmptyState",(e=>i.a.createElement(Fe,r()({},e,{onItemClick:this._handleSearchItemClick})))),c()(this,"_handleSearchItemClick",(({category:e,link:t,query:a,queryMetadata:s,recentSearchType:r})=>{const{addQuery:n}=this.props;e===I.b.SavedSearch?this._submitQuery({query:a,shouldAddToRecentSearch:!1,src:b.a.SavedSearchClick}):r===I.a.Keyword?this._submitQuery({query:a,shouldAddToRecentSearch:!0,src:b.a.RecentSearchClick}):r===I.a.Event?(this._routeTransition({pathname:`/i/events/${a}`}),s&&s.title&&n({event:{...s,id:a,type:I.a.Event}})):r===I.a.Topic?(this._routeTransition({pathname:`/i/topics/${a}`}),s&&s.name&&n({topic:{...s,id:a,type:I.a.Topic}})):t&&(this._routeTransition({pathname:`/${t}`}),n({user:{id:a,type:I.a.User}}))})),c()(this,"_handleSearchShortcut",(e=>{const t=this._inputRef;t&&(e&&t.setQuery(e),t.focus())})),c()(this,"_getUserExactMatch",(({hasResults:e,isLoaded:t,query:a})=>{const s=Ke(a);if(s.match(Ve))return{id:`${a}_no_result_user`,type:je.b.NoResult,data:{text:Pe({screenName:s}),type:"user"}}})),c()(this,"_handleOnDismiss",(()=>{const{history:e}=this.props,{location:t}=e,a=t.state||{};if(a.searchFocused){const s={...t,state:{...a,lockScroll:!1,searchFocused:!1}};e.replace(s)}})),c()(this,"_handleOnFocus",(()=>{const{analytics:e,history:t}=this.props,{location:a}=t,s=a.state||{};if(!s.searchFocused){const r={...a,state:{...s,searchFocused:!0,lockScroll:!0}};e.scribe({action:"focus_field"}),t.push(r)}})),c()(this,"_handleChange",(e=>{this.setState({query:e})})),c()(this,"_handleTypeaheadSubmit",(()=>{const{items:e,query:t}=this.state,{analytics:a}=this.props;/^\s*$/.test(t)||(a.scribe({action:"search",data:{items:g.a.forTypeaheadResults(e),search_details:{query:t}}}),this._submitQuery({query:t,shouldAddToRecentSearch:!0}))})),c()(this,"_handleItemClick",((e,t)=>{const{addQuery:a}=this.props,{query:s}=this.state;switch(e.type){case je.b.User:if(e.data.id_str){a({user:{id:e.data.id_str,type:I.a.User}})}this._routeTransition({pathname:`/${e.data.screen_name}`});break;case je.b.Topic:case je.b.Hashtag:this._submitQuery({query:e.data.topic,shouldAddToRecentSearch:!0,src:b.a.TypeaheadClick});break;case je.b.Event:e.data&&e.data.url?this._routeTransition({pathname:_.b.parseInternalUrl(e.data.url)}):this._submitQuery({query:e.data.topic,src:b.a.TypeaheadClick});break;case je.b.NoResult:{const{type:t}=e.data;"user"===t?this._routeTransition({pathname:`/${Ke(s)}`}):"topic"===t&&this._submitQuery({query:s,shouldAddToRecentSearch:!0,src:b.a.TypeaheadClick});break}}})),c()(this,"_handleItemsChanged",(e=>{this.setState({items:e})})),c()(this,"_routeTransition",(({params:e,pathname:t,query:a,src:s})=>{const{history:r,location:n}=this.props,c={...n,pathname:t,search:"",query:e||(a?{q:a,src:s}:{}),state:{...n.state,searchFocused:!1,lockScroll:!1}};r.replace(c)})),c()(this,"_submitQuery",(({query:e,shouldAddToRecentSearch:t=!1,src:a=b.a.Typed})=>{const{addQuery:s,mode:r,onSubmit:n,searchFilters:c,searchRoute:o}=this.props;if(n&&n(e,a,this.state.lastSubmittedQuery===e),t){s({keyword:{query:e,type:I.a.Keyword}})}const i=Object(I.g)({query:e,querySrc:a,mode:r,searchFilters:c});this._routeTransition({pathname:o,params:i,src:a}),this.setState({lastSubmittedQuery:e})})),c()(this,"_setInputRef",(e=>{this._inputRef=e})),this.state={query:e.initialValue,items:[],lastSubmittedQuery:Object(m.a)(null===(a=e.location.query)||void 0===a?void 0:a.q)},this._withNewTypeaheadUI=this.context.featureSwitches.isTrue("responsive_web_account_search_readability_enabled")}componentDidMount(){const{shouldHandleSearchShortcut:e}=this.props;e&&(this._unregisterSearchShortcutHandler=Object(f.b)(this._handleSearchShortcut))}componentWillUnmount(){this._unregisterSearchShortcutHandler&&this._unregisterSearchShortcutHandler()}render(){const{forceVdlDisable:e,history:t,isCompact:a,isInSidebar:s,isOnHomepage:r,location:n,placeholder:c}=this.props,{query:o}=this.state,{location:d}=t,h=d.state||{},{searchPrefill:p}=n.state||{},u=this.props.initialValue||p;let m;const S=!!n.state&&!!n.state.searchFocused;return h.searchFocused&&(m=this.context.featureSwitches.isTrue("responsive_web_search_reorder_typeahead_results_enabled")),i.a.createElement(l.a,{viewType:"search_field"},i.a.createElement(j.a,{style:$e.root},i.a.createElement(qe.default,{filter:Qe,forceVdlDisable:e,getTopicExactMatch:o?je.f:void 0,getUserExactMatch:o?this._getUserExactMatch:void 0,initialValue:u,inputStyle:$e.input,isCompact:a,isInSidebar:s,isOnHomepage:r,onDismiss:this._handleOnDismiss,onFocus:this._handleOnFocus,onItemClick:this._handleItemClick,onItemsChanged:this._handleItemsChanged,onQueryChange:this._handleChange,onSubmit:this._handleTypeaheadSubmit,orderResults:m?this._reorderResults:void 0,placeholder:c,ref:this._setInputRef,renderEmptyState:this._renderSearchBoxEmptyState,rounded:!0,shouldAutoFocus:S,shouldClearOnSelect:!0,shouldDeferPrefetch:!0,source:je.d.SearchBox,testID:He,withFixedPositioning:!0,withFocusStyling:!0,withSectionDivider:!this._withNewTypeaheadUI})))}}c()(Be,"defaultProps",{initialValue:"",isInSidebar:!1,placeholder:Me,searchRoute:"/search",forceVdlDisable:!0}),c()(Be,"contextType",se.a);const $e=M.a.create((e=>({root:{alignItems:"stretch",flexBasis:0,flexDirection:"row",flexGrow:1},input:{flexShrink:1}})));t.default=Object(Ne.a)(u(Be))},UnyZ:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));const s=Object.freeze({Active:"active",Expand:"expand",Remove:"remove"})},V2l4:function(e,t,a){"use strict";a.r(t),a.d(t,"UserPicker",(function(){return g}));var s=a("KEM+"),r=a.n(s),n=a("ERkP"),c=a.n(n),o=a("ZcYN"),i=a("3XMw"),l=a.n(i),d="searchPeople",h=a("4e/K"),p=a("MWbm"),u=a("jhWN"),m=a("aV/s"),S=a("rHpw"),y=a("GZwR");const _=[y.a.Users],b=l.a.fc9dd578,f=l.a.gdb7bc24;class g extends c.a.Component{constructor(e,t){super(e,t),r()(this,"_renderSelectedUsersList",(()=>{const{selectedUsers:e}=this.props;return c.a.createElement(p.a,{style:v.selectedUsersList},e.map(this._renderSelectedUserPill))})),r()(this,"_renderSelectedUserPill",(e=>{const{withCompactPills:t}=this.props,a=this.props.onRemove.bind(this,e),s=e.type===y.b.User?c.a.createElement(u.a,{accessibilityHidden:!0,focusable:!1,size:"custom",uri:e.data.profile_image_url_https}):void 0;return c.a.createElement(m.a,{accessibilityLabel:f({name:e.data.name}),avatar:s,compact:t,key:e.id,mode:"remove",onClick:a,style:v.selectionPill,text:e.data.name})})),r()(this,"_getItemIsDisabled",(e=>{const{getItemIsDisabled:t,preselectedUsers:a}=this.props;return a.indexOf(e.id)>=0||!(!t||!t(e))})),r()(this,"_getItemDisabledMessage",(e=>{const{getItemDisabledMessage:t,preselectedUsers:a}=this.props;return a.indexOf(e.id)>=0?void 0:t?t(e):void 0})),r()(this,"_handleQueryChange",(e=>{const{onQueryChange:t}=this.props;this.setState({query:e}),t&&t(e)})),r()(this,"_handleOnSelect",(e=>{const{onSelect:t}=this.props;t&&t(e)})),this.state={query:""}}render(){const{injections:e,preselectedUsers:t,renderCallout:a,renderHeader:s,selectedUsers:r,shouldAutoFocus:n,source:i}=this.props,l=r.map((({id:e})=>e)).concat(t);return c.a.createElement(p.a,{style:v.root},c.a.createElement(h.default,{alwaysOpen:!0,disableClearButton:!0,filter:_,getItemDisabledMessage:this._getItemDisabledMessage,getItemIsDisabled:this._getItemIsDisabled,injectedItems:e,isModal:!0,onItemClick:this._handleOnSelect,onQueryChange:this._handleQueryChange,placeholder:b,renderCallout:a,renderHeader:s,renderInSearchField:r.length?this._renderSelectedUsersList:void 0,renderUserDecoration:o.a,selectedItems:l,shouldAutoFocus:n,shouldClearOnSelect:!0,shouldFocusOnClear:!0,source:i,testID:d,withSectionDivider:!1}))}}r()(g,"defaultProps",{preselectedUsers:[],shouldAutoFocus:!0,withCompactPills:!1});const v=S.a.create((e=>({root:{flex:1},selectionPill:{margin:e.spaces.space4,maxWidth:`calc(100% - ${e.spaces.space16})`},selectedUsersList:{flexDirection:"row",flexWrap:"wrap",padding:e.spaces.space4}})));t.default=g},"aV/s":function(e,t,a){"use strict";var s=a("KEM+"),r=a.n(s),n=a("ERkP"),c=a.n(n),o=a("t62R"),i=a("3XMw"),l=a.n(i),d=a("I4+6"),h=a("cm6r"),p=a("UnyZ"),u=a("rHpw"),m=a("MWbm"),S=a("hOZg"),y=a("iY63"),_=a("IMYl");const b={active:l.a.e557ad8d,expand:l.a.e3a58c27,remove:l.a.h517e8d8};class f extends c.a.PureComponent{constructor(...e){super(...e),r()(this,"_handleSecondaryClick",(()=>{const{secondaryAction:e}=this.props;e&&e.onSecondaryClick()}))}render(){const{accessibilityLabel:e,avatar:t,compact:a,disabled:s,link:r,mode:n,onClick:i,secondaryAction:l,selected:p,style:S,text:y}=this.props,_=this._renderIcon(!0,n),f=l&&this._renderIcon(!1,l.mode),v=[g.root,a&&g.compact,s&&g.disabled,p&&g.selected,S],I=[g.content,_&&g.withIcon,t&&(a&&g.withAvatarImageCompact||g.withAvatarImage)],w=d.a.generate({backgroundColor:p?u.a.theme.colors.primary:"transparent",color:p?u.a.theme.colors.white:u.a.theme.colors.primary});return c.a.createElement(m.a,{style:v},c.a.createElement(h.a,{accessibilityLabel:e||(n?b[n]:""),disabled:s,interactiveStyles:w,link:r,onPress:i,style:I},this._renderAvatar(),c.a.createElement(o.b,{color:p?"whiteOnColor":"normal",numberOfLines:1,selectable:!1,style:g.text,weight:"bold"},y),_),l?c.a.createElement(h.a,{accessibilityLabel:l.accessibilityLabel||(l.mode?b[l.mode]:""),disabled:s||l.disabled,hoverLabel:{label:l.hoverLabel||(l.mode?b[l.mode]:"")},interactiveStyles:w,onPress:this._handleSecondaryClick,style:g.secondaryControl},c.a.createElement(m.a,{style:g.secondaryBorder},f)):null)}_renderIcon(e=!0,t){const{selected:a}=this.props,s=[g.icon,a&&g.iconSelected],r=[g.icon];switch(t){case p.a.Remove:return c.a.createElement(S.a,{style:[g.dismissIcon,e&&s]});case p.a.Expand:return c.a.createElement(y.a,{style:e?s:r});case p.a.Active:return c.a.createElement(_.a,{style:s});default:return null}}_renderAvatar(){const{avatar:e,compact:t}=this.props;return e?c.a.createElement(m.a,{style:[g.avatarContainer,t?g.avatarCompact:g.avatar]},e):null}}r()(f,"defaultProps",{compact:!1,disabled:!1,selected:!1});const g=u.a.create((e=>({root:{backgroundColor:e.colors.cellBackground,borderColor:e.colors.gray200,borderRadius:e.borderRadii.infinite,borderStyle:"solid",borderWidth:"1px",flexDirection:"row",minHeight:e.spaces.space40,overflow:"hidden"},content:{alignItems:"center",flexDirection:"row",flexGrow:1,flexShrink:1,paddingHorizontal:e.spaces.space16},text:{width:"100%"},compact:{minHeight:e.spaces.space32},disabled:{borderColor:e.colors.gray50},selected:{backgroundColor:e.colors.primary,borderColor:e.colors.primary},avatar:{height:e.spaces.space32,width:e.spaces.space32},avatarCompact:{height:e.spaces.space24,width:e.spaces.space24},avatarContainer:{justifyContent:"center",marginRight:e.spaces.space8},withAvatarImage:{paddingLeft:`calc(${e.spaces.space2} * 2)`},withAvatarImageCompact:{paddingLeft:`calc(${e.spaces.space1} * 3)`},icon:{color:e.colors.primary,flexShrink:0,marginLeft:e.spaces.space12},iconSelected:{color:e.colors.whiteOnColor},withIcon:{paddingRight:e.spaces.space12},dismissIcon:{color:e.colors.gray300},secondaryControl:{flexShrink:0,justifyContent:"center"},secondaryBorder:{borderLeftColor:e.colors.borderColor,borderLeftWidth:e.borderWidths.small,paddingHorizontal:e.spaces.space12}})));t.a=f},bJYH:function(e,t,a){"use strict";a.r(t),a.d(t,"GenericTypeaheadComposeWrapper",(function(){return w}));var s=a("KEM+"),r=a.n(s),n=a("ERkP"),c=a.n(n),o=a("oEoC"),i=a("oQhu"),l=a("7nmT"),d=a.n(l),h=a("WPfJ"),p=a("OEYw"),u=a("MWbm"),m=a("Irs7"),S=a("0FVZ"),y=a("xoZN"),_=a("7N4s"),b=a("rHpw"),f=a("GZwR");const g=[f.a.Users],v=[f.a.Topics];let I=0;class w extends c.a.Component{constructor(e,t){super(e,t),r()(this,"_typeaheadActive",!1),r()(this,"_renderTypeaheadDropdown",(e=>{const{contextText:t,isInlineReply:a,onSelectItem:s,source:r}=this.props,{isModal:n}=this.context,o=e.resultType===f.a.Topics?"hashtag":void 0,i=c.a.createElement(p.a,{ariaDescendantId:this.state.ariaDescendantId,contextText:t,domId:this._dropdownDomId,filter:this._getFilter(e.resultType),maxTopics:8,onItemClick:s,onItemFocusChanged:this._handleItemFocusChanged,query:e.word,ref:this._handleTypeaheadRef,source:r,style:this._calcStyle(),topicType:o,withItemAlwaysSelected:!0});return n||a?c.a.createElement(S.a.HalfSheet,null,c.a.createElement(c.a.Fragment,null,c.a.createElement(u.a,{onClick:this._handleDismiss,style:E.mask}),i)):c.a.createElement(c.a.Fragment,null,c.a.createElement(u.a,{onClick:this._handleDismiss,style:E.mask}),i)})),r()(this,"render",(()=>{const{children:e,query:t}=this.props,a=c.a.cloneElement(e,{ariaAutocomplete:"list",ariaControls:this._dropdownDomId,ariaActiveDescendant:this.state.ariaDescendantId,ref:t=>{this._textInputNode=d.a.findDOMNode(t),this._textInputRef=t;const{ref:a}=e;a&&a(t)}});return c.a.createElement(u.a,{style:E.inputContainer},c.a.createElement(y.a,{onKeyDown:this._handleKeyDown},a,this._textInputNode&&t?this._renderTypeaheadDropdown(t):null))})),r()(this,"_getFilter",(e=>"users"===e?g:v)),r()(this,"_calcStyle",(()=>{const{isModal:e}=this.context,{isInline:t,isInlineReply:a}=this.props,s=this._textInputNode,r=window.innerHeight,n=window.innerWidth,c=this._textInputRef&&this._textInputRef.getTextInputHeight()||20;if(s instanceof window.HTMLElement){if(e||t){const t=s.getBoundingClientRect();return[this._getDropdownPositioningStyle(r,n,t.top,t.top+c,t.left,e,!!a),E.dropdownStyle]}return[this._getModalFullViewportStyle(c),E.modalFullViewportStyle]}return[this._getDropdownPositioningStyle(c,n,0,0,0,e,!!a),E.dropdownStyle]})),r()(this,"_handleKeyDown",(e=>{const{selectedItem:t}=this.state,{onSelectItem:a,query:s}=this.props,{key:r}=e;o.g(e)&&s&&("ArrowDown"===r?(this._typeaheadRef&&this._typeaheadRef.focusNext(),e.preventDefault()):"ArrowUp"===r?(this._typeaheadRef&&this._typeaheadRef.focusPrevious(),e.preventDefault()):"Enter"===r||"Tab"===r?t&&(a(t),e.preventDefault()):"Escape"===r&&(this._handleDismiss(),e.preventDefault()))})),r()(this,"_handleItemFocusChanged",(e=>this.setState({ariaDescendantId:o.b(),selectedItem:e}))),r()(this,"_handleTypeaheadRef",(e=>{this._typeaheadRef=e})),r()(this,"_handleDismiss",(()=>{this._textInputRef&&this._textInputRef.focus(),this.props.onDismiss()})),r()(this,"_getDropdownHeight",Object(i.a)(((e,t)=>{const a=50*e/100;return a>t?t:a}))),r()(this,"_getModalOrInlineReplyDropdownStyles",Object(i.a)(((e,t,a)=>e?{bottom:`${a}px`}:{top:`${t}px`}))),r()(this,"_getDropdownPositioningStyle",Object(i.a)(((e,t,a=0,s=0,r=0,n=!1,c=!1)=>{const o=t-r-10,i=e-s,l=a,d=i/e<.5&&l>i,h={maxWidth:`${o}px`,minWidth:`${Math.min(o,300)}px`,maxHeight:`${d?this._getDropdownHeight(e,l-10):this._getDropdownHeight(e,i-10)}px`};return n||c?{...h,position:"fixed",left:`${r}px`,...this._getModalOrInlineReplyDropdownStyles(d,s,e-a)}:d?{...h,bottom:"100%",position:"absolute"}:{...h,top:"100%",position:"absolute"}}))),r()(this,"_getModalFullViewportStyle",Object(i.a)((e=>({position:"absolute",top:`${e||0}px`,overflowX:"hidden",overflowY:"auto"})))),this.state={ariaDescendantId:o.b()},this._dropdownDomId=`typeaheadDropdownWrapped-${I}`,I+=1}componentDidUpdate(){const{onTypeaheadStateChange:e,query:t}=this.props,a=!(!this._textInputNode||!t);a!==this._typeaheadActive&&(this._typeaheadActive=a,e&&e(a))}resetSelectedItem(){this.setState({selectedItem:void 0})}}r()(w,"contextType",_.b),r()(w,"defaultProps",{source:f.d.Compose});const E=b.a.create((e=>({dropdownStyle:{backgroundColor:e.colors.cellBackground,borderRadius:e.borderRadii.small,boxShadow:e.boxShadows.medium,minHeight:100,overflowX:"hidden",overflowY:"auto"},mask:{...b.a.absoluteFillObject,position:"fixed"},modalFullViewportStyle:{backgroundColor:e.colors.cellBackground,right:0,left:0,borderTopColor:e.colors.borderColor,borderTopStyle:"solid",borderTopWidth:e.borderWidths.small,minHeight:100},inputContainer:{flexGrow:1,position:"relative",width:"100%",zIndex:h.g}})));t.default=Object(m.a)(w,{component:"compose"})},hiGS:function(e,t,a){"use strict";var s=a("ERkP"),r=a.n(s),n=a("Lsrn"),c=a("k/Ka");const o=(e={})=>Object(c.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[n.a.root,e.style],viewBox:"0 0 24 24"},r.a.createElement("g",null,r.a.createElement("path",{d:"M20.746 5.236h-3.75V4.25c0-1.24-1.01-2.25-2.25-2.25h-5.5c-1.24 0-2.25 1.01-2.25 2.25v.986h-3.75c-.414 0-.75.336-.75.75s.336.75.75.75h.368l1.583 13.262c.216 1.193 1.31 2.027 2.658 2.027h8.282c1.35 0 2.442-.834 2.664-2.072l1.577-13.217h.368c.414 0 .75-.336.75-.75s-.335-.75-.75-.75zM8.496 4.25c0-.413.337-.75.75-.75h5.5c.413 0 .75.337.75.75v.986h-7V4.25zm8.822 15.48c-.1.55-.664.795-1.18.795H7.854c-.517 0-1.083-.246-1.175-.75L5.126 6.735h13.74L17.32 19.732z"}),r.a.createElement("path",{d:"M10 17.75c.414 0 .75-.336.75-.75v-7c0-.414-.336-.75-.75-.75s-.75.336-.75.75v7c0 .414.336.75.75.75zm4 0c.414 0 .75-.336.75-.75v-7c0-.414-.336-.75-.75-.75s-.75.336-.75.75v7c0 .414.336.75.75.75z"})));o.metadata={width:24,height:24},t.a=o},iY63:function(e,t,a){"use strict";var s=a("ERkP"),r=a.n(s),n=a("Lsrn"),c=a("k/Ka");const o=(e={})=>Object(c.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[n.a.root,e.style],viewBox:"0 0 24 24"},r.a.createElement("g",null,r.a.createElement("path",{d:"M19.75 11H13V4.25c0-.553-.447-1-1-1s-1 .447-1 1V11H4.25c-.553 0-1 .447-1 1s.447 1 1 1H11v6.75c0 .553.447 1 1 1s1-.447 1-1V13h6.75c.553 0 1-.447 1-1s-.447-1-1-1z"})));o.metadata={width:24,height:24},t.a=o},kIAd:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return n}));var s=a("0vv5");const r=500,n={scoper:[{type:"dmUserSearch",regexp:/^[@＠]?(.*)|^$/,srcInputs:["compose_message"],scope:{result_type:"users",count:20}},{type:"username",regexp:/^[@＠](\w{1,20})/,srcInputs:["compose"],scope:{result_type:"users",count:20}},{type:"hashtag",regexp:a.n(s).a,srcInputs:["compose"],scope:{result_type:"topics",count:20}},{type:"topic",regexp:/(.+)/,srcInputs:["search_box"],scope:{result_type:"all"}},{type:"ttt",regexp:/(.+)/,srcInputs:["welcome_flow"],scope:{count:10,result_type:"topics,ttt"}}],WordBoundary:/[!'%&'()*+,\\\-./:;<=>?[\]^{|}~\s]|$/,WordEnd:/[^!'%&'()*+,\\\-./:;<=>?[\]^{|}~\s]+$/}},oEoC:function(e,t,a){"use strict";a.d(t,"e",(function(){return c})),a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return i})),a.d(t,"g",(function(){return l})),a.d(t,"a",(function(){return d})),a.d(t,"d",(function(){return h})),a.d(t,"f",(function(){return u}));var s=a("oQhu"),r=a("kIAd"),n=a("rHpw");function c(e,t){let a;const s=r.b.scoper.find((s=>{if(-1!==s.srcInputs.indexOf(t))return a=e.match(s.regexp),a}));let n="";return a&&(n=a&&(1===a.length?a[0]:a[1])),s?{...s.scope,src:t,q:n}:null}function o(e,t){const a=t.slice(0,e),s=t.slice(e,t.length),n=a.search(r.b.WordEnd),c=n>=0?a.slice(n):"",o=s.search(r.b.WordBoundary),i=c+s.slice(0,o);return i.trim()?{start:n,end:e+o,word:i}:{start:-1,end:-1,word:""}}function i(){return`typeaheadFocus-${Math.random()}`}function l(e){const{altKey:t,ctrlKey:a,metaKey:s}=e;return!(t||a||s)}function d(e,t){const a=[];e.forEach((e=>{const s=t.find((t=>t.id===e.id));s&&s.data&&s.data.result_context?a.push(s):a.push(e)}));const s=a.map((e=>e.id)),r=t.filter((e=>s.indexOf(e.id)<0));return[...a,...r]}const h=Object(s.a)((e=>({bottom:0,paddingBottom:`calc(2.5 * ${n.a.theme.spaces.space64})`,position:"fixed",top:`${e}px`,transform:[{translate3d:"0,0,0"}]})));let p=0;const u=()=>(p+=1,`typeaheadDropdown-${p}`)},rRIm:function(e,t,a){"use strict";a.d(t,"b",(function(){return O}));var s=a("KEM+"),r=a.n(s),n=a("ERkP"),c=a.n(n),o=a("sTyV"),i=a("6/RC"),l=a("sebV"),d=a("G6rE"),h=a("rxPX"),p=Object(h.a)().propsFromState((()=>({loggedInUser:d.e.selectLoggedInUser}))).adjustStateProps((({loggedInUser:e})=>({loggedInUserScreenName:e?e.screen_name:void 0}))),u=a("3XMw"),m=a.n(u),S=a("OrGc"),y=a("QK5w"),_=a("aITJ"),b=a("MWbm"),f=a("TnY3"),g=a("rHpw"),v=a("t62R"),I=a("v6aA"),w=a("uScj"),E=a("fs1G"),C=a("BcsE"),R=a("VPAj");const x=m.a.b47e760d,D=m.a.fd2c7b43,k=new w.a,T=e=>{if(e.target instanceof HTMLInputElement){const t=e.target.tagName.toLowerCase();return"input"===t||"textarea"===t}return!1},O=e=>{if(!i.canUseDOM)return E.a;return k.subscribe(e).unsubscribe};class A extends c.a.Component{constructor(...e){super(...e),r()(this,"_bindKeyboardShortcuts",(()=>{const{history:e,loggedInUserScreenName:t}=this.props,a=t=>a=>{a.preventDefault(),k.getListeners().length?k.notify(t):e.push({pathname:"/explore",state:{searchFocused:!0,searchPrefill:t}})},s={[S.e.search]:a(),[S.e.goToUser]:a("@"),[S.e.openKeyboardShortcuts]:()=>e.push("/i/keyboard_shortcuts"),[S.e.goExplore]:()=>e.push("/explore"),[S.e.goSettings]:()=>e.push("/settings")},r=t=>({[S.e.goProfile]:()=>e.push(`/${t}`),[S.e.goLikes]:()=>e.push(`/${t}/likes`),[S.e.goLists]:()=>e.push(`/${t}/lists`)}),n=this.context.userClaims.isTrueAndEnabled("subscriptions_feature_1007"),c=t&&n?{...r(t),[S.e.goTopArticles]:()=>e.push("/i/articles")}:t?r(t):{},i={...s,...c,[S.e.goHome]:()=>e.push("/home"),[S.e.goDisplay]:()=>e.push("/i/display"),[S.e.goNotifications]:()=>e.push("/notifications"),[S.e.goMentions]:()=>e.push("/notifications/mentions"),[S.e.goMessages]:()=>e.push("/messages"),[S.e.newMessage]:()=>e.push("/messages/compose"),[S.e.newTweet]:()=>e.push("/compose/tweet"),[S.e.goMomentMaker]:()=>e.push("/i/moment_maker"),[S.e.goBookmarks]:()=>e.push("/i/bookmarks")},l=this.props.loggedInUserScreenName?i:s;this._unbindKeyboardShortcuts=Object(o.a)(l)})),r()(this,"_handleKeyDown",(e=>{T(e)||"Backspace"!==e.key||(this._backspaceDown=Date.now(),e.preventDefault(),e.stopPropagation())})),r()(this,"_handleKeyUp",(e=>{if(!T(e)&&"Backspace"===e.key){e.preventDefault(),e.stopPropagation();const t=this._backspaceDown,a=!!Object(C.a)(t)&&Date.now()-t<500,s=Object(y.a)({},{location:this.props.location});a&&s?this.props.history.goBack():window.close()}}))}componentDidMount(){this._bindKeyboardShortcuts(),_.b.isKaiOS()&&l.a.isStandaloneApp()&&(document.addEventListener("keydown",this._handleKeyDown),document.addEventListener("keyup",this._handleKeyUp))}componentWillUnmount(){this._unbindKeyboardShortcuts&&this._unbindKeyboardShortcuts(),_.b.isKaiOS()&&l.a.isStandaloneApp()&&(document.removeEventListener("keydown",this._handleKeyDown),document.removeEventListener("keyup",this._handleKeyUp))}render(){return this.props.loggedInUserScreenName?c.a.createElement(b.a,{accessibilityLevel:2,accessibilityRole:"heading",style:g.a.visuallyHidden},c.a.createElement(v.b,null,x),c.a.createElement(v.b,{focusable:!1,link:"/i/keyboard_shortcuts"},D)):null}}r()(A,"contextType",I.a);const U=p(A),L=i.canUseDOM?Object(f.a)(U):Object(R.a)(null);t.a=L},sYRn:function(e,t,a){"use strict";var s=a("ERkP"),r=a.n(s),n=a("eb3s"),c=a("3XMw"),o=a.n(c),i=a("4ZbN");const l=o.a.hffea05c,d=o.a.j037e373,h=o.a.d96cf7cd;t.a=({onCancel:e,onConfirm:t})=>r.a.createElement(n.a,{confirmButtonLabel:h,confirmButtonType:"destructiveFilled",headline:l,onCancel:e,onConfirm:t,testID:i.a.deleteSavedSearchDialog,text:d})},u3ZE:function(e,t,a){"use strict";t.a={AdvancedSearchPage:"advanced_search_page",CashtagClick:"cashtag_click",HashtagClick:"hashtag_click",PromotedTrendClick:"promoted_trend_click",RecentSearchClick:"recent_search_click",SavedSearchClick:"saved_search_click",RelatedQueryClick:"related_query_click",SpellingCorrectionClick:"spelling_correction_click",SpellingCorrectionRevertClick:"spelling_suggestion_revert_click",SpellingExpansionClick:"spelling_expansion_click",SpellingExpansionRevertClick:"spelling_expansion_revert_click",SpellingSuggestionClick:"spelling_suggestion_click",TrendClick:"trend_click",TrendView:"trend_view",TypeaheadClick:"typeahead_click",Typed:"typed_query",TweetDetailQuoteTweet:"tdqt"}},v4XE:function(e,t,a){"use strict";a.d(t,"d",(function(){return m})),a.d(t,"c",(function(){return S})),a.d(t,"a",(function(){return y})),a.d(t,"b",(function(){return _}));var s=a("oEOe"),r=a("kGix"),n=a("Ssj5"),c=a("SrIh"),o=a("RqPI");const i="savedSearches",l={fetchStatus:r.a.NONE,savedSearches:[]},d=Object.freeze({REQUEST:"rweb/savedSearches/FETCH_SAVED_SEARCHES_REQUEST",SUCCESS:"rweb/savedSearches/FETCH_SAVED_SEARCHES_SUCCESS",FAILURE:"rweb/savedSearches/FETCH_SAVED_SEARCHES_FAILURE"}),h=Object.freeze({REQUEST:"rweb/savedSearches/SAVE_SEARCH_REQUEST",SUCCESS:"rweb/savedSearches/SAVE_SEARCH_SUCCESS",FAILURE:"rweb/savedSearches/SAVE_SEARCH_FAILURE"}),p=Object.freeze({REQUEST:"rweb/savedSearches/DELETE_SAVED_SEARCH_REQUEST",SUCCESS:"rweb/savedSearches/DELETE_SAVED_SEARCH_SUCCESS",FAILURE:"rweb/savedSearches/DELETE_SAVED_SEARCH_FAILURE"});function u(e=l,t){switch(t.type){case d.SUCCESS:{const a=t.payload,s=Array.isArray(a);return s||Object(c.a)("Saved search results are not type array",{extra:{savedSearchResultsType:typeof a}}),{...e,fetchStatus:r.a.LOADED,savedSearches:s&&a?a:[]}}case d.FAILURE:return{...e,fetchStatus:r.a.FAILED};case h.SUCCESS:return{...e,savedSearches:t.payload?[...e.savedSearches,t.payload]:e.savedSearches};case p.SUCCESS:return t.payload?{...e,savedSearches:e.savedSearches.filter((e=>e.id_str!==t.payload.id_str))}:e;default:return e}}n.a.register({[i]:u});const m=e=>e.savedSearches.savedSearches,S=e=>(t,a,{api:r})=>Object(s.b)(t,{request:r.SavedSearches.create,params:{query:e}})({actionTypes:h,context:"SAVE_SEARCH"}),y=e=>(t,a,{api:r})=>Object(s.b)(t,{request:r.SavedSearches.destroy,params:{id:e}})({actionTypes:p,context:"DELETE_SAVED_SEARCH"}),_=()=>(e,t,{api:a})=>{const n=t();if(!Object(o.m)(n))return Promise.resolve();return(e=>e.savedSearches.fetchStatus)(n)===r.a.LOADED?Promise.resolve():e(((e,t,{api:a})=>Object(s.b)(e,{request:a.SavedSearches.fetch,params:{}})({actionTypes:d,context:"FETCH_SAVED_SEARCHES"})))}}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/loader.Typeahead.fc1bfdc5.js.map