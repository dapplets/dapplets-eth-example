(window.webpackJsonp=window.webpackJsonp||[]).push([[83,77],{"2WeA":function(e,t,n){"use strict";n.r(t);n("ERkP");var o=n("pcjM"),r=n("ORQL");t.default=Object(r.a)(o.default)},ORQL:function(e,t,n){"use strict";var o=n("97Jx"),r=n.n(o),a=n("ERkP"),i=n.n(a),s=n("RH6X"),l=n("rziq"),c=n("hHEM"),d=n("keCP");const u={convertEmojiToEntities:c.a.convertEmojiToEntities,element:d.a,initEditorState:c.a.initEditorState,insertTextAtCursor:c.a.insertTextAtCursor,updateOverflowStyle:c.a.updateOverflowStyle,dismissComposerCommandName:l.a,sendTweetCommandName:l.b};t.a=e=>t=>i.a.createElement(e,r()({},t,{richTextInputContext:u,typeaheadWrapper:s.a}))},RH6X:function(e,t,n){"use strict";var o=n("KEM+"),r=n.n(o),a=n("ERkP"),i=n.n(a),s=n("oEoC"),l=n("2dXj"),c=n("4bHO"),d=n("dzqK"),u=n("GZwR"),h=n("zpdM");class p extends i.a.Component{constructor(...e){super(...e),r()(this,"state",{queryContext:void 0,canShowTypeahead:!1}),r()(this,"_genericWrapperRef",i.a.createRef()),r()(this,"render",(()=>{const{children:e,contextText:t,isInline:n,isInlineReply:o,onTypeaheadStateChange:r,source:a}=this.props,{canShowTypeahead:s,queryContext:c}=this.state,d=s&&c?{word:c.word,resultType:c.resultType}:void 0;return i.a.createElement(l.a,{contextText:t,isInline:n,isInlineReply:o,onDismiss:this._handleDismiss,onSelectItem:this._handleSelectItem,onTypeaheadStateChange:r,query:d,ref:this._genericWrapperRef,source:a||u.d.Compose},e(this._handleInputChange))})),r()(this,"_getCaret",(e=>e.getSelection().getStartOffset())),r()(this,"_getPlaintextFromCurrentBlock",(e=>{const t=e.getSelection().anchorKey;return e.getCurrentContent().getBlockForKey(t).getText()})),r()(this,"_handleSelectItem",(e=>{const{onTextUpdated:t}=this.props,{queryContext:n}=this.state;if(n){const o=Object(c.a)(e,n.resultType);t(this._replaceToken(o,n))}this._setQueryContext(void 0)})),r()(this,"_handleInputChange",(e=>{if(!Object(d.a)(e))throw new Error("RichTextTypeaheadComposeWrapper cannot handle plain text input changes");{const{queryContext:t}=this.state,n=t&&t.word,o=this._getPlaintextFromCurrentBlock(e),{end:r,start:a,word:i}=s.c(this._getCaret(e),o),l=s.e(i||"","compose");if((null==l?void 0:l.q)===n)return;if(this._genericWrapperRef.current&&this._genericWrapperRef.current.resetSelectedItem(),-1===a)this._setQueryContext(void 0);else if(l){const{q:t,result_type:n}=l;this._setQueryContext({word:t,resultType:n,editorState:e,startIndex:a,endIndex:r})}else this._setQueryContext(void 0)}})),r()(this,"_setQueryContext",(e=>this.setState({queryContext:e,canShowTypeahead:!!e}))),r()(this,"_handleDismiss",(()=>this.setState({canShowTypeahead:!1})))}_replaceToken(e,t){const{editorState:n,endIndex:o,startIndex:r}=t,a=n.getSelection().merge({anchorKey:n.getSelection().getFocusKey(),anchorOffset:r,focusOffset:o}),i=h.Modifier.replaceText(n.getCurrentContent(),a,e),s=h.EditorState.push(n,i,"insert-characters"),l=r+e.length,c=s.getSelection().merge({anchorOffset:l,focusOffset:l});return h.EditorState.forceSelection(s,c)}}t.a=p},RrO2:function(e,t,n){"use strict";n.r(t);n("ERkP");var o=n("ORQL"),r=n("x8Sc");t.default=Object(o.a)(r.default)},XpKj:function(e,t,n){"use strict";n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"f",(function(){return p})),n.d(t,"e",(function(){return m})),n.d(t,"c",(function(){return f})),n.d(t,"a",(function(){return g}));var o=n("oEOe"),r=n("kGix"),a=n("Ssj5");const i="scheduledTweets",s={fetchStatus:r.a.NONE,scheduledTweets:[]},l="FETCH_SCHEDULED_TWEETS",c=Object.freeze({REQUEST:"rweb/scheduledTweets/FETCH_SCHEDULED_TWEETS_REQUEST",SUCCESS:"rweb/scheduledTweets/FETCH_SCHEDULED_TWEETS_SUCCESS",FAILURE:"rweb/scheduledTweets/FETCH_SCHEDULED_TWEETS_FAILURE"}),d="DELETE_SCHEDULED_TWEET",u=Object.freeze({REQUEST:"rweb/scheduledTweets/DELETE_SCHEDULED_TWEET_REQUEST",SUCCESS:"rweb/scheduledTweets/DELETE_SCHEDULED_TWEET_SUCCESS",FAILURE:"rweb/scheduledTweets/DELETE_SCHEDULED_TWEET_FAILURE"});function h(e=s,t){switch(t.type){case c.SUCCESS:if(t.payload)return{...e,fetchStatus:r.a.LOADED,scheduledTweets:t.payload};break;case c.FAILURE:return{...e,fetchStatus:r.a.FAILED};case c.REQUEST:return{...e,fetchStatus:r.a.LOADING};case u.SUCCESS:{const{meta:r}=t;return r&&r.deleteScheduledTweetId?{...e,scheduledTweets:(n=r.deleteScheduledTweetId,o=e.scheduledTweets,o.filter((e=>e.rest_id!==n)))}:e}default:return e}var n,o;return e}a.a.register({[i]:h});const p=e=>e.scheduledTweets.scheduledTweets,m=e=>e.scheduledTweets.fetchStatus,f=()=>(e,t,{api:n})=>Object(o.b)(e,{request:n.Scheduling.fetchScheduledTweets,params:{}})({actionTypes:c,context:l}).then((()=>{})),g=e=>(t,n,{api:r})=>Object(o.b)(t,{request:r.Scheduling.deleteScheduledTweet,params:{scheduled_tweet_id:e}})({actionTypes:u,context:d,meta:{deleteScheduledTweetId:e}})},dWxr:function(e,t,n){"use strict";var o=n("IGGJ");n("2G9S"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,s.default)(e,t).concat((0,i.default)(e)).concat((0,a.default)(e,{checkUrlOverlap:!1})).concat((0,r.default)(e));if(0==n.length)return[];return(0,l.default)(n),n};var r=o(n("EW8Q")),a=o(n("yyPN")),i=o(n("YXS5")),s=o(n("vwfs")),l=o(n("c8jd"));e.exports=t.default},hHEM:function(e,t,n){"use strict";var o=n("ERkP"),r=n.n(o),a=n("dWxr"),i=n.n(a),s=n("rHpw"),l=n("aITJ");const c={clipPath:"circle(0% at center)"},d={strategy:(e,t)=>{const n=i()(e.getText());for(let e=0;e<n.length;e++)n[e].indices&&2===n[e].indices.length&&t(n[e].indices[0],n[e].indices[1])},component:e=>r.a.createElement("span",{style:{color:s.a.theme.colors.link}},e.children)},u={strategy:(e,t,n)=>{e.findEntityRanges((e=>{const t=e.getEntity(),o=t&&n.getEntity(t);return!(!o||o.type!==C.TWEMOJI_ENTITY_TYPE)}),t)},component:e=>{const{children:t,contentState:n,entityKey:o}=e,a=o&&n.getEntity(o)||{};return!(l.b.isFirefox()&&l.b.firefoxVersion()<49)?r.a.Children.map(t,(e=>{const t=r.a.Children.map(e,(e=>r.a.createElement("span",{style:c},e)))[0];return r.a.cloneElement(r.a.createElement("span",null),{style:(n=a.data&&a.data.url||"",{backgroundImage:`url("${n}")`,backgroundSize:"1em 1em",padding:"0.15em",backgroundPosition:"center",backgroundRepeat:"no-repeat",WebkitTextFillColor:"transparent"})},t);var n})):t}},h={strategy:(e,t)=>{const n=((e,t,n)=>{const o=t.getText();let r,a;for(;r=e.exec(o);)a=r.index,n(a,a+r[0].length)})(/\r/g,e,t);if(n)return t(n,n+1)},component:()=>"\n"};var p=n("z4Oz"),m=n("zpdM");const f=(e,t)=>{let n=0;for(let o=0;o<e.length;o++){const r=e[o],a=r.getText().length;if(n+a>=t)return{blockKey:r.key,offset:t-n};n+=a+1}return Object.freeze({})},g=(e,t,n=0)=>{let o=n;const r=e.getBlockForKey(t);if(!r)return;const a=r.getEntityAt(n);if(void 0!==a){const t=a&&e.getEntity(a),i=t&&t.data&&t.data.id;if(void 0!==i)for(let t=n-1;t>=0;t--){const n=r.getEntityAt(t),a=n&&e.getEntity(n);if(!a||!a.data||a.data.id!==i){o=t+1;break}}}return o},y="TWEMOJI",E="IMMUTABLE";var C=t.a={convertEmojiToEntities:e=>{const t=m.EditorState.set(e,{allowUndo:!1});let n=t.getCurrentContent(),o=0;return n.getBlocksAsArray().forEach((e=>{p.a.getTwemojiEntities(e.getText()).forEach((r=>{if(2!==(r.indices&&r.indices.length))return;const a=n.createEntity(y,E,{url:r.url||null,id:o});o+=1;const i=a.getLastCreatedEntityKey(),s=e.getKey(),l=t.getSelection().merge({anchorKey:s,anchorOffset:r.indices[0],focusKey:s,focusOffset:r.indices[1],isBackward:!1});n=m.Modifier.applyEntity(a,l,i)}))})),m.EditorState.set(t,{allowUndo:!0,currentContent:n})},getRelativeOffset:f,initEditorState:(e="")=>{const t=[d,u,h],n=m.EditorState.createWithContent(m.ContentState.createFromText(e),new m.CompositeDecorator(t));return m.EditorState.moveSelectionToEnd(n)},insertTextAtCursor:(e,t)=>{const n=e.getCurrentContent(),o=e.getSelection(),r=m.Modifier.insertText(n,o,t);return m.EditorState.push(e,r,"insert-characters")},TWEMOJI_ENTITY_TYPE:y,updateOverflowStyle:(e,t,n=!1)=>{let o;const r=e.getSelection();let a=m.EditorState.set(e,{allowUndo:!1});const i=e.getCurrentContent().getSelectionBefore(),s=e.getCurrentContent().getSelectionAfter(),l=e.getCurrentContent().getBlocksAsArray(),c="number"==typeof t&&t>-1,d=c?f(l,t):Object.freeze({});if(n&&(a=((e,t)=>{const n=e.getCurrentContent(),o=n.getFirstBlock(),r=n.getLastBlock(),{blockKey:a=r.key,offset:i=r.getText().length}=t,s=e.getSelection().merge({anchorKey:o.key,anchorOffset:0,focusKey:a,focusOffset:i,isBackward:!1}),l=m.Modifier.removeInlineStyle(e.getCurrentContent(),s,"overflow");return m.EditorState.push(e,l,"change-inline-style")})(a,d),o=!0),c&&(a=((e,t)=>{const{blockKey:n,offset:o}=t,r=e.getCurrentContent(),a=r.getLastBlock(),i=g(r,n,o);if(n){const t=e.getSelection().merge({anchorKey:n,anchorOffset:i,focusKey:a.key,focusOffset:a.getText().length,isBackward:!1}),o=m.Modifier.applyInlineStyle(r,t,"overflow");return m.EditorState.push(e,o,"change-inline-style")}return e})(a,d),o=!0),o){a=m.EditorState.forceSelection(a,r);let t=a.getCurrentContent();t=t.set("selectionBefore",i),t=t.set("selectionAfter",s),a=m.EditorState.set(e,{allowUndo:!0,currentContent:t})}return a}}},keCP:function(e,t,n){"use strict";var o=n("KEM+"),r=n.n(o),a=n("97Jx"),i=n.n(a),s=(n("MvUL"),n("SV7d")),l=n("rHpw");const c="singleline";var d=n("ERkP"),u=n.n(d),h=n("k/Ka"),p=n("PxJJ"),m=n("w9LO"),f=n("fs1G"),g=(n("aWzz"),n("zpdM"));const y=e=>Object(h.a)("div",e);let E=!1;t.a=u.a.forwardRef(((e,t)=>{const n=s.d();return u.a.createElement(C,i()({},e,{onFocus:t=>{e.onFocus&&e.onFocus(t),n("focus")},ref:t}))}));class C extends u.a.Component{constructor(...e){super(...e),r()(this,"_setSelectionToStart",(()=>{const{editorState:e}=this.props,t=e.getCurrentContent().getFirstBlock().getKey();return g.EditorState.acceptSelection(e,new g.SelectionState({anchorKey:t,anchorOffset:0,focusKey:t,focusOffset:0,isBackward:!1}))})),r()(this,"_setFocusToStart",(()=>{const e=this._setSelectionToStart();return g.EditorState.forceSelection(e,e.getSelection())})),r()(this,"_setFocusToEnd",(()=>{const{autoFocus:e,editorState:t,onChange:n}=this.props;e?null==n||n(g.EditorState.moveFocusToEnd(t)):null==n||n(g.EditorState.moveSelectionToEnd(t))})),r()(this,"_setDraftJsStyle",(()=>{const{placeholderTextColor:e}=this.props,t=document.createElement("style");t.innerHTML=(({placeholderTextColor:e=l.a.theme.colors.gray700})=>{const t=l.a.theme.spaces.space2;return`\n         .DraftEditor-editorContainer, .DraftEditor-root, .public-DraftEditor-content {\n            height: inherit;\n            max-height: inherit;\n            min-height: inherit;\n            overflow: auto;\n            text-align: initial;\n        }\n\n        .public-DraftEditor-content[contenteditable=true] {\n            -webkit-user-modify: read-write-plaintext-only\n        }\n\n        .DraftEditor-root {\n            width: 100%;\n            position: relative;\n            -webkit-user-select: none;\n        }\n\n        .DraftEditor-editorContainer {\n            background-color: rgba(255, 255, 255, 0);\n            border-left: .1px solid transparent;\n            position: relative;\n            z-index: 1;\n        }\n\n        .public-DraftEditor-block {\n            position: relative;\n        }\n\n        .DraftEditor-alignLeft .public-DraftStyleDefault-block {\n            text-align: left;\n        }\n\n        .DraftEditor-alignLeft .public-DraftEditorPlaceholder-root {\n            left: 0;\n            text-align: left;\n        }\n\n        .DraftEditor-alignCenter .public-DraftStyleDefault-block {\n            text-align: center\n        }\n\n        .DraftEditor-alignCenter .public-DraftEditorPlaceholder-root {\n            margin: 0 auto;\n            text-align: center;\n            width: 100%\n        }\n\n        .DraftEditor-alignRight .public-DraftStyleDefault-block {\n            text-align: right;\n        }\n\n        .DraftEditor-alignRight .public-DraftEditorPlaceholder-root {\n            right: 0;\n            text-align: right;\n        }\n\n        .public-DraftEditorPlaceholder-root {\n            color: ${e};\n            padding-bottom: ${t};\n            padding-top: ${t};\n            position: absolute;\n            z-index: 1;\n        }\n\n        .public-DraftEditorPlaceholder-inner {\n            user-select: none;\n            -webkit-user-select: none;\n        }\n\n        .public-DraftEditorPlaceholder-hasFocus {\n            color: ${e};\n        }\n\n        .DraftEditorPlaceholder-hidden {\n            display: none;\n        }\n\n        .public-DraftStyleDefault-block {\n            overflow:hidden;\n            padding-bottom: ${t};\n            padding-top: ${t};\n            position: relative;\n            white-space: pre-wrap;\n        }\n\n        /* Only a handful of CSS rules work on br tags and user-select isn't one */\n        div:only-child > .public-DraftStyleDefault-block br::selection {\n            background: transparent;\n        }\n\n        /*\n           Safari doesn't let you change ::selection on br elements,\n           but Chrome needs it here\n        */\n        div:only-child > .public-DraftStyleDefault-block::selection {\n            background: transparent;\n        }\n\n        .public-DraftStyleDefault-ltr {\n            direction: ltr;\n            text-align: left;\n        }\n\n        .public-DraftStyleDefault-rtl {\n            direction: rtl;\n            text-align: right;\n        }\n\n        .singleline .public-DraftStyleDefault-block {\n            overflow-x: auto;\n            scrollbar-width: none;\n            white-space: nowrap;\n            -ms-overflow-style: none;\n        }\n        .singleline .public-DraftStyleDefault-block::-webkit-scrollbar {\n            display: none;\n        }\n    `})({placeholderTextColor:e});const n=document.head;n&&n.insertBefore(t,n.firstChild)})),r()(this,"focus",(()=>{this._editor&&this._editor.focus()})),r()(this,"blur",(()=>{this._editor&&this._editor.blur()})),r()(this,"value",(()=>this.props.editorState.getCurrentContent().getPlainText())),r()(this,"getOffsetHeight",(()=>{const{editor:e}=this._editor||{};return e&&e.offsetHeight||0})),r()(this,"_setEditorRef",(e=>{this._editor=e})),r()(this,"_handleViewClick",(()=>this.focus())),r()(this,"_onPastedFiles",(e=>{const{onFilesAdded:t}=this.props,n=[];if(e.forEach((e=>{e instanceof File&&n.push(e)})),n.length){return(null==t?void 0:t(n))?"handled":"not-handled"}return"not-handled"})),r()(this,"_onPastedText",((e,t,n)=>{const{multiline:o,onChange:r}=this.props;return!o&&r?(r(g.EditorState.push(n,g.Modifier.replaceText(n.getCurrentContent(),n.getSelection(),e.replace(/[\r\n]+/g," ")),"insert-characters")),"handled"):"not-handled"})),r()(this,"_myKeyBindingFn",(e=>{const{dismissComposerCommandName:t,sendTweetCommandName:n}=this.props,{hasCommandModifier:o}=g.KeyBindingUtil;return 13===e.keyCode&&o(e)?n:27===e.keyCode?t:Object(g.getDefaultKeyBinding)(e)})),r()(this,"_onKeyCommand",(e=>{const{keyCommandHandlers:t}=this.props,n=t&&t[e];return n?(n(),"handled"):"not-handled"})),r()(this,"_onSingleLineReturn",((e,t)=>{const{handleReturn:n}=this.props;return null==n||n(e,t),"handled"})),r()(this,"_getContainerStyle",(()=>{const{appTextSize:e,maxNumberOfLines:t,multiline:n,numberOfLines:o}=this.props,r=l.a.theme.lineHeightsPx[{small:"subtext2",normal:"body",large:"headline1",subtext2:"subtext2",body:"body",headline1:"headline1"}[e]];return{minHeight:(n&&o?o:1)*r,maxHeight:(n&&t?t:1)*r}}))}componentDidMount(){const{onChange:e,positionCursorAtBeginning:t,positionCursorAtEnd:n}=this.props;n?this._setFocusToEnd():t?null==e||e(this._setFocusToStart()):this.props.autoFocus&&this.focus(),E||(this._setDraftJsStyle(),E=!0)}static getDerivedStateFromError(){return{}}componentDidCatch(e){p.a.report(e,{tags:{userVisible:!0,draftJs:!0}})}render(){const{ariaActiveDescendant:e,ariaAutocomplete:t,ariaControls:n,ariaLabel:o,editorState:r,handleReturn:a,multiline:i,onChange:s,onFocus:d,onKeyDown:h,onKeyPress:p,onKeyUp:f,placeholder:E,spellCheck:C,style:T,testID:b}=this.props;return u.a.createElement(y,{className:i?void 0:c,onClick:this._handleViewClick,style:[this._getContainerStyle(),T]},u.a.createElement(g.Editor,{ariaActiveDescendantID:e,ariaAutoComplete:t,ariaControls:n,ariaLabel:o,ariaMultiline:i,customAttrs:{[m.a.NO_REFOCUS_ATTRIBUTE]:"true",onKeyPress:p,onKeyUp:f},customStyleMap:S(l.a.theme),editorState:r,handleKeyCommand:this._onKeyCommand,handlePastedFiles:this._onPastedFiles,handlePastedText:this._onPastedText,handleReturn:i?a:this._onSingleLineReturn,keyBindingFn:this._myKeyBindingFn,onChange:s,onFocus:d,onKeyDown:h,placeholder:E,ref:this._setEditorRef,spellCheck:"false"!==C,stripPastedStyles:!0,tabIndex:0,webDriverTestID:b}))}}r()(C,"defaultProps",{appTextSize:"body",autoFocus:!1,keyCommandHandlers:{},maxNumberOfLines:30,multiline:!0,numberOfLines:6,onFocus:f.a,positionCursorAtEnd:!1,spellCheck:"true"}),C.propTypes={};const S=({colors:e})=>({overflow:{backgroundColor:e.red200}})},pcjM:function(e,t,n){"use strict";n.r(t),n.d(t,"Compose",(function(){return Ie}));var o=n("KEM+"),r=n.n(o),a=(n("MvUL"),n("ERkP")),i=n.n(a),s=n("HPNB"),l=n("h5NW"),c=n("xVN5"),d=n("pidX"),u=n("AspN"),h=n("XOJV"),p=n("G6rE"),m=n("xZGM"),f=n("0KEI"),g=n("hqKg"),y=n("oEGd"),E=n("rU/Q"),C=n("XpKj");const S=e=>(t,n)=>{const o=((e,t)=>t.location.state)(0,n);return o?e(o):void 0},T=Object(g.createSelector)(((e,t)=>t.activeUser),p.e.selectLoggedInUser,((e,t)=>e||t)),b=(e,t)=>{const{location:{query:n}}=t;return n&&"string"==typeof n.in_reply_to?n.in_reply_to:void 0},w=S((e=>e.inReplyToStatusId)),_=(e,t)=>t.location.pathname.indexOf("/intent/")>-1,x=S((e=>e.defaultText)),v=S((e=>e.quotedStatus)),D=({cardUrl:e,mediaIds:t,...n})=>n,R=S((e=>e.isSelfThreadReply)),k=S((e=>e.hideUnsentTweetsButton)),I=S((e=>e.headingSubtitle)),O=S((e=>e.headingTitle)),F=S((e=>e.selectedCommunityId)),A=Object(g.createSelector)((e=>c.l(e,"")),((e,t)=>{const n=x(e,t);return Object(d.a)(t.location)||n}),((e,t)=>t.quotedStatus?t.quotedStatus:v(e,t)),u.j,_,((e,t,n,o,r)=>e.map(((e,a)=>({...D(e),media:o.filter((t=>e.mediaIds.some((e=>e===t.id)))),quotedStatus:0===a?n:void 0,text:0===a&&t&&!r?t:e.text}))))),B=Object(g.createStructuredSelector)({activeUser:T,composerData:A,draftTweets:E.e,inReplyToStatus:(e,t)=>{const n=b(0,t)||w(e,t);return n?h.a.selectHydrated(e,n):void 0},inReplyToStatusId:b,isIntentRoute:_,isSelfThreadReply:R,isSending:e=>c.n(e,""),scheduledTweets:C.f,sendingProgress:c.p,composeSemanticCoreId:S((e=>e.composeSemanticCoreId)),hideUnsentTweetsButton:k,subtitle:I,title:O,selectedCommunityIdFromLocationState:F,shouldShowCommunityAudienceEducation:(e,t)=>Object(m.z)(e,m.e)}),H={createDraftTweetApiErrorHandler:Object(f.createLocalApiErrorHandlerWithContextFactory)(E.d),createScheduledTweetApiErrorHandler:Object(f.createLocalApiErrorHandlerWithContextFactory)(C.d),fetchScheduledTweets:C.c,fetchDraftTweets:E.c,addCommunityAudienceEducationFlag:()=>Object(m.w)(m.e),updateAudienceControlsValue:c.u};var U=Object(y.g)(B,H),L=n("RgK2"),P=n.n(L),M=n("jHSc"),K=n("lsKC"),j=n("3XMw"),W=n.n(j),z=n("iFPY"),N=n("QbaN"),V=n("v6aA"),q=n("rxPX");const Q=e=>Object(m.z)(e,m.p);var J=Object(q.a)().propsFromState((()=>({shouldShowNewsletterCallout:Q}))).propsFromActions((()=>({addFlag:m.w}))),G=n("Lsrn"),X=n("k/Ka");const Y=(e={})=>Object(X.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[G.a.root,e.style],viewBox:"0 0 32 32"},i.a.createElement("g",null,i.a.createElement("path",{d:"M18.672 15.25H8.078c-.414 0-.75.336-.75.75s.336.75.75.75h10.594c.414 0 .75-.336.75-.75s-.336-.75-.75-.75zm0-5.297H8.078c-.414 0-.75.336-.75.75s.336.75.75.75h10.594c.414 0 .75-.336.75-.75s-.336-.75-.75-.75zm-4.304 10.594h-6.29c-.414 0-.75.336-.75.75s.336.75.75.75h6.29c.414 0 .75-.336.75-.75s-.336-.75-.75-.75z"}),i.a.createElement("path",{d:"M29.284 15.25h-4.548V5.736C24.736 4.228 23.51 3 22 3H4.75C3.24 3 2.014 4.228 2.014 5.736v20.527C2.014 27.773 3.24 29 4.75 29h21.885c1.874 0 3.4-1.524 3.4-3.398V16c0-.414-.337-.75-.75-.75zM3.514 26.264V5.736c0-.68.554-1.236 1.236-1.236H22c.682 0 1.236.555 1.236 1.236V25.6c0 .704.214 1.357.58 1.9H4.75c-.682 0-1.236-.555-1.236-1.236zm23.12 1.236c-1.046 0-1.897-.852-1.897-1.898V16.75h3.798v8.852c0 1.046-.853 1.898-1.9 1.898z"})));Y.metadata={width:32,height:32};var $=Y,Z=n("MWbm"),ee=n("4zmP"),te=n("rHpw");const ne=W.a.ed33a3b6,oe=W.a.d5bda8b3,re=W.a.i859a9d3,ae=te.a.create((e=>({revueCallout:{marginBottom:e.spaces.space4,marginTop:e.spaces.space20}})));var ie=J((({addFlag:e,shouldShowNewsletterCallout:t})=>{const{featureSwitches:n}=i.a.useContext(V.a),o=n.isTrue("responsive_web_newsletters_callout_enabled");return t&&o?i.a.createElement(Z.a,{style:ae.revueCallout},i.a.createElement(ee.a,{Icon:$,action:{label:re,link:"https://www.getrevue.co?utm_source=twitter-threads&utm_campaign=announcement-callout&utm_content=learn-more"},headline:ne,onClose:()=>{e(m.p)},text:oe,withCloseButton:!0})):null})),se=n("7nmT"),le=n.n(se),ce=n("Dtul"),de=n("zh9S"),ue=n("7JQg"),he="tweetButton",pe=n("/yvb"),me=n("JYMr"),fe=n("cHvH"),ge=n("feu+"),ye=n("7N4s"),Ee=n("oQhu"),Ce=n("3A2y");const Se=W.a.b8f0483e,Te=W.a.a133d13e,be=W.a.a1183237,we=W.a.da2663f5,_e=W.a.j24c37b2,xe="compose",ve={page:xe},De={page:xe,section:"reply"},Re={context:"compose_intent_logged_in"},ke={viewType:"send_tweet"};class Ie extends i.a.Component{constructor(...e){super(...e),r()(this,"state",{isValid:!1}),r()(this,"_handleDismissCommunityAudienceEducation",(()=>{this.props.addCommunityAudienceEducationFlag()})),r()(this,"_handleAppBarHeight",Object(Ee.a)((()=>{const e=le.a.findDOMNode(this._appBarRef);return e&&e instanceof window.Element&&e.getBoundingClientRect().height||50}))),r()(this,"_handleBackClick",(()=>{this._composeContainerRef&&this._composeContainerRef.handleDismissComposer()})),r()(this,"_handleCloseComposer",(()=>{this._appBarRef&&this._appBarRef.goBack()})),r()(this,"_handleSendTweet",(()=>{this._composeContainerRef&&this._composeContainerRef.handleTweetOrRetweet()})),r()(this,"_setValidity",(e=>{e!==this.state.isValid&&this.setState({isValid:e})})),r()(this,"_getScribeNamespace",(()=>this.props.inReplyToStatus||this.props.inReplyToStatusId?De:ve)),r()(this,"_getScribeData",(()=>{const{activeUser:e,isIntentRoute:t}=this.props;return t&&e?Re:P.a})),r()(this,"_renderAppBarRightControl",(()=>{const{isValid:e}=this.state,{isModal:t}=this.context,{activeUser:n,inReplyToStatus:o,isSelfThreadReply:r,isSending:a}=this.props,s=!e||a||!n;return t?void 0:i.a.createElement(pe.a,{behavioralEventContext:ke,disabled:s,onPress:this._handleSendTweet,size:"small",testID:he,type:"brandFilled"},Object(K.a)({inReplyToStatus:!!o,isSelfThreadReply:!!r,isQuoteTweet:!!this.isQuoteTweet,isRetweet:!!this.isRetweet,isScheduled:!!this.isScheduled,isThread:this.isThread}))})),r()(this,"_renderHeaderWithProgressBar",(e=>{const{isModal:t}=this.context,{isSending:n,sendingProgress:o}=this.props;return i.a.createElement(i.a.Fragment,null,i.a.createElement(me.a,{progress:n?Math.max(o,.02):0,style:[Oe.progressBar,t&&Oe.progressBarModal]}),e)})),r()(this,"_renderUnsentHeading",(()=>{const{draftTweets:e,hideUnsentTweetsButton:t,scheduledTweets:n}=this.props;if(!t&&(n.length>0||e.length>0))return i.a.createElement(Z.a,{style:Oe.unsentHeadingContainer},i.a.createElement(pe.a,{onPress:this._handleOpenUnsent,size:"small",type:"brandText"},Te))})),r()(this,"_handleOpenUnsent",(()=>{const{history:e}=this.props;Object(de.c)({...this._getScribeNamespace(),element:"unsent_tweets",action:"click"}),e.push("/compose/tweet/unsent/drafts")})),r()(this,"_setAppBarRef",(e=>{this._appBarRef=e})),r()(this,"_handleComposeContainerRef",(e=>{this._composeContainerRef=e}))}componentDidMount(){const{activeUser:e,createDraftTweetApiErrorHandler:t,createScheduledTweetApiErrorHandler:n,fetchDraftTweets:o,fetchScheduledTweets:r,history:a,inReplyToStatus:i,location:s,selectedCommunityIdFromLocationState:l,updateAudienceControlsValue:c}=this.props;this._unlockReload=ce.a.acquire(),a.setModalRouteBreakpoint(a.location),e&&(r().catch(n()),o().catch(t())),l&&(c({_type:"community_members",communityIdValue:l,conversationControlsValue:"community_members"}),a.replace({pathname:s.pathname,state:Object(Ce.a)(s.state||{},"selectedCommunityId")})),null!=i&&i.exclusivity_info?c({_type:"super_followers_exclusive",conversationControlsValue:"super_followers_exclusive",exclusivityControlValue:{}}):null!=i&&i.community_id_str&&c({_type:"community_members",communityIdValue:i.community_id_str,conversationControlsValue:"community_members"})}componentWillUnmount(){this._unlockReload()}render(){const{activeUser:e,composeHeader:t,composeSemanticCoreId:n,composerData:o,customizePropsForSingleComposerItem:r,history:a,isIntentRoute:c,location:d,quotedStatus:u,richTextInputContext:h,subtitle:p,title:m,typeaheadWrapper:f}=this.props,g=c&&!e,{isModal:y}=this.context;return i.a.createElement(ue.b,{data:this._getScribeData(),namespace:this._getScribeNamespace()},i.a.createElement(fe.a,null,(({windowWidth:c})=>{const E=s.a.shouldRenderAsModal(c),C=(g||this.showCommunityAudienceEducation)&&E,S=(null==o?void 0:o.length)>1;return i.a.createElement(i.a.Fragment,null,this.showCommunityAudienceEducation?i.a.createElement(ge.a,{actionLabel:_e,graphicDisplayMode:"none",headline:be,onAction:this._handleDismissCommunityAudienceEducation,onClose:this._handleDismissCommunityAudienceEducation,subtext:we,withCloseButton:!1}):null,g&&i.a.createElement(z.a,{history:a,location:d}),!C&&i.a.createElement(i.a.Fragment,null,i.a.createElement(M.b,{appBarRef:this._setAppBarRef,behavioralEventViewType:xe,documentTitle:Se,hideBackButton:!1,history:a,middleControl:this._renderUnsentHeading(),onBackClick:this._handleBackClick,renderHeader:this._renderHeaderWithProgressBar,rightControl:this._renderAppBarRightControl(),subtitle:p,title:m},i.a.createElement(l.a,{activeUser:e,composeHeader:t,composeSemanticCoreId:n,customizePropsForSingleComposerItem:r,history:a,isModal:y,location:d,onCloseComposer:this._handleCloseComposer,onHandleAppBarHeight:this._handleAppBarHeight,onRef:this._handleComposeContainerRef,quotedStatus:u,richTextInputContext:h,setValidity:this._setValidity,typeaheadWrapper:f,windowWidth:c})),S?i.a.createElement(ie,null):null))})))}get showCommunityAudienceEducation(){const{inReplyToStatus:e,selectedCommunityIdFromLocationState:t,shouldShowCommunityAudienceEducation:n}=this.props,o=!!(null!=e&&e.community_id_str||t);return n&&o}get isThread(){return this.props.composerData.length>1}get isRetweet(){const{composerData:e}=this.props,t=0===e[0].media.length;return!this.isThread&&e[0].quotedStatus&&""===e[0].text&&t}get isQuoteTweet(){const{composerData:e}=this.props;return!this.isThread&&!!e[0].quotedStatus}get isScheduled(){const{composerData:e}=this.props;return Object(N.h)(e[0].scheduledFor)}}r()(Ie,"contextType",ye.b);const Oe=te.a.create((e=>({progressBar:{position:"fixed",borderTopLeftRadius:e.borderRadii.small,borderTopRightRadius:e.borderRadii.small,zIndex:e.componentZIndices.appBarZIndex+1},progressBarModal:{position:"absolute"},unsentHeadingContainer:{marginLeft:"auto"}})));t.default=U(Ie)},x8Sc:function(e,t,n){"use strict";n.r(t),n.d(t,"InlineComposeContainer",(function(){return d}));var o=n("ERkP"),r=n.n(o),a=n("h5NW"),i=n("MWbm"),s=n("7N4s"),l=n("cHvH"),c=n("rHpw");const d=({history:e,location:t,parentTweetId:n,replyPressToggle:o,richTextInputContext:c,typeaheadWrapper:d})=>{const{isModal:h}=r.a.useContext(s.b);return r.a.createElement(l.a,null,(({windowWidth:s})=>r.a.createElement(i.a,{style:u.root},r.a.createElement(a.a,{history:e,isInline:!0,isModal:h,location:t,parentTweetId:n,replyPressToggle:o,richTextInputContext:c,typeaheadWrapper:d,windowWidth:s}))))},u=c.a.create((e=>({root:{backgroundColor:e.colors.cellBackground,zIndex:1}})));t.default=d}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/bundle.RichTextCompose.e7268e65.js.map