(window.webpackJsonp=window.webpackJsonp||[]).push([[205],{"5RdJ":function(e,t,i){"use strict";i.r(t);var s=i("97Jx"),o=i.n(s),r=i("ERkP"),n=i.n(r),a=i("+cai"),c=i("nvLZ");t.default=function(e){return n.a.createElement(c.a,o()({},e,{emojiInfo:a.default}))}},VbCG:function(e,t,i){"use strict";i.d(t,"d",(function(){return n})),i.d(t,"e",(function(){return c})),i.d(t,"f",(function(){return l})),i.d(t,"c",(function(){return h})),i.d(t,"a",(function(){return d})),i.d(t,"b",(function(){return u}));var s=i("3XMw"),o=i.n(s),r=i("rHpw");const n={None:"none",Light:"light",MediumLight:"medium-light",Medium:"medium",MediumDark:"medium-dark",Dark:"dark"},a={[n.Light]:"1f3fb",[n.MediumLight]:"1f3fc",[n.Medium]:"1f3fd",[n.MediumDark]:"1f3fe",[n.Dark]:"1f3ff"},c={[n.None]:{id:n.None,name:o.a.ff3dd27b,color:"#FFDC5D"},[n.Light]:{codepoint:a[n.Light],id:n.Light,name:o.a.b554fcf3,color:"#F7DECE"},[n.MediumLight]:{codepoint:a[n.MediumLight],id:n.MediumLight,name:o.a.j590b148,color:"#F3D2A2"},[n.Medium]:{codepoint:a[n.Medium],id:n.Medium,name:o.a.e7d4ee85,color:"#D5AB88"},[n.MediumDark]:{codepoint:a[n.MediumDark],id:n.MediumDark,name:o.a.ia423ebb,color:"#AF7E57"},[n.Dark]:{codepoint:a[n.Dark],id:n.Dark,name:o.a.a2cf0941,color:"#7C533E"}},l={search:o.a.j824dc05,notFoundHeader:o.a.e39c4391,notFoundMessage:o.a.f2625275,skintext:o.a.d67ad795,clear:o.a.e6388bfa,recentCategoryName:o.a.j7c67ec9,searchCategoryName:o.a.da539d38},h={EmojiWidth:r.a.theme.spaces.space20,EmojiHeight:r.a.theme.spaces.space20,EmojiGutter:r.a.theme.spaces.space4},d={Search:"search",Recent:"recent",People:"people",Nature:"nature",Foods:"foods",Activity:"activity",Places:"places",Objects:"objects",Symbols:"symbols",Flags:"flags",Custom:"custom"},u=9},a6L8:function(e,t,i){"use strict";var s=i("ERkP"),o=i.n(s),r=i("faxe"),n=i("3rX5"),a=i("VbCG"),c=i("rHpw");class l extends o.a.PureComponent{render(){const{accessibilityLabel:e,emoji:t,skinTone:i,style:s}=this.props,a=Object(r.b)(t,i);return a?o.a.createElement(n.a,{accessibilityLabel:e,alt:t.name,draggable:!1,resizeMode:"stretch",source:a,style:[h.root,s]}):null}}const h=c.a.create((e=>({root:{height:a.c.EmojiHeight,width:a.c.EmojiWidth}})));t.a=l},faxe:function(e,t,i){"use strict";i.d(t,"c",(function(){return r})),i.d(t,"b",(function(){return n})),i.d(t,"d",(function(){return a})),i.d(t,"a",(function(){return c})),i.d(t,"e",(function(){return l}));var s=i("z4Oz");const o=(e,t)=>{const i=t&&t.codepoint;if(!(i&&r(e.skin_variations,i)>1))return i&&e.skin_variations&&e.skin_variations[i]?e.skin_variations[i]:void 0},r=(e={},t)=>{let i=0;for(const s in e)t&&s.indexOf(t)>=0&&(i+=1);return i},n=(e,t)=>{const i=(o(e,t)||e).unified;return s.a.getTwemojiUrl(i)},a=(e,t)=>{const{name:i,short_names:s,text:r}=e,n=o(e,t),a=n?n.unified:e.unified;return{id:e.id||s[0],name:i,text:r||a,unified:a}},c=()=>`emojiPicker-${Math.random()}`;function l(e,t,i=0){if(e&&t){const{height:s,top:o}=e.getBoundingClientRect(),r=o+i,{bottom:n,top:a}=t.getBoundingClientRect(),c=s+o;if(a<r){const t=r-a;e.scrollTop=Math.max(0,e.scrollTop-t)}else if(a>c||n>c){const t=n-c;e.scrollTop=Math.max(0,e.scrollTop+t)}}}},nvLZ:function(e,t,i){"use strict";var s=i("97Jx"),o=i.n(s),r=i("KEM+"),n=i.n(r),a=i("ERkP"),c=i.n(a),l=i("py1r"),h=i("I4+6"),d=i("oLZl"),u=i("rHpw"),m=i("MWbm");const p=h.a.generate({backgroundColor:"transparent",color:u.a.theme.colors.primary});class f extends c.a.PureComponent{constructor(...e){super(...e),n()(this,"_handleClick",(()=>{const{category:e,onClick:t}=this.props;t(e)})),n()(this,"_handleKeyDown",(e=>{const{key:t}=e,{altKey:i,ctrlKey:s,metaKey:o}=e;i||s||o||t===d.a.Enter&&(this._handleClick(),e.preventDefault(),e.stopPropagation())}))}render(){const{icon:e,isActive:t,isDisabled:i}=this.props;return c.a.createElement(l.a,{disabled:i},(({isFocused:s,isHovered:o,isPressed:r})=>c.a.createElement(m.a,{style:g.container},c.a.createElement(m.a,{accessibilityDisabled:i,accessibilityRole:"button",onClick:this._handleClick,onKeyDown:s?this._handleKeyDown:void 0,style:[g.iconWrapper,o||t?void 0:g.faded,p.transitionStyle,o&&p.hoverStyle,r&&p.pressedStyle,s&&p.focusedStyle]},e),c.a.createElement(m.a,{style:[g.border,t?{backgroundColor:u.a.theme.colors.primary}:null]}))))}}const g=u.a.create((e=>({container:{flex:1},iconWrapper:{width:"100%",alignItems:"center",paddingVertical:e.spaces.space4},border:{height:e.borderWidths.large,width:"100%",borderRadius:e.borderRadii.infinite},faded:{filter:"grayscale(100%) contrast(80%)",opacity:.5}})));var _=f,y=i("a6L8");const v={people:"ðŸ˜€",nature:"ðŸ»",food:"ðŸ”",activity:"âš½ï¸",travel:"ðŸš˜",objects:"ðŸ’¡",symbols:"ðŸ”£",flags:"ðŸš©",recent:"ðŸ•‘"};class S extends c.a.PureComponent{render(){const{activeCategory:e,categories:t,disableAll:i,onAnchorClick:s}=this.props;return c.a.createElement(m.a,{style:w.root},t.map((t=>{const{anchorless:o,emojis:r,id:n,name:a}=t,l=r&&0===r.length||i,h=!!e&&t.id===e.id;return o?null:c.a.createElement(_,{category:t,icon:this._getIcon(n,a),isActive:h,isDisabled:l,key:n,onClick:s})})))}_getIcon(e,t){const{emojiData:i}=this.props,s=i[v[e]];return c.a.createElement(y.a,{accessibilityLabel:t,emoji:s})}}const w=u.a.create((e=>({root:{flexDirection:"row",justifyContent:"space-between"}})));var k=S,C=i("t62R"),j=i("/yvb"),b=i("2ZFc"),E=i("VbCG");class R extends c.a.PureComponent{constructor(...e){super(...e),n()(this,"_handleHover",(()=>{const{emoji:e,onHover:t}=this.props;t&&t(e)})),n()(this,"_handleFocus",(()=>{const{emoji:e,onFocus:t}=this.props;t&&t(e)})),n()(this,"_getBackgroundPositionStyle",(()=>{const{emoji:e,spriteSheetColumns:t,spriteSheetRows:i}=this.props,s=this.props.spritePosition||e.sprite_position,o=100/(i-1);return`${100/(t-1)*s[0]}% ${o*s[1]}%`})),n()(this,"_handleClick",(()=>{const{emoji:e,onSelect:t}=this.props;t&&t(e)}))}render(){const{ariaDescendantId:e,emoji:t,emojiName:i,spriteUrl:s}=this.props,o={backgroundImage:`url(${s})`,backgroundPosition:this._getBackgroundPositionStyle(),backgroundSize:`${100*this.props.spriteSheetColumns}% ${100*this.props.spriteSheetRows}%`};return c.a.createElement(l.a,{onFocusRingGained:this._handleFocus,onHoverIn:this._handleHover},(({isFocused:s,isHovered:r,isPressed:n})=>c.a.createElement(m.a,{accessibilityLabel:i||t.name,accessibilityRole:"option",accessibilityState:{selected:!!e},nativeID:e,onClick:this._handleClick,style:[P.container,I.transitionStyle,r&&I.hoverStyle,n&&I.pressedStyle,(s||e)&&I.focusedStyle]},c.a.createElement(m.a,{style:[o,P.emoji]}))))}}const I=h.a.generate({backgroundColor:u.a.theme.colors.transparent,color:u.a.theme.colors.gray700}),P=u.a.create((e=>({container:{alignItems:"center",borderRadius:e.borderRadii.small,boxSizing:"border-box",padding:E.c.EmojiGutter},emoji:{display:"inline-block",outlineStyle:"none",height:E.c.EmojiHeight,width:E.c.EmojiWidth}})));var D=R,T=i("FIs5"),x=i("mtvn"),F=i("7nmT"),L=i.n(F);class O extends c.a.PureComponent{render(){const{children:e,style:t,withTopBorder:i}=this.props;return c.a.createElement(m.a,{style:[H.root,i&&H.topBorder,t]},e)}}n()(O,"defaultProps",{withTopBorder:!1});const H=u.a.create((e=>({root:{backgroundColor:e.colors.cellBackground,borderColor:e.colors.borderColor,padding:e.spaces.space12},topBorder:{borderTopWidth:e.borderWidths.small}})));var M=O,A=i("faxe"),z=i("OiMc");class B extends c.a.PureComponent{constructor(...e){super(...e),n()(this,"_createDismissOnSelect",(e=>t=>{const{onSelect:i}=this.props;e(),i&&i(t)})),n()(this,"_getEmojisForActiveSkinTone",(e=>{const{activeSkinTone:t,emoji:i,...s}=this.props,{codepoint:r}=t,{skin_variations:n}=i,a=[c.a.createElement(D,o()({},s,{emoji:{...i},key:"none",onSelect:this._createDismissOnSelect(e),spritePosition:i.sprite_position}))];for(const t in n)if(r&&t.indexOf(r)>=0){const{sprite_position:r,unified:l}=n[t];a.push(c.a.createElement(D,o()({},s,{emoji:{...i,text:l},key:t,onSelect:this._createDismissOnSelect(e),spritePosition:r})))}return a})),n()(this,"renderEmojis",(e=>{const t=((e,t)=>{const i=null==e?0:e.length;if(!i||t<1)return[];let s=0,o=0;const r=new Array(Math.ceil(i/t));for(;s<i;)r[o]=e.slice(s,s+=t),o+=1;return r})(this._getEmojisForActiveSkinTone(e),10);return c.a.createElement(m.a,{style:U.emojisContainer},t.map(((e,t)=>c.a.createElement(m.a,{key:t,style:U.row},e))))}))}render(){const{activeSkinTone:e,emoji:t,onSelect:i,...s}=this.props;return c.a.createElement(z.a,{contentStyle:U.contentStyle,renderContent:this.renderEmojis,withArrow:!0},c.a.createElement(D,o()({},s,{emoji:t,spritePosition:t.sprite_position})))}}const U=u.a.create((e=>({row:{flexDirection:"row"},contentStyle:{minWidth:"100%"},emojisContainer:{padding:e.spaces.space12}})));var N=B;class K extends c.a.PureComponent{render(){const{activeSkinTone:e,...t}=this.props,{emoji:i}=this.props,{skin_variations:s}=i,{codepoint:r}=e,n=Object(A.c)(s,r),a=r&&s&&s[r];return 0!==n||a?1===n&&a?c.a.createElement(D,o()({},t,{spritePosition:a.sprite_position})):c.a.createElement(N,o()({},t,{activeSkinTone:e})):c.a.createElement(D,o()({},t,{spritePosition:i.sprite_position}))}}var V=K,W=c.a.forwardRef((function(e,t){const[i,s]=c.a.useState(!0),r=c.a.useRef({containerRef:null,intersectionObserver:window.IntersectionObserver&&new window.IntersectionObserver(((e,t)=>{const{intersectionObserver:i}=r.current;e.some((e=>e.isIntersecting))&&i&&(i.disconnect(),s(!1))}))});c.a.useLayoutEffect((()=>{i&&e.isActiveCategory&&s(!1)}),[i,e.isActiveCategory]),c.a.useEffect((()=>{const{containerRef:e,intersectionObserver:t}=r.current;e&&t&&t.observe(e)}),[r.current.containerRef,r.current.intersectionObserver]);const n=c.a.useMemo((()=>e=>{const i=L.a.findDOMNode(e);i instanceof HTMLElement?r.current.containerRef=i:r.current.containerRef=null,"function"==typeof t&&t(e)}),[t]);return i?c.a.createElement($,o()({ref:n},e,{withPlaceholder:!0})):c.a.createElement($,o()({},e,{ref:t}))}));class $ extends c.a.PureComponent{constructor(e){super(e),n()(this,"_top",0),n()(this,"_bottom",0),n()(this,"_renderEmptyState",(()=>{const{notFoundHeader:e,notFoundMessage:t}=E.f;return c.a.createElement(T.a,{header:e,message:t})})),n()(this,"updatePosition",(()=>{const e=L.a.findDOMNode(this._containerRef.current),t=e&&e.parentNode;if(e&&e instanceof window.HTMLElement&&t&&t instanceof window.HTMLElement){const{height:i,top:s}=e.getBoundingClientRect(),{top:o}=t.getBoundingClientRect();this._top=s-o+t.scrollTop,this._bottom=this._top+i}})),n()(this,"getTop",(()=>this._top)),n()(this,"getBottom",(()=>this._bottom)),n()(this,"updateDisplay",(e=>{const t=L.a.findDOMNode(this._containerRef.current);t&&t instanceof window.HTMLElement&&t.style&&(t.style.display=e?"flex":"none")})),this._containerRef=c.a.createRef()}componentDidMount(){this.updatePosition()}componentDidUpdate(e){e.emojiIDs!==this.props.emojiIDs&&this.updatePosition()}render(){const{emojiIDs:e,headerButton:t,name:i,onStickyHeaderRef:s,withEmptyState:o}=this.props,r=e.length>0||o;return c.a.createElement(m.a,{key:i,ref:this._containerRef},c.a.createElement(m.a,{accessibilityLabel:i,accessibilityRole:"group",key:i,ref:this._containerRef,style:r?G.shown:G.hidden},c.a.createElement(m.a,{ref:s,style:G.headerContainer},c.a.createElement(M,{style:G.headerSection,withTopBorder:!0},c.a.createElement(C.b,{size:"headline2",style:G.header,weight:"bold"},i),t)),o?this._renderEmptyState():c.a.createElement(M,null,this._renderEmojis())))}_renderEmojis(){const{emojiIDs:e,rowSize:t}=this.props,i=Math.ceil(e.length/t),s=Object(x.a)(0,i);return c.a.createElement(m.a,{style:G.emojiGroup},s.map((i=>{const s=e.slice(i*t,(i+1)*t);return c.a.createElement(m.a,{key:`emoji-row-${i}`,style:G.emojiRow},this.props.withPlaceholder?c.a.createElement(m.a,{style:[G.rowItem,G.spacer]}):this._renderRow(s))})))}_renderRow(e){const{activeSkinTone:t,ariaDescendantId:i,data:s,focusedEmojiId:r,onEmojiFocus:n,onEmojiHover:a,onFocusedEmojiRef:l,onSelect:h,rowSize:d,spriteUrl:u}=this.props;return Object(x.a)(0,d).map((d=>{const p=e[d];if(!p)return c.a.createElement(m.a,{key:`row-spacer-${d}`,style:G.rowItem},c.a.createElement(m.a,{style:G.spacer}));const f=s.emojis[p.toLowerCase()];if(!f)return null;const g=!!f.skin_variations,{spriteSheetColumns:_,spriteSheetRows:y}=s,v={ariaDescendantId:p===r?i:void 0,emoji:f,onFocus:n,onHover:a,onSelect:h,spriteUrl:u,spriteSheetRows:y,spriteSheetColumns:_};return c.a.createElement(m.a,{key:f.unified,ref:p===r?l:void 0,style:G.rowItem},g?c.a.createElement(V,o()({},v,{activeSkinTone:t})):c.a.createElement(D,v))}))}}n()($,"defaultProps",{headerButton:null,rowSize:E.b,withEmptyState:!1});const G=u.a.create((e=>({emojiGroup:{flexDirection:"column",flexWrap:"wrap"},emojiRow:{flexDirection:"row",justifyContent:"space-between"},header:{paddingHorizontal:e.spaces.space4},headerSection:{alignItems:"center",flexDirection:"row",justifyContent:"space-between"},headerContainer:{position:"sticky",top:0,zIndex:1},hidden:{display:"none"},shown:{display:"flex"},rowItem:{flex:1},spacer:{alignSelf:"center",margin:E.c.EmojiGutter,height:E.c.EmojiHeight,width:E.c.EmojiWidth}})));var J=i("zrc3"),q=i("Myq3"),Z=i("EhiH");class Y{constructor(e,t,i){this._categories=e,this._rowSize=i,this._emojis=t}getInitialFocus(){const e=Object(J.a)(this._categories,(e=>e.emojis.length>0));return this.formatFocusParams(0,0,this._categories[e])}getCategoryById(e){const t=Object(J.a)(this._categories,(t=>t.id===e));return this._categories[t]}getPreviousCategory(e){if(e===E.a.Search)return;const t=Object(J.a)(this._categories,(t=>t.id===e));return Object(q.a)(this._categories.slice(0,t),(e=>e.emojis.length>0))}getNextCategory(e){if(e===E.a.Search)return;const t=Object(J.a)(this._categories,(t=>t.id===e))+1;return Object(Z.a)(this._categories.slice(t,this._categories.length),(e=>e.emojis.length>0))}getCategoryLastRow(e){const{length:t}=e.emojis;return t<this._rowSize?0:Math.ceil(t/this._rowSize)-1}getLastRowLength(e){const{length:t}=e.emojis;return t?t%this._rowSize||this._rowSize:0}formatFocusParams(e,t,i){const s=i.emojis[e*this._rowSize+t];return{focusRow:e,focusCol:t,focusCategoryId:i.id,focusItem:s,previewEmoji:this._emojis[s]}}focusCategory(e){return this.formatFocusParams(0,0,this.getCategoryById(e))}focusNextColumn({focusCategoryId:e,focusCol:t,focusRow:i}){if(i<0||t<0||!e)return this.getInitialFocus();let s=i,o=t,r=this.getCategoryById(e);if(s*this._rowSize+o+1>=r.emojis.length){if(r=this.getNextCategory(e),!r)return this.formatFocusParams(i,t,this.getCategoryById(e));s=0,o=0}else s+=o===this._rowSize-1?1:0,o=o===this._rowSize-1?0:o+1;return this.formatFocusParams(s,o,r)}focusPreviousColumn({focusCategoryId:e,focusCol:t,focusRow:i}){if(i<0||t<0||!e)return this.getInitialFocus();let s=i,o=t,r=this.getCategoryById(e);if(s*this._rowSize+o-1<0){if(r=this.getPreviousCategory(e),!r)return this.formatFocusParams(i,t,this.getCategoryById(e));s=this.getCategoryLastRow(r),o=this.getLastRowLength(r)-1}else s-=0===o?1:0,o=0===o?this._rowSize-1:o-1;return this.formatFocusParams(s,o,r)}focusNextRow({focusCategoryId:e,focusCol:t,focusRow:i}){if(i<0||t<0||!e)return this.getInitialFocus();let s=i,o=t,r=this.getCategoryById(e);if(s*this._rowSize+o+this._rowSize>=r.emojis.length)if(s<this.getCategoryLastRow(r))s+=1,o=this.getLastRowLength(r)-1;else{if(r=this.getNextCategory(e),!r)return this.formatFocusParams(i,t,this.getCategoryById(e));s=0,o=Math.min(o,r.emojis.length-1)}else s+=1;return this.formatFocusParams(s,o,r)}focusPreviousRow({focusCategoryId:e,focusCol:t,focusRow:i}){if(i<0||t<0||!e)return this.getInitialFocus();let s=i,o=t,r=this.getCategoryById(e);if(s*this._rowSize+o-this._rowSize<0){if(r=this.getPreviousCategory(e),!r)return this.formatFocusParams(i,t,this.getCategoryById(e));s=this.getCategoryLastRow(r),o=Math.min(o,this.getLastRowLength(r)-1)}else s-=1;return this.formatFocusParams(s,o,r)}}var X=i("xoZN"),Q=i("s1N3"),ee=i("tn7R");function te(e,t){const i=[...t];let s=0,o=e;for(;s<i.length;){const e=o.children[i[s]];if(!e)break;s+=1,o=e}return{node:o,tail:i.slice(s)}}function ie(e,t,i){const{node:s,tail:o}=te(e,t);let r=s;o.forEach(((e,t)=>{const i={results:[],children:{}};r.children[e]=i,r=i})),r.results?r.results.push(i):r.results=[i]}function se(e,t){const{node:i,tail:s}=te(e,t);if(!i||s.length>0)return[];const o=[];return function e(t){t.results.length&&o.push(...t.results),Object(ee.a)(t.children).forEach((t=>e(t)))}(i),Object(Q.a)(o)}const oe=(e,t)=>{const i=Object(Q.a)(e),s=Object(Q.a)(t);return i.filter((e=>s.indexOf(e)>=0))};var re=class{constructor(e){n()(this,"_getScoreAndInsertResults",((e,t,i)=>{const s={};for(const o in e){const r=e[o],{search:n}=r,a=n.indexOf(t);if(-1!==a){let e=a+1;t===o&&(e=0),ie(i,t,r),s[o]=e}}return s})),this._data=e,this._index={results:[],children:{}},this._originalEmojis=this._data.emojis}search(e,t){const i=t&&t.maxResults?t.maxResults:75;let s=[];const o=this._originalEmojis,r=this._index;if(e.length){let t=e.toLowerCase().split(/[\s|,|\-|_]+/);t=t.slice(0,2);const i=t.map((e=>{let t=[];const i=se(r,e);if(0===i.length){const i=this._getScoreAndInsertResults(o,e,r);t=se(r,e),t.sort(((e,t)=>i[e.id]-i[t.id]))}else t=i;return t})).filter((e=>!!e));s=i.length>1?oe(...i):i.length?i[0]:[]}return s.length>i&&(s=s.slice(0,i)),s}},ne=i("6OUF"),ae=i("VwDm"),ce=i("fs1G"),le=i("VY6S");const he=c.a.forwardRef(((e,t)=>{const{autoFocus:i=!1,maxResults:s=75,onSearch:o=ce.a,data:r,ariaActiveDescendant:n,categoriesDomId:a}=e,l=c.a.useState("")[1],h=c.a.useMemo((()=>new re(r)),[r]),d=c.a.useMemo((()=>Object(le.a)((function(e){const t=h.search(e,{maxResults:s});o(e,t)}),100)),[h,s,o]),u=c.a.useCallback((e=>{const t=e.target&&e.target.value||"";l(t),d(t)}),[l,d]),p=c.a.useCallback((()=>{l(""),d("")}),[l,d]);return c.a.createElement(m.a,{accessibilityRole:"combobox"},c.a.createElement(ne.a,{Icon:ae.a,ariaActiveDescendant:n,ariaControls:a,ariaExpanded:!0,ariaLabel:E.f.search,autoFocus:i,leftAligned:!0,onChange:u,onClear:p,placeholder:E.f.search,ref:t,style:de.fieldTextInput,styleType:"pill",withClearButton:!0}))})),de=u.a.create((e=>({fieldTextInput:{margin:e.spaces.space4}})));var ue=c.a.memo(he),me=i("IMYl");class pe extends c.a.Component{constructor(...e){super(...e),n()(this,"_handleFocus",(()=>{const{onFocus:e,skinTone:t}=this.props;e&&e(t)})),n()(this,"_handleFocusLost",(()=>{const{onFocusLost:e,skinTone:t}=this.props;e&&e(t)})),n()(this,"_handleHover",(()=>{const{onHover:e,skinTone:t}=this.props;e&&e(t)})),n()(this,"_handleHoverLeave",(()=>{const{onHoverLeave:e,skinTone:t}=this.props;e&&e(t)})),n()(this,"_handleClick",(()=>{const{onSelect:e,skinTone:t}=this.props;e&&e(t)})),n()(this,"_handleKeyDown",(e=>{const{key:t}=e,{altKey:i,ctrlKey:s,metaKey:o}=e;i||s||o||t===d.a.Enter&&(this._handleClick(),e.preventDefault(),e.stopPropagation())}))}render(){const{accessibilityLabel:e,accessibilityRole:t,isSelected:i,skinTone:s,style:o}=this.props,r=h.a.generate({backgroundColor:s.color,color:u.a.theme.colors.white});return c.a.createElement(l.a,{onFocusRingGained:this._handleFocus,onFocusRingLost:this._handleFocusLost,onHoverIn:this._handleHover,onHoverOut:this._handleHoverLeave},(({isFocused:n,isHovered:a,isPressed:l})=>c.a.createElement(m.a,{accessibilityLabel:e,accessibilityRole:t||"button",accessibilityState:{checked:!!i},focusable:!0,onClick:this._handleClick,onKeyDown:n?this._handleKeyDown:void 0,style:o},c.a.createElement(m.a,{style:[fe.root,{backgroundColor:s.color},r.transitionStyle,(a||n)&&r.focusedStyle,(l||i)&&fe.selected]},i?c.a.createElement(me.a,{style:fe.checkmarkIcon}):null))))}}const fe=u.a.create((e=>({outer:{paddingLeft:e.spaces.space4},root:{alignItems:"center",justifyContent:"center",height:"1.25em",width:"1.25em",borderRadius:e.borderRadii.infinite},selected:{boxShadow:`0 0 0 ${e.borderWidths.medium} ${e.colors.primary}`},checkmarkIcon:{height:"1em",width:"1em",color:e.colors.cellBackground}})));var ge=pe;class _e extends c.a.Component{constructor(...e){super(...e),n()(this,"state",{showPalette:!1,focusedOption:void 0,hoveredOption:void 0}),n()(this,"_renderPalette",(()=>{const{activeSkinTone:e}=this.props;return c.a.createElement(m.a,{accessibilityRole:"radiogroup",style:ye.palette},Object(ee.a)(E.e).map((t=>{const i=t===e;return c.a.createElement(ge,{accessibilityLabel:t.name,accessibilityRole:"radio",isSelected:i,key:t.id,onFocus:this._handleSkinToneFocus,onFocusLost:this._handleSkinToneFocusLost,onHover:this._handleSkinToneHover,onHoverLeave:this._handleSkinToneHoverLeave,onSelect:this._handleSkinToneSelectionClick,skinTone:t,style:ye.skinToneOption})})))})),n()(this,"_renderCurrentSkinTone",(()=>{const{activeSkinTone:e}=this.props;return c.a.createElement(ge,{accessibilityLabel:E.f.skintext,isSelected:!0,onSelect:this._handleShowPaletteClick,skinTone:e})})),n()(this,"_handleShowPaletteClick",(()=>{this.setState({showPalette:!0})})),n()(this,"_handleSkinToneSelectionClick",(e=>{this.setState({showPalette:!1}),this.props.onSelect(e)})),n()(this,"_handleSkinToneHover",(e=>{this.setState({hoveredOption:e},this._handlePreview)})),n()(this,"_handleSkinToneHoverLeave",(e=>{this.setState({hoveredOption:void 0},this._handlePreview)})),n()(this,"_handleSkinToneFocus",(e=>{this.setState({focusedOption:e},this._handlePreview)})),n()(this,"_handleSkinToneFocusLost",(e=>{this.setState({focusedOption:void 0},this._handlePreview)})),n()(this,"_handlePreview",(()=>{const{onPreview:e}=this.props;e&&e(this.state.hoveredOption||this.state.focusedOption)}))}render(){const{showPalette:e}=this.state,{style:t}=this.props;return c.a.createElement(m.a,{style:t},e?this._renderPalette():this._renderCurrentSkinTone())}}const ye=u.a.create((e=>({palette:{flexDirection:"row"},skinToneOption:{paddingHorizontal:e.spaces.space2}})));var ve=_e,Se=i("r728"),we=i("Qyxo"),ke=i("Iok7");const Ce="emojiPicker2",je=[E.a.Search,E.a.Recent],be="emoji_picker_categories_dom_id";class Ee extends c.a.PureComponent{constructor(e){super(e),n()(this,"_categoryRefs",{}),n()(this,"_scrollRef",c.a.createRef()),n()(this,"_searchRef",c.a.createRef()),n()(this,"_selectedEmojis",[]),n()(this,"_shouldScrollToFocusedItem",!0),n()(this,"_shouldUpdateScrollPosition",!1),n()(this,"_renderAnchors",(e=>{const{activeCategory:t,query:i}=this.state;return c.a.createElement(k,{activeCategory:i?void 0:t,categories:e,disableAll:!!i,emojiData:this._uncompressedData.emojis,onAnchorClick:this._handleAnchorClick})})),n()(this,"_renderSearch",(()=>c.a.createElement(ue,{ariaActiveDescendant:this.state.ariaDescendantId,autoFocus:!0,categoriesDomId:be,data:this._uncompressedData,onSearch:this._handleSearch,ref:this._searchRef}))),n()(this,"_renderCategories",(e=>{const{rowSize:t,spriteUrl:i}=this.props,{activeCategory:s,activeSkinTone:r,ariaDescendantId:n,focusCategoryId:a,focusItem:l,query:h}=this.state;return c.a.createElement(ke.a,{accessibilityRole:"listbox",nativeID:be,onMouseLeave:this._handleClearPreview,onScroll:this._handleScroll,ref:this._scrollRef,scrollEventThrottle:100,style:Re.categoriesContainer},e.map(((e,d)=>{const u=a===e.id,m=s&&s.id===e.id,p={activeSkinTone:r,ariaDescendantId:u?n:void 0,data:this._uncompressedData,emojiIDs:e.emojis,focusedEmojiId:u?l:void 0,id:e.id,isActiveCategory:m,name:e.name,onEmojiFocus:this._handleEmojiPreview,onEmojiHover:this._handleEmojiPreview,onFocusedEmojiRef:u?this._handleFocusedItemRef:void 0,onSelect:this._handleSelect,onStickyHeaderRef:m?this._handleStickyHeaderRef:void 0,rowSize:t,spriteUrl:i};return e.id===E.a.Recent&&(p.headerButton=c.a.createElement(j.a,{accessibilityLabel:E.f.clear,onPress:this._handleClearRecent,size:"xSmall",type:"brandText"},E.f.clear)),e.id===E.a.Search&&(p.withEmptyState=!e.emojis.length&&!!h),c.a.createElement(W,o()({},p,{key:e.name,ref:this._setCategoryRef(`category-${e.id}`)}))})))})),n()(this,"_scrollEmojiIntoViewIfNeeded",(()=>{this._shouldScrollToFocusedItem&&this._focusedItemRef&&(Object(A.e)(this._getScrollParent(),this._focusedItemRef,this._getStickyHeaderOffset()),this._shouldScrollToFocusedItem=!1)})),n()(this,"_handleStickyHeaderRef",(e=>{this._stickyHeaderRef=e,this._stickyHeaderHeight=void 0,this._shouldScrollToFocusedItem=!0})),n()(this,"_handleFocusedItemRef",(e=>{this._focusedItemRef=e,this._scrollEmojiIntoViewIfNeeded()})),n()(this,"_getStickyHeaderOffset",(()=>{if(void 0===this._stickyHeaderHeight){const e=this._stickyHeaderRef;if(e){const{height:t}=e.getBoundingClientRect();this._stickyHeaderHeight=t}}return this._stickyHeaderHeight||0})),n()(this,"_handleSkinToneSelect",(e=>{this.setState({activeSkinTone:e,previewSkinTone:void 0,withDescription:!0}),this._focusSearch()})),n()(this,"_handleSkinTonePreview",(e=>{this.setState({previewSkinTone:e,withDescription:!1})})),n()(this,"_renderPreview",(()=>{const{activeSkinTone:e,previewEmoji:t,previewSkinTone:i}=this.state,s=t||this._defaultPreviewEmoji,o=i||e;return c.a.createElement(j.a,{accessibilityLabel:s.name,icon:c.a.createElement(y.a,{emoji:s,skinTone:o,style:Re.twemoji}),onClick:this._handlePreviewClick,type:"brandText"})})),n()(this,"_handlePreviewClick",(()=>{const{previewEmoji:e}=this.state,t=e||this._defaultPreviewEmoji;this._handleSelect(t)})),n()(this,"_renderEmojiDescription",(()=>{const{previewEmoji:e}=this.state;return e?c.a.createElement(C.b,{align:"left",color:"gray700",numberOfLines:1,size:"subtext2",style:Re.emojiDescription},e.name):null})),n()(this,"_renderFooter",(()=>{const{withDescription:e}=this.state;return c.a.createElement(m.a,{style:Re.footer},this._renderPreview(),e?this._renderEmojiDescription():null,c.a.createElement(ve,{activeSkinTone:this.state.activeSkinTone,onPreview:this._handleSkinTonePreview,onSelect:this._handleSkinToneSelect,style:Re.skinTonePicker}))})),n()(this,"_setCategoryRef",(e=>t=>{t&&(this._categoryRefs[e]=t)})),n()(this,"_handleKeyDown",(e=>{const{key:t}=e,{altKey:i,ctrlKey:s,metaKey:o}=e,{focusCategoryId:r,focusCol:n,focusItem:a,focusRow:c}=this.state,l={focusRow:c,focusCol:n,focusCategoryId:r};if(!(i||s||o))return t===d.a.ArrowDown?(this._updateFocus(this._focusHelper.focusNextRow(l)),void e.preventDefault()):t===d.a.ArrowUp?(this._updateFocus(this._focusHelper.focusPreviousRow(l)),void e.preventDefault()):t===d.a.ArrowRight?(this._updateFocus(this._focusHelper.focusNextColumn(l)),void e.preventDefault()):t===d.a.ArrowLeft?(this._updateFocus(this._focusHelper.focusPreviousColumn(l)),void e.preventDefault()):t===d.a.Enter&&a?(this._handleSelect(this._uncompressedData.emojis[a]),void e.preventDefault()):void 0})),n()(this,"_updateFocus",(e=>{const{ariaDescendantId:t,focusItem:i}=this.state,s=i!==e.focusItem;this._shouldScrollToFocusedItem=s,this.setState({...e,ariaDescendantId:s?Object(A.a)():t})})),n()(this,"_handleScroll",(()=>{this._updateActiveCategory()})),n()(this,"_handleSearch",((e,t)=>{const i=t?t.map((e=>e.unified)):[];Object(ee.a)(this._categoryRefs).forEach((t=>{t&&"search"!==t.props.id&&t.updateDisplay(!e)})),this.setState({searchResults:i,query:e}),this._scrollTo(0)})),n()(this,"_handleSelect",(e=>{const{onSelect:t}=this.props,{activeSkinTone:i}=this.state,s=Object(A.d)(e,i);t&&t(s);const o=[];for(let t=this._selectedEmojis.length;t>=0;t--){const i=t===this._selectedEmojis.length?e.unified:this._selectedEmojis[t];o.indexOf(i)<0&&o.push(i)}this._selectedEmojis=o.reverse()})),n()(this,"_handleClearRecent",(e=>{this._selectedEmojis=[],this.setState({recentlyUsed:[],activeCategory:this._staticCategories()[0]},(()=>{this._shouldUpdateScrollPosition=!0}))})),n()(this,"_getActiveCategory",(()=>{const e=this._scrollRef.current&&L.a.findDOMNode(this._scrollRef.current);let t=this.state.activeCategory;if(e&&e instanceof window.HTMLElement){const{scrollTop:i}=e;for(let e=0;e<this._categories.length;e++){const s=this._categories[e],o=this._categoryRefs[`category-${s.id}`];if(o&&i>=o.getTop()&&i<o.getBottom()){t=s;break}}}return t})),n()(this,"_updateActiveCategory",(()=>{const e=this._getActiveCategory();e!==this.state.activeCategory&&this.setState({activeCategory:e})})),n()(this,"_getUpdatedRecentlyUsedEmojiList",(()=>{const{recentlyUsed:e}=this.state,{rowSize:t}=this.props;if(0===this._selectedEmojis.length)return e;const i=-2*t;return[...e.filter((e=>this._selectedEmojis.indexOf(e)<0)),...this._selectedEmojis].slice(i)})),n()(this,"_handleClearPreview",(()=>{this.state.previewEmoji&&this.setState({previewEmoji:void 0})})),n()(this,"_handleEmojiPreview",(e=>{e!==this.state.previewEmoji&&this.setState({previewEmoji:e})})),n()(this,"_handleAnchorClick",(e=>{this._shouldUpdateScrollPosition&&(this._shouldUpdateScrollPosition=!1,Object(ee.a)(this._categoryRefs).forEach((e=>e.updatePosition())));const t=this._categoryRefs[`category-${e.id}`];0!==e.emojis.length&&(this.setState({activeCategory:e}),t&&this._scrollTo(t.getTop()+1),this.state.focusItem&&this._updateFocus(this._focusHelper.focusCategory(e.id))),this._focusSearch()})),n()(this,"_focusSearch",(()=>{this._searchRef.current&&this._searchRef.current.focus()})),n()(this,"_scrollTo",(e=>{this._scrollRef.current&&this._scrollRef.current.scrollTo({y:e,animated:!1})})),n()(this,"_staticCategories",(()=>this._categories.filter((e=>-1===je.indexOf(e.id)))));const{emojiInfo:t}=this.props;this._uncompressedData=Object(Se.a)(t||{}),this._categories=this._uncompressedData.categories,this._searchCategoryInitialValue={anchorless:!0,id:E.a.Search,name:E.f.searchCategoryName,emojis:[]},this._recentlyUsedCategoryInitialValue={id:E.a.Recent,name:E.f.recentCategoryName,emojis:[]},this._defaultPreviewEmoji=this._uncompressedData.emojis[this.props.previewEmojiCodepoint],this._categories.unshift(this._recentlyUsedCategoryInitialValue),this._focusHelper=new Y(this._categories,this._uncompressedData.emojis,e.rowSize),this.state={activeCategory:this._categories[1],activeSkinTone:E.e[e.defaultSkinTone],ariaDescendantId:Object(A.a)(),categories:[this._searchCategoryInitialValue,...this._categories],focusRow:-1,focusCol:-1,recentlyUsed:[],previewSkinTone:void 0,query:"",searchResults:[],withDescription:!0}}componentWillUnmount(){b.a.set(Ce,{recentlyUsed:this._getUpdatedRecentlyUsedEmojiList(),activeSkinToneId:this.state.activeSkinTone.id})}componentDidMount(){b.a.get(Ce).then((e=>{if(e&&"object"==typeof e){const{recentlyUsed:t=[],activeSkinToneId:i}=e,s="string"==typeof i&&E.e[i],o=Object.assign({},{recentlyUsed:Array.isArray(t)?Object(we.a)(t,(e=>"string"==typeof e?e:void 0)):[],activeCategory:this._categories[1]},s?{activeSkinTone:s}:{});this.setState(o),this._shouldUpdateScrollPosition=!0}}))}componentDidUpdate(e,t){const{categories:i,recentlyUsed:s,searchResults:o}=this.state,{rowSize:r}=this.props;if(t.searchResults!==o||t.recentlyUsed!==s){const e={...this._searchCategoryInitialValue,emojis:o},t={...this._recentlyUsedCategoryInitialValue,emojis:s.length?[...s].reverse():[]};this.setState({activeCategory:this._getActiveCategory(),categories:[e,t].concat(this._staticCategories()),focusCategoryId:void 0,focusCol:-1,focusRow:-1,focusItem:void 0})}t.categories===i&&e.rowSize===r||(this._focusHelper=new Y(i,this._uncompressedData.emojis,r))}_getScrollParent(){if(!this._scrollParent){const e=L.a.findDOMNode(this._scrollRef.current);this._scrollParent=e instanceof window.Element?e:void 0}return this._scrollParent}render(){const{partialRender:e}=this.props,{recentlyUsed:t,searchResults:i}=this.state,s={...this._searchCategoryInitialValue,emojis:i},o={...this._recentlyUsedCategoryInitialValue,emojis:t.length?[...t].reverse():[]},r=this._staticCategories(),n=[s,o].concat(r),a=[s,o,r[0]];return c.a.createElement(X.a,{onKeyDown:this._handleKeyDown,style:Re.root},c.a.createElement(M,{style:Re.searchSection},this._renderSearch()),c.a.createElement(M,{style:Re.anchorsSection},this._renderAnchors(n)),this._renderCategories(e?a:n),c.a.createElement(M,{style:Re.footerContainer,withTopBorder:!0},this._renderFooter()))}}n()(Ee,"defaultProps",{defaultSkinTone:E.d.None,partialRender:!1,previewEmojiCodepoint:"ðŸ‘‹",rowSize:E.b});const Re=u.a.create((e=>({root:{flexShrink:1,flexGrow:1},categoriesContainer:{flexShrink:1,overflowY:"auto"},searchSection:{borderTopLeftRadius:e.borderRadii.xLarge,borderTopRightRadius:e.borderRadii.xLarge,padding:0},anchorsSection:{padding:0,marginTop:e.spaces.space4},footer:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",overflow:"hidden"},footerContainer:{borderBottomLeftRadius:e.borderRadii.xLarge,borderBottomRightRadius:e.borderRadii.xLarge},emojiDescription:{paddingHorizontal:e.spaces.space12,maxWidth:"180px",flex:1},twemoji:{height:"2em",width:"2em"},skinTonePicker:{marginHorizontal:e.spaces.space12}})));t.a=Ee},r728:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var s=i("iChn");const o={name:"a",keywords:"j",sprite_position:"k",skin_variations:"l"},r={unified:"key",skin_tone:"d",sprite_position:"k"},n=e=>{const t=[],i=(e,i)=>{e&&(Array.isArray(e)?e:[e]).forEach((e=>{(i?e.split(/[-|_|\s]+/):[e]).forEach((e=>{const i=e.toLowerCase();-1===t.indexOf(i)&&t.push(i)}))}))};return i(e.short_names,!0),i(e.name,!0),i(e.keywords,!1),t.join(",")},a=(e,t)=>{for(const i in t)e[i]=e[t[i]],delete e[t[i]]},c=e=>{const t=JSON.parse(JSON.stringify(e));t.compressed=!1;for(const e in t.emojis){const i=t.emojis[e];a(i,o),i.id=e,i.unified=e,i.short_names=[e],i.text||(i.text=""),i.search=n(i),i.skin_variations&&(i.skin_variations.forEach((e=>{a(e,r)})),i.skin_variations=Object(s.a)(i.skin_variations,(e=>{const{skin_tone:t}=e;let i=t[0];for(let e=1;e<t.length;e++)i+=`+${t[e]}`;return i})))}return t}}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/ondemand.EmojiPicker.04a2d0e5.js.map