(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"3EFP":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"d",(function(){return s})),a.d(t,"e",(function(){return o})),a.d(t,"f",(function(){return c}));const n="ArrowDown",i="ArrowUp",r="Enter",s="Escape",o="ESC",c="Tab"},"5T6p":function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),r=a("MWbm"),s=a("TIdA"),o=a("A91F"),c=a("t62R");const l=a("rHpw").a.create((e=>({root:{flexDirection:"row",flexShrink:1,flexGrow:1},bodyColumn:{justifyContent:"center",flexDirection:"column",marginRight:e.spaces.space4,marginLeft:e.spaces.space12,flexShrink:1},coverContainer:{borderRadius:e.borderRadii.large,overflow:"hidden"},cellThumbnail:{height:e.spaces.space48,width:e.spaces.space48},largeCellThumbnail:{height:e.spaces.space56,width:e.spaces.space56}})));t.a=function(e){const{image:t,style:a,supportText:n,title:d,withNewTypeaheadUI:u}=e;return i.a.createElement(r.a,{style:[l.root,a]},i.a.createElement(r.a,{style:[l.coverContainer,u?l.largeCellThumbnail:l.cellThumbnail]},t?i.a.createElement(s.a,{accessibilityLabel:"",aspectMode:o.a.SQUARE,image:t}):null),i.a.createElement(r.a,{style:l.bodyColumn},n?i.a.createElement(c.b,{color:"gray700",numberOfLines:1,size:"subtext2"},n):null,i.a.createElement(c.b,{numberOfLines:2,weight:"bold"},d)))}},AQOc:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return l}));var n=a("lnti"),i=a("aWyx");const r={entries:{},entryIdsByConversationId:{},reactionsByMessageId:{}},s=(e=[],t={})=>e.reduce(((e,a)=>{const n=a.user_id,i=t[n]||{id_str:n};return e[n]={...a,user:i},e}),{});function o(e,t){const{entries:a,entryIdsByConversationId:n}=t;return(n[e]||[]).map((e=>a[e]&&a[e].data)).filter(Boolean)}const c=(e,t=r,a)=>{const{conversation_id:n,participants:i,...o}=e;return{conversation_id:n,...o,entries:t.entryIdsByConversationId[n]||[],participants:s(i,a)}},l=(e,t,a)=>{const{conversation_id:r,participants:c,social_proof:l,...d}=e,u={conversation_id:r,...d,entries:o(r,t),participants:s(c,a),social_proof:void 0};return l&&(u.social_proof=((e=[],t={})=>e.map((e=>{if(e.proof_type===i.d.MUTUAL_FRIENDS){const{users:a,...i}=e;return{...i,users:Object(n.a)(a.map((e=>t[e])))}}return e})))(l,a)),u}},OhSZ:function(e,t,a){"use strict";a.d(t,"a",(function(){return y}));var n=a("ERkP"),i=a.n(n),r=a("aWyx"),s=a("XnpN"),o=a("3XMw"),c=a.n(o),l=a("jV+4"),d=a("pjBI"),u=a("t62R"),p=a("rHpw"),m=a("p9G8");const h=c.a.cfd94063,f=(e=[])=>e.map((({data:e})=>e)),g=p.a.create((e=>({title:{maxWidth:"50%"}}))),y=({conversation:e,newConversationParticipants:t,perspective:a})=>{if(e){if(e.type===r.a.ONE_TO_ONE){const[t]=Object(s.a)(e,a).map((({user:e})=>e));return t.name}return Object(m.a)(e,a)}{const e=f(t);return Object(m.b)(e,a)}};t.b=({conversation:e,isConversationSearchTitle:t=!1,isMessageSearchTitle:a=!1,newConversationParticipants:n,perspective:o,renderTimestamp:c,textColor:p="normal",titleWeight:y="bold",withScreenName:b=!0,withVDLRefresh:_=!1})=>{if(e){const n=c?c():null;if(e.type===r.a.ONE_TO_ONE){const[r]=Object(s.a)(e,o).map((({user:e})=>e)),c=i.a.createElement(l.a,{color:p,isProtected:r.protected,isVerified:r.verified,name:r.name,screenName:r.screen_name,weight:y,withLink:!1,withScreenName:b});return _&&!t||a?i.a.createElement(d.a,null,c,n):c}{const{participants:r}=e,s=Object.keys(r).length;if(t)return i.a.createElement(d.a,{color:p},i.a.createElement(u.b,{color:p,numberOfLines:1,style:g.title,weight:y},Object(m.a)(e,o,t)),_?null:i.a.createElement(u.b,{color:"gray700",numberOfLines:1,weight:"normal"},h({peopleCount:s})));const c=i.a.createElement(u.b,{color:p,numberOfLines:1,weight:y},Object(m.a)(e,o,t));return _&&!t||a?i.a.createElement(d.a,null,c,n):c}}{const e=f(n);return i.a.createElement(u.b,{color:p,numberOfLines:1,weight:y},Object(m.b)(e,o))}}},V5Qi:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("AQ79");const i=(e,t)=>e[n.c]?e[n.c].conversations[t]:null},XnpN:function(e,t,a){"use strict";var n=a("aWyx"),i=a("t0aI");const r=(e=0)=>new Date(Number(e)),s=(e,t)=>r(e.join_time)-r(t.join_time),o=({user:e},{user:t})=>Object(i.a)(e.id_str,t.id_str);var c=a("tn7R"),l=a("VIKJ");t.a=(e,t)=>{const{created_by_user_id:a,participants:i,type:r}=e,d=Object(c.a)(i),[u,p]=Object(l.a)(d,(({user:e})=>e.id_str===t));return p.length?r===n.a.GROUP&&1===p.length?[...u,...p]:a?p.sort(((...e)=>(t,a)=>e.map((e=>e(t,a))).filter((e=>!!e))[0]||0)((e=>({user:t},{user:a})=>{switch(e){case t.id_str:return-1;case a.id_str:return 1;default:return 0}})(a),s,o)):p:u}},ZcYN:function(e,t,a){"use strict";a.d(t,"a",(function(){return se}));var n=a("KEM+"),i=a.n(n),r=a("ERkP"),s=a.n(r),o=a("+Kfv"),c="typeaheadResult",l=a("AQOc"),d=a("V5Qi"),u=a("G6rE"),p=a("rxPX");const m=(e,t)=>t.conversationId,h=(e,t)=>Object(d.a)(e,m(0,t));var f=Object(p.a)().propsFromState((()=>({conversationId:m,conversation:h,users:u.e.selectAll}))).adjustStateProps((({conversation:e,conversationId:t,users:a})=>{const n={conversation:void 0};return null!=e&&e.data&&(n.conversation=Object(l.b)(e.data,void 0,a)),n})),g=a("aA19"),y=a("OhSZ"),b=a("5mJL"),_=a("rHpw");const v=_.a.create((e=>({root:{cursor:"pointer",paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical,width:"100%"},avatarColumn:{flexGrow:1,maxWidth:e.spaces.space40,minWidth:"32px"},bodyColumn:{flexGrow:7,alignItems:"center",flexDirection:"row",justifyContent:"space-between"},disabled:{opacity:.6,backgroundColor:e.colors.gray0}})));var w=f((({conversation:e,isDisabled:t,isSelected:a,perspective:n})=>e?s.a.createElement(b.a,{avatarCell:s.a.createElement(g.a,{conversation:e,perspective:n,size:"xLarge"}),avatarCellStyle:v.avatarColumn,avatarSize:"xLarge",cellStyle:v.bodyColumn,style:[v.root,!a&&t&&v.disabled]},s.a.createElement(y.b,{conversation:e,perspective:n}),se({isSelected:a})):null)),x=a("MWbm"),I=a("LbZ7"),E=a("t62R"),C=a("9Xij"),S=a("TIdA"),T=a("A91F");class R extends s.a.PureComponent{render(){const{event:e,image:t,supportText:a}=this.props;return s.a.createElement(x.a,{style:D.root},s.a.createElement(I.a,{withGutter:!0},s.a.createElement(x.a,{style:D.bodyColumn},a?s.a.createElement(E.b,{color:"gray700",size:"subtext2"},a):null,s.a.createElement(E.b,{numberOfLines:1},e)),t?s.a.createElement(x.a,{style:D.coverContainer},s.a.createElement(C.a,{ratio:1},s.a.createElement(S.a,{accessibilityLabel:"",aspectMode:T.a.SQUARE,image:t}))):null))}}const k="100px",D=_.a.create((e=>({root:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.space16},bodyColumn:{flexGrow:7,justifyContent:"center"},coverContainer:{backgroundColor:e.colors.gray200,borderRadius:e.borderRadii.small,flexGrow:1,justifyContent:"flex-end",maxHeight:k,maxWidth:k,overflow:"hidden",width:"25%"}})));var O=R,F=a("5T6p"),j=(a("MvUL"),a("yyPN")),M=a.n(j);var P=a("EHV7"),L=a("FiRh");const U=_.a.create((e=>({root:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.space16},context:{alignItems:"center",flexDirection:"row"},icon:{color:e.colors.primary,height:e.fontSizes.subtext2,paddingRight:e.spaces.space4,width:e.fontSizes.subtext2},disabled:{backgroundColor:e.colors.gray0}})));var N=function(e){const{isDisabled:t,query:a,resultContext:n,topic:i}=e,r=function(e,t,a=!1){const n=M()(e),i=e.toLowerCase().indexOf(t.toLowerCase()),r=i+t.length;let s;if(0===n.length){const t=a?[i>0?[0,i]:void 0,[r,e.length]].filter(Boolean):[[i,r]];s=[{highlights:-1!==i?t:void 0,text:e,entityType:"text",prefix:""}]}else{const t=n.flatMap((({indices:t},a,n)=>{const i=0===a?0:n[a-1].indices[1],r=a===n.length-1,s=[];return i!==t[0]&&s.push(e.slice(i,t[0])),s.push(e.substring(t[0],t[1])),r&&e.length!==t[1]&&s.push(e.slice(t[1])),s}));let o=0;const c=t.map(((e,t,a)=>{o+=t>0?a[t-1].length:0;const n=e.length;return{runningTotal:o,containsQuery:-1!==i&&o+n>=i&&o<r}}));s=t.map(((e,t)=>{var n;const{containsQuery:s,runningTotal:o}=c[t],l=e.includes("#");let d;if(a&&!s)d=[[0,e.length]];else if(s){const t=o<i?i-o:0,n=o+e.length<r?e.length:r-o,s=l?t-1:t,c=l?n-1:n;d=a?[s>0?[0,s]:void 0,c!==e.length-1?[c,e.length]:void 0].filter(Boolean):[[s,c]]}const u=l?`${null==e?void 0:e.replace("#","")}`:e;return{highlights:null!==(n=d)&&void 0!==n&&n.length?d:void 0,text:u,entityType:l?"hashtag":"text",prefix:l?"#":""}}))}return s}(i,a,true),o=s.a.createElement(E.b,null,r.map(((e,t)=>s.a.createElement(L.b,{key:`${e.text}${t}`,part:e}))));return s.a.createElement(x.a,{style:[U.root,t&&U.disabled]},o,n?s.a.createElement(x.a,{style:U.context},n&&n.types[0]&&"followable_topic"===n.types[0].type?s.a.createElement(P.a,{style:U.icon}):null,s.a.createElement(E.b,{color:"gray700"},n.display_string)):null)},A=a("M0jS");const z=(e,t)=>Object(A.c)(e,t.userId);var H=Object(p.a)().propsFromState((()=>({userSpace:z}))),V=a("3XMw"),W=a.n(V),G=a("tocL"),B="TypeaheadUser",X=a("GZwR"),Q=a("IMA+"),$=a("v6aA");const K=W.a.ae2205d1,Z=W.a.d960b55b,q=W.a.fd06b02f,J=Object.freeze({num_of_followers:G.a.Follow,bio:G.a.TextOnly,location:G.a.Location,num_tweets:G.a.NewTweets,follow_relationship:G.a.Follow,followers_follow:G.a.Follow,social_proof:G.a.SocialProof,follow_relationship_mutual_follow:G.a.FollowMutual,follow_relationship_followed:G.a.FollowFollowed,follow_relationship_following:G.a.FollowFollowing});class Y extends s.a.PureComponent{constructor(...e){super(...e),i()(this,"_handleAvatarClick",(()=>{const{userSpace:e}=this.props;e||this._handleClick()})),i()(this,"_handleClick",(()=>{const{isDisabled:e,item:t,onItemClick:a}=this.props;a&&a(t,!!e)}))}render(){const{avatarUri:e,decoration:t,disabledMessage:a,isDisabled:n,isProtected:i,isVerified:r,name:o,screenName:c,source:l,userId:d,userSpace:u,withNewTypeaheadUI:p}=this.props,{featureSwitches:m}=this.context,h=this._getSocialContext(),f=this._getResultContext()||h,g=l===X.d.SearchBox,y=u&&m.isTrue("voice_rooms_typeahead_audiospace_ring_enabled")?u:void 0;return y&&(y.accessibilityLabel=q({screenName:c})),s.a.createElement(Q.a,{avatarSize:"xLarge",avatarUri:e,decoration:t,disabledMessage:n?a:void 0,displayMode:p?"ExperimentalUserTypeahead":"UserCompact",isDisabled:n,isProtected:i,isVerified:r,name:o,onAvatarClick:this._handleAvatarClick,onCellClick:this._handleClick,onScreenNameClick:this._handleClick,presenceIndicator:g?y:void 0,screenName:c,socialContext:f,testID:B,userId:d,withLink:!1})}_getSocialContext(){const{socialContext:e}=this.props;if(!e||!e.following)return;const t=e.followed_by?K:Z;return{contextType:G.a.Follow,text:t}}_getResultContext(){const{resultContext:e,source:t}=this.props;if(!e||!e.display_string||!e.types||t!==X.d.SearchBox)return;return{contextType:(e.types.length?J[e.types[0].type]:void 0)||G.a.TextOnly,text:e.display_string}}}i()(Y,"contextType",$.a),i()(Y,"defaultProps",{withNewTypeaheadUI:!1});var ee=H.forwardRef(Y),te=a("htQn"),ae=a("iySH"),ne=a("IMYl");class ie extends s.a.Component{constructor(e,t){super(e,t),i()(this,"_onViewRef",(e=>{this._viewRef=e;const{onRef:t}=this.props;t&&t(e)})),i()(this,"_handleClick",(()=>{const{item:e}=this.props;e.type!==X.b.User&&this.props.onClick&&this.props.onClick(e,this.isDisabled)})),this._withNewTypeaheadUI=this.context.featureSwitches.isTrue("responsive_web_account_search_readability_enabled")&&e.source===X.d.SearchBox}componentDidMount(){this._loaded=!0,this._viewRef&&(this._rafId=window.requestAnimationFrame((()=>{this._viewRef&&this._viewRef.setNativeProps({style:{opacity:1}})})))}componentDidUpdate(e){const{onRef:t}=this.props;t&&t!==e.onRef&&this._viewRef&&t(this._viewRef)}componentWillUnmount(){this._rafId&&window.cancelAnimationFrame(this._rafId)}render(){const{domId:e,isDisabled:t,isFocused:a,isInMultiSelect:n,isSelected:i,style:r}=this.props;return s.a.createElement(o.a,{viewType:"typeahead_result"},s.a.createElement(x.a,{accessibilityRole:"option",accessibilityState:{checked:!(!n||!i)||void 0,selected:t?void 0:n&&i||!n&&!!a},nativeID:e,testID:c},s.a.createElement(te.a,{accessibilityRole:n?"checkbox":"button",disabled:t,focusable:!0,onPress:this._handleClick,style:[a&&re.focused,re.transitionStyles,r],viewRef:this._onViewRef},this._renderResult())))}_renderResult(){const{disabledMessage:e,isDisabled:t,isSelected:a,item:n,onClick:i,renderUserDecoration:r,source:o}=this.props;switch(n.type){case X.b.User:{const{data:c}=n,l=r?r({userId:c.id_str,isSelected:a}):void 0;return s.a.createElement(ee,{avatarUri:c.profile_image_url_https,canDm:!!c.can_dm,canMediaTag:!!c.can_media_tag,decoration:l||void 0,disabledMessage:e,isDisabled:t,isProtected:!!c.protected,isVerified:!!c.verified,item:n,name:c.name,onItemClick:i,resultContext:c.result_context,screenName:c.screen_name,socialContext:c.social_context,source:o,userId:c.id_str,withNewTypeaheadUI:this._withNewTypeaheadUI})}case X.b.Event:{const{data:e}=n;return this._withNewTypeaheadUI?s.a.createElement(F.a,{image:e.primary_image&&e.primary_image.original_info,style:re.itemPadding,supportText:e.supporting_text,title:e.topic,withNewTypeaheadUI:!0}):s.a.createElement(O,{event:e.topic,image:e.primary_image&&e.primary_image.original_info,supportText:e.supporting_text})}case X.b.Hashtag:case X.b.Topic:{const{query:e}=this.props,{data:a}=n;return s.a.createElement(N,{isDisabled:t,query:e||"",resultContext:a.result_context,topic:a.topic})}case X.b.DMConversation:return!!this.context.loggedInUserId&&s.a.createElement(w,{conversationId:n.id,isDisabled:t,isSelected:a,perspective:this.context.loggedInUserId});case X.b.Setting:{const{text:e}=n.data;return s.a.createElement(x.a,{style:re.navigationLink},s.a.createElement(E.b,{style:re.content},e),s.a.createElement(ae.a,{style:re.icon}))}case X.b.NoResult:{const{data:e}=n,{text:t}=e;return s.a.createElement(E.b,{style:re.noResult},t)}default:return null}}get isDisabled(){return!!this.props.isDisabled}}i()(ie,"contextType",$.a);const re=_.a.create((e=>({checkIcon:{color:e.colors.primary},navigationLink:{alignItems:"center",flexDirection:"row",flexGrow:1,paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.space16},content:{flexGrow:1,flexShrink:1},icon:{color:e.colors.gray700,paddingLeft:e.spaces.space12,flexShrink:0},noResult:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.space16},itemPadding:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},focused:{backgroundColor:e.colors.gray0},transitionStyles:{transitionProperty:"opacity",transitionDuration:"250ms",opacity:0}}))),se=({isSelected:e})=>e?s.a.createElement(ne.a,{accessibilityHidden:!0,style:re.checkIcon}):null;t.b=ie},aA19:function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),r=a("aWyx"),s=a("XnpN"),o=a("3XMw"),c=a.n(o),l=a("rHpw"),d=a("TIdA"),u=a("A91F"),p=a("jhWN"),m=a("9Xij"),h=a("Znyr"),f=a("cm6r"),g=a("U+bB"),y=a("MWbm");const b=c.a.fd48249b,_=l.a.create((e=>({circle:{borderRadius:e.borderRadii.infinite,overflow:"hidden"},container:{height:"auto",width:"100%"},itemAccessory:{top:-e.spacesPx.space24,right:-e.spacesPx.space24},userDecoration:{fontSize:e.fontSizes.subtext3,position:"absolute",backgroundColor:e.colors.gray100,marginLeft:e.spaces.space8,boxSizing:"border-box",width:e.spaces.space24,height:e.spaces.space24}}))),v=l.a.create((e=>({container:{flexDirection:"row"},left:{flex:1},right:{flex:1,marginLeft:e.borderWidths.small,marginRight:`calc(-1 * ${e.borderWidths.small})`}}))),w=l.a.create((e=>({container:{flexDirection:"column"},top:{flex:1,marginBottom:e.borderWidths.small},bottom:{flex:1}}))),x=({left:e,right:t})=>i.a.createElement(y.a,{style:v.container},i.a.createElement(y.a,{style:v.left},e),i.a.createElement(y.a,{style:v.right},t)),I=({bottom:e,top:t})=>i.a.createElement(y.a,{style:w.container},i.a.createElement(y.a,{style:w.top},t),i.a.createElement(y.a,{style:w.bottom},e));t.a=e=>{const t=t=>{const{size:a,withVDLRefresh:n}=e,r=n?"xxxLarge":"xxLarge";return i.a.createElement(y.a,{key:t.id_str,style:_.container},i.a.createElement(p.a,{size:a||r,uri:t.profile_image_url_https}))},a=e=>{const t=e.length,a=e.map(((e,a)=>{const n=2===t||3===t&&0===a?.5:1;return i.a.createElement(y.a,{key:e.id_str,style:_.container},i.a.createElement(p.a,{aspectRatio:n,shape:"none",size:"custom",uri:e.profile_image_url_https}))}));if(2===t)return i.a.createElement(m.a,{ratio:1},i.a.createElement(x,{left:a[1],right:a[0]}));{const e=i.a.createElement(I,{bottom:a[2],top:a[1]}),t=a[0];return i.a.createElement(x,{left:e,right:t})}},{conversation:n,link:o,perspective:c,withBadge:v}=e,w=n&&n.avatar_image_https,E=n?Object(s.a)(n,c).map((({user:e})=>e)):[],C=E.slice(0,3),S=(e=>{const t=e&&e.avatar&&e.avatar.image&&e.avatar.image.original_info;return t?i.a.createElement(d.a,{accessibilityLabel:"",aspectMode:u.a.SQUARE,backgroundColor:l.a.theme.colors.gray50,image:t,rounded:!0}):null})(n)||(e=>e?i.a.createElement(g.a,{source:e}):null)(w)||(e=>{const n=e.length;return 0===n?null:1===n?t(e[0]):i.a.createElement(y.a,{style:_.circle},a(e))})(C),T=o||((e,t)=>{if(e)return e.type===r.a.GROUP?`/messages/${e.conversation_id}/participants`:e.type===r.a.ONE_TO_ONE?`/${t[0].screen_name}`:void 0})(n,E),R=v&&null!=n&&n.participants?Object.keys(n.participants).length-1:0;return S?i.a.createElement(i.a.Fragment,null,i.a.createElement(m.a,{ratio:1},T?i.a.createElement(f.a,{interactiveStyles:null,link:T},S):S),R?(({badgeCount:e})=>i.a.createElement(y.a,{style:_.itemAccessory},i.a.createElement(h.a,{count:e,standalone:!0,style:_.userDecoration,textColor:"normal",truncatedCountFormatter:()=>"",unreadCountLabel:b,withTruncatedCount:!1})))({badgeCount:R}):null):null}},p9G8:function(e,t,a){"use strict";a.d(t,"b",(function(){return u}));var n=a("Xrkv"),i=a("aWyx"),r=a("XnpN"),s=a("3XMw"),o=a.n(s);const c=o.a.b5b7fb93,l=o.a.g755fcde,d=o.a.f6b1ff81;t.a=(e,t,a)=>{const{type:n,name:s,participants:o={}}=e;if(n===i.a.GROUP&&s)return s;if(!Object.keys(o).length)return;if(n===i.a.GROUP&&a)return c;const l=Object(r.a)(e,t).map((({user:e})=>e));return u(l,t,n)};const u=(e=[],t,a=i.a.GROUP)=>{const r=e.filter((e=>e.id_str!==t)).map((e=>e.name));switch(r.length){case 0:return l;case 1:{const[e]=r;return a===i.a.GROUP?d({name:e}):e}default:{const e=!0;return Object(n.a)(r,e)}}}},tAeL:function(e,t,a){"use strict";a.d(t,"a",(function(){return E}));var n=a("KEM+"),i=a.n(n),r=a("ERkP"),s=a.n(r),o=a("+Kfv"),c=a("0yYu"),l=a("7nmT"),d=a.n(l),u=a("3XMw"),p=a.n(u),m=a("kIAd"),h=a("JYMr"),f=a("rHpw");const g=p.a.f2b3fe06,y=f.a.create((e=>({hidden:{visibility:"hidden"}})));var b=({isLoading:e})=>{const[t,a]=s.a.useState(!1);return s.a.useEffect((()=>{let t;return e?t=setTimeout((()=>a(!0)),m.a):a(!1),()=>clearTimeout(t)}),[e]),s.a.createElement(h.a,{ariaValueText:t?g:"",indeterminate:t,style:!t&&y.hidden})},_=a("ZcYN"),v=a("MWbm"),w=a("oQhu"),x=a("w6IS"),I=a("MXDK");class E extends s.a.Component{constructor(e,t){super(e),i()(this,"_setFocusedItemRef",(e=>{this._shouldScrollToFocusedItem&&e&&(Object(I.c)(this._getScrollParent(),e),this._shouldScrollToFocusedItem=!1)})),i()(this,"_resetScroll",(()=>{const e=this._getScrollParent();e&&(e.scrollTop=0)})),i()(this,"_getFlattenedItems",Object(w.a)((e=>Object(x.a)(e)))),i()(this,"_handleItemClick",((e,t)=>{const{items:a,onItemClick:n}=this.props,i=this._getFlattenedItems(a).indexOf(e);e&&!t&&!this._shouldBlockInteractivity&&n(e,i),this._resetFocus()})),i()(this,"_getResultCount",(()=>{const{items:e}=this.props;return this._getFlattenedItems(e).length})),i()(this,"_setFocusIndex",((e,t)=>{const{items:a,onItemFocusChanged:n}=this.props;this._shouldScrollToFocusedItem=t,this.setState({focusIndex:e}),n&&n(this._getFlattenedItems(a)[e])})),i()(this,"_resetFocus",(()=>{this._setFocusIndex(this.props.withItemAlwaysSelected?0:-1)})),i()(this,"focusNext",(()=>{const{focusIndex:e}=this.state,t=this._getResultCount();if(0===t)return;const a=e+1>=t?0:e+1;this._setFocusIndex(a,!0)})),i()(this,"focusPrevious",(()=>{const{focusIndex:e}=this.state,t=this._getResultCount();if(0===t)return;const a=e-1<0?t-1:e-1;this._setFocusIndex(a,!0)})),i()(this,"hasFocusedItem",(()=>{const{focusIndex:e}=this.state,t=this._getResultCount();return e>=0&&t>e})),i()(this,"selectFocusedItem",(()=>{const{focusIndex:e}=this.state,{getItemIsDisabled:t,items:a}=this.props;if(this.hasFocusedItem()){const n=this._getFlattenedItems(a)[e],i=!!t&&t(n,n.data);this._handleItemClick(n,i)}})),this.state={focusIndex:e.withItemAlwaysSelected?0:-1}}componentDidMount(){this._resetFocus()}componentWillUnmount(){clearTimeout(this._interactivityTimeout)}componentDidUpdate(e){e.items!==this.props.items&&(this._resetFocus(),this._resetScroll(),this._interactivityTimeout&&clearTimeout(this._interactivityTimeout),this._shouldBlockInteractivity=!0,this._interactivityTimeout=setTimeout((()=>{this._shouldBlockInteractivity=!1}),500))}render(){const{domId:e,isLoading:t,items:a,renderCallout:n,renderHeader:i,renderNoResultsState:r,selectedItems:c,style:l}=this.props,d=t||a.length;let u=0;const p=!!c;return d?s.a.createElement(o.a,{viewType:"typeahead_dropdown"},s.a.createElement(v.a,{accessibilityMultiSelectable:p,accessibilityRole:"listbox",nativeID:e,style:l},n?n():null,s.a.createElement(b,{isLoading:!!t}),i?i():null,a.length?a.map(((e,t)=>{const n=!Array.isArray(a[t-1])&&t>0,i=t<a.length-1,r=Array.isArray(e)?this._renderTypeaheadGroup(e,u,n,i):this._renderTypeaheadItem(e,u);return u+=Array.isArray(e)?e.length:1,r})):null)):r?r():null}_renderTypeaheadGroup(e,t,a,n){const{withSectionDivider:i}=this.props;return s.a.createElement(s.a.Fragment,{key:`typeaheadGroup-${t}`},i&&a?s.a.createElement(c.a,{key:`typeaheadDividerTop-${t}`}):null,e.map(((e,a)=>this._renderTypeaheadItem(e,t+a))),i&&n?s.a.createElement(c.a,{key:`typeaheadDividerBottom-${t}`}):null)}_renderTypeaheadItem(e,t){const{ariaDescendantId:a,getItemDisabledMessage:n,getItemIsDisabled:i,query:r,renderUserDecoration:o,selectedItems:c,source:l}=this.props,{focusIndex:d}=this.state,u=!(!c||!e.id)&&c.indexOf(e.id)>=0,p=!!c,m=d===t,h=i&&i(e,e.data),f=n&&n(e,e.data);return s.a.createElement(_.b,{disabledMessage:f,domId:m?a:void 0,isDisabled:h,isFocused:m,isInMultiSelect:p,isSelected:u,item:e,key:`typeaheadItem-${t}-${e.id||""}`,onClick:this._handleItemClick,onRef:m?this._setFocusedItemRef:void 0,query:r,renderUserDecoration:o,source:l})}_getScrollParent(){if(!this._scrollParent){const e=Object(I.a)(d.a.findDOMNode(this));this._scrollParent=e===window?null:e}return this._scrollParent}}},woHV:function(e,t,a){"use strict";a("ERkP");var n=a("k/Ka"),i=a("rHpw").a.create({initial:{alignItems:"stretch",borderWidth:0,borderStyle:"solid",boxSizing:"border-box",display:"flex",flexDirection:"column",margin:0,padding:0,position:"relative",zIndex:0,minHeight:0,minWidth:0}});t.a=e=>{const{style:t,...a}=e;return Object(n.a)("form",{...a,action:"#",style:[i.initial,t]})}}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/shared~loader.Typeahead~bundle.Communities~bundle.Settings~bundle.LoggedOutHome~bundle.Search~bundle.UserList.3bbf0875.js.map